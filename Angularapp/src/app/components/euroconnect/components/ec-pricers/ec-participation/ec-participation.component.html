<div class="container-fluid contentdiv" *ngIf="!PrevQuoteShowOrderPopUp">
    <div [ngClass]="{'overlay ': this.viewOnly}">
        <div [ngClass]="{'view-pricer-popupmodal': this.viewOnly}">
            <div class="closeView" *ngIf="this.viewOnly">
                <app-svg-icons class="closebtn" [icon]="'close-icon'" [width]="'15'" [height]="'15'" (click)="hideViewPopup()">
                </app-svg-icons>
            </div>
            <div [ngClass]="{'disablePointerEvents': this.viewOnly}">
            <div class="row pgHeaderTop"><!--Padding changed by Jyoti S || 13-Apr-2023 -->
                <div class="col-12 title-row">
                    <label class="pageHeader">Participation</label>
                    <div class="product-tabs" *ngIf="!this.viewOnly">
                        <div></div>
                        <div *ngIf="!this.viewOnly">
                            <div class="topGridRow">
                                <div class="relPosition">
                                   <!-- <label class="labelNames">{{ "Load Template" | translate }}</label> --> <!-- Commented by Jyoti S || 19-Apr-2023 -->
                                   <label class="labelNames">{{ "Load Variants" | translate }}</label>
                                </div>
                                <div class="relPosition">
                                    <app-custom-dropdown [data]="portfolioIdArr" [unicodeIcon]="false" [showIcon]="true" [textField]="'P_Name'" [valueField]="'P_ID'" [iconSrcField]="'imageIcon'" (selected)="changeDdl($event)" >
                                    </app-custom-dropdown>
                                </div>
                                <div class="relPosition">
                                    <!-- <label class="labelNames">{{ "New Template" | translate }}</label> --> <!-- Commented by Jyoti S || 19-Apr-2023 -->
                                    <label class="labelNames">{{ "New Variant" | translate }}</label>
                                </div>
                                <div class="relPosition">
                                    <input type="text" [(ngModel)]="portfolioName" class="ip-border txtalignLeft">
                                </div>
                                <div class="relPosition">
                                    <div class="btn-group btnSaveMargin" (clickOutside)="saveoptionflag = false">
                                        <button type="button" class="btn btn_Save" (click)="Save()" tabindex="48" *ngIf="!this.viewOnly" [disabled]="priceBtnActive === 'N'">
                                            <div class="price-with-loader">
                                            {{ "Save" | translate }}
                                            <div class="txtAlignCenter" *ngIf="variantFlag">
                                                <div class="row priceall-loader loaderbox">
                                                    <div class="col-12">
                                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                    </div>
                                                </div>
                                            </div>
                                           </div>
                                        </button>
                                        <button type="button" (click)="saveOptions()" class="sidebutton btnSaveNShare" *ngIf="!this.viewOnly" [disabled]="(priceBtnActive === 'N')">
                                            <app-svg-icons [icon]="'arrow-drop-down'" [width]="'8'" [height]="'8'">
                                            </app-svg-icons>
                                        </button>
                                        <div class="ddl SaveNShare" *ngIf="(saveoptionflag) ">
                                            <div  class="flexDisplay">
                                            <div class="updateIcon" *ngIf="portfolio!=='' && accessRight !== 'VIEW'">
                                                <!-- <mat-icon *ngIf="portfolio!=='' && accessRight !== 'VIEW'" style="width:25px !important;height:25px !important;margin: 3px 5px 3px 10px;font-size: 24px!important; font-family: 'Material Icons' !important;">
                                                    save_alt</mat-icon> -->
                                                    <!-- Changed by Jyoti S || 19-Apr-2023 -->
                                                    <app-svg-icons [icon]="'update-icon'" [width]="'15'" [height]="'15'">
                                                    </app-svg-icons>
                                            </div>
                                            <div class="ddlitem" role="menuitem" (click)="updateVariant();saveoptionflag=false" *ngIf="portfolio!=='' && accessRight !== 'VIEW'">Update Variant
                                            </div>
                                        </div>
                                        <div class="flexDisplay">

                                            <div class="SaveNShareIcon">
                                                <!-- <mat-icon style="width:25px !important;height:25px !important;margin: 3px 5px 3px 10px;font-size: 24px!important; font-family: 'Material Icons' !important;">
                                                    share</mat-icon> -->
                                                    <app-svg-icons [icon]="'share-icon'" [width]="'15'" [height]="'15'">
                                                    </app-svg-icons>
                                            </div>
                                            <div class="ddlitem" role="menuitem" (click)="showsaveSharePopup()">Save and Share
                                            </div>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="relPosition">
                                    <button class="button DeleteIcon" (click)="DeleteTemplate();" [disabled]="(portfolio==='')">
                                        <app-svg-icons *ngIf="(portfolio==='')" [icon]="'delete'" [width]="'13'" [height]="'13'">
                                        </app-svg-icons>
                                        <app-svg-icons *ngIf="(portfolio !=='')" [icon]="'deleteEnabled'" [width]="'13'" [height]="'13'">
                                        </app-svg-icons>
                                        {{ "Delete" | translate }}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="portfolioMsg" *ngIf="successMsg !== '' && saveFlag">
                        <span class="successMsg" *ngIf="successMsg !== '' && saveFlag">{{successMsg}} </span>
                    </div>
                    <div class="portfolioMsg" *ngIf="errorTemplateMessage !== ''">
                        <span class="errorMsg" *ngIf="errorTemplateMessage !== ''">{{errorTemplateMessage}} </span>
                    </div>
                </div>
            </div>
            <div *ngIf="activeTab==='Pricing'">
                    <div class="row">
                    <div class="relPosition">
                        <div class="row divRfqId">
                            <div class="col-12 dvRfqPadding">
                                <h5 *ngIf="rfqID && !sendtocptyflag" class="hdrRfqId">
                                        RFQ ID : &nbsp; {{noteMasterID}}
                                    </h5>
                                <h5 *ngIf="selectedToken && selectedToken['Ref_x0020_No'] && sendtocptyflag" class="hdrRfqId">

                                        Product ID : &nbsp; {{selectedToken['Ref_x0020_No']}}
                                    </h5>
                                <h5 *ngIf="portfolioId && portfolioId!=='' && this.viewOnly" class="hdrRfqId">
                                        Saved Request ID : &nbsp; {{portfolioId}}
                                    </h5>
                                    <div *ngIf="ErrorMsgTop !== '' ">
                                    <span class="errMsgTop">{{ErrorMsgTop}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <div>
                    </div>
                    </div>
                <div class="row-grid rwGridPadding">
                    <div class="row-grid-inner">
                    </div>
                    <div class="row-grid-inner">


                    </div>
                        <!--Left Column-->
                    <div class="relPosition">
                            <!-- Column 1 & 2 -->
                            <div class="row-grid-inner">
                                <!-- Column 1 -->
                                <div class="flex-column">
                                    <div class="label-row">
                                        <label class="box-header">{{ "General Terms" | translate }}</label>
                                    </div>
                                    <div class="row-grid-2">
                                    <div class="relPosition">
                                            <label>{{ "Underlying" | translate }}</label>
                                        </div>
                                    <div class="relPosition">
                                            <input type="text" placeholder="Enter Underlying"
                                                value="{{ShareName}}" style="text-align: left;" [(ngModel)]="ShareName"
                                                maxlength="10" (keypress)="ChangeIndex($event); showSuggestions = true"
                                                (keydown.enter)="selectShare($event); flag=false;"
                                                (keydown.backspace)="backKeyPress($event)"
                                                (keydown.delete)="backKeyPress($event)"
                                                (keydown.tab)="flag=true;"
                                                (keydown.ArrowUp)="selectedBIndex = EcCommon.moveUpSelection1($event, selectedBIndex)"
                                                (keydown.ArrowDown)="selectedBIndex = EcCommon.moveDownSelection1($event, selectedBIndex)"
                                            tabindex="1" Id="txtShare" [disabled]="enabledisablefields('Underlyings') || ShareBasket.length >= 4" />
                                            <div class="SelectorBox" *ngIf="flag && showSuggestions"
                                                (clickOutside)="flag=false;">
                                                <a *ngFor="let share of (shares | searchunderlying: ShareName); let i = index"
                                                    (keypress)="ChangeIndex($event)"
                                                    (keydown.enter)="selectShare($event)">
                                                    <div *ngIf="share" [attr.data-share]="share.Code"
                                                        (click)="showUnderlying($event,share)"
                                                        [ngClass]="{HoverSuggestion: i === selectedBIndex}">
                                                        <span>{{ share.LongName }}</span>
                                                    </div>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row-grid-1" *ngIf="ShareBasket && ShareBasket.length > 0">
                                        <!--Shares List-->
                                    <div class="sharebasket flexDisplay" *ngFor="let Selectedshare of ShareBasket; let rowIndex = index;">
                                        <button class="shareName btnShareName" (click)="onclickShareBasket(Selectedshare)">
                                                {{Selectedshare.Code}} &nbsp;
                                            </button>
                                        <input [(ngModel)]="Selectedshare.Weight" value="{{ShareBasket.Weight}}" type="text" class="ipShare" *ngIf="upsideType === 'Call Custom Basket'" (blur)="shareweightcalc()">
                                            <!-- <img src="{{asseturl}}clear.png" width="20px" style="float: right;"
                                                (click)="removeShare(rowIndex);"> -->
                                            <app-svg-icons (click)="removeShare(rowIndex);" class="cancel-icon" [icon]="'close-icon'" [width]="'12'" [height]="'12'">
                                            </app-svg-icons>
                                        </div>
                                    </div>
                                    <div class="row-grid-2">
                                        <!--Currency-->
                                        <div class="relPosition">
                                            <label> {{ "Currency" | translate}}</label>
                                        </div>
                                        <div class="relPosition">
                                            <!-- [disabled]="((format == 'Bono J' || format == 'Warrant') && (participationType == 'Twin Win' || participationType == 'Guaranteed Capital') && onBehalfOf == 'BANCO BPI') " -->
                                            <select [(ngModel)]="ddlNoteCcy" tabindex="2" (change)="currencyChange();" 
					    [disabled]="((format == 'Bono J' || format == 'Warrant') && (participationType == 'Twin Win' || participationType == 'Guaranteed Capital'))" class="ip-border ScrollCss">
                                                    <option *ngFor="let c of CCY" (selected)="c === UnderlyingCurrency"
                                                        [value]="c">
                                                        {{ c }}</option>
                                            </select>
                                        </div>
                                    </div>
       
                                    <div class="row-grid-2">
                                    <div class="relPosition">
                                            <label>{{ "Format" | translate }}</label>
                                        </div>
                                        <!-- Resolved the format not displaying by default issue || Changed by Jyoti S || 12-Oct-2023 || START-->
                                    <div class="relPosition">
                                            <select [(ngModel)]="format" (change)="formatChange()" tabindex="3" [disabled]="enabledisablefields('Format')" class="ip-border">
                                                <ng-container *ngFor="let f of Format">
                                                    <!-- <option *ngIf="f.Key !== 'BonoJ' && f.Key !== 'Warrant' && f.Key !== 'Note'"
                                                        value="{{f.Key}}">{{f.Key}}</option> -->
                                                    <option [value]="f.Key">{{f.Key}}</option>
                                                </ng-container>
                                            </select>
                                        </div>
                                        <!-- Resolved the format not displaying by default issue || Changed by Jyoti S || 12-Oct-2023 || END-->
                                    </div>
                                    <div class="row-grid-2">
                                    <div class="relPosition">
                                            <label>{{ "Solve for" | translate }}</label>
                                        </div>
                                    <div class="relPosition">
                                            <select [(ngModel)]="SolveForvalue" tabindex="4" [disabled]="enabledisablefields('SolveFor')" class="ip-border">
                                                <ng-container  *ngFor="let s of SolveForvalueArr">
                                                    <option [value]="s.Key" *ngIf="upBarrierType !== 'None' && (s.Key == 'UpsideBarrierLevel' || s.Key == 'Rebate')">{{s.Value}}</option>
                                                    <option [value]="s.Key" *ngIf="upBarrierType == 'None' && s.Key == 'UpsideGearing'">{{s.Value}}</option>
                                                    <option [value]="s.Key" *ngIf="upperStrikeYN === 'Y' && s.Key == 'UpperStrike'">{{s.Value}}</option>
                                                    <option [value]="s.Key" *ngIf="participationType !== 'Guaranteed Capital' && s.Key == 'DownsideStrike'">{{s.Value}}</option>
                                                    <option [value]="s.Key" *ngIf="downBarrierType !== 'None' && participationType !== 'Guaranteed Capital' &&  s.Key == 'DownsideBarrierLevel'">{{s.Value}}</option>
                                                    <option [value]="s.Key" *ngIf="(participationType === 'Twin Win' || this.downsideType === 'PutSpread'  || (participationType === 'Booster' && lowerStrikeYN === 'Y') && s.Key == 'LowerStrike')">{{s.Value}}</option>
                                                    <option [value]="s.Key" *ngIf="downLeverageYN === 'Y' && s.Key == 'Leverage'">{{s.Value}}</option>
                                                    <option [value]="s.Key" *ngIf="participationType === 'Twin Win' && s.Key == 'DownsideStrike + LowerStrike'">{{s.Value}}</option>
                                                    <option [value]="s.Key" *ngIf="(s.Key == 'IBPrice' || s.Key == 'UpsideStrike')">{{s.Value}}</option>
                                                </ng-container>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row-grid-2">
                                        <!--Product Type-->
                                    <div class="relPosition">
                                            <label>{{ "Product Type" | translate }}</label>
                                        </div>
                                    <div class="relPosition">
                                            <select [(ngModel)]="participationType" (change)="onchangeProduct()" tabindex="5" class="ip-border">
                                                <option *ngFor="let p of participationTypeArr" [value]="p.Key" (selected)="p.Key == participationType">{{ p.Value }}</option>
                                                <option value="TwinWin KG">Twin Win KG</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <!-- Column 2 -->
                                <div class="flex-column">
                                    <div class="label-row">
                                        <label class="labelHeaders" style="height: 25px;"></label>
                                    </div>
                                    <div class="row-grid-2">
                                    <div class="relPosition">
                                            <label>{{ "Size" | translate }}</label>
                                        </div>
                                    <div class="relPosition">
                                            <input type="text" id="txtnotional" type="text" tabindex="14" maxlength="14"
                                                [value]="Notional" (focus)="EcCommon.UnformatNumber($event)"
                                                (blur)="this.reset();checkValidNotional($event);checkNotional($event);"
                                                (keypress)="EcCommon.NotionalValidateKeys($event)"
                                                (keyup)="EcCommon.chkNotionalFormat_keyUp($event) === false ? Notional = '': Notional=Notional"
                                                placeholder="Enter Notional" [(ngModel)]="Notional"[disabled]="enabledisablefields('Notional')" />
                                        </div>
                                    </div>
                                    <!-- <div class="row-grid-2">
                                    <div class="relPosition">
                                            <label [ngClass]="(this.SolveForvalue === 'IBPrice' && format!=='Swap' && format!=='Option') ? 'disabledlbl':''">Price
                                                (%)</label>
                                            <label *ngIf="format==='Swap' || format ==='Option'"
                                                style="white-space: nowrap;">Upfront (%) </label>
                                        </div>
                                    <div class="div-flex relPosition">
                                            <input type="text" [(ngModel)]="IBPrice" id="txtIBPrice" maxlength="10"
                                                [disabled]="this.SolveForvalue === 'IBPrice' "
                                                (change)="IBPricechange()"
                                                (blur)="this.reset();this.IBPrice = EcCommon.setDecimal($event);"
                                                (keypress)="format === 'Swap' ? EcCommon.InputNegativeNumber($event) :EcCommon.InputNumber($event)"
                                                tabindex="15" />
                                            <img src="{{asseturl}}information.png" class="info" style="margin: 8px !important;"
                                                *ngIf="format==='Swap' || format ==='Option'">
                                            <div class="infodiv" *ngIf="format==='Swap' || format ==='Option'">
                                                <span class="infoNote" *ngIf="(format==='Swap' || format ==='Option')"
                                                    style="white-space: initial;">
                                                    Negative Upfront means Issuer pays.
                                                </span>
                                            </div>
                                        </div>
                                    </div> -->
                                    <div class="row-grid-2"
                                    *ngIf="(this.SolveForvalue === 'IBPrice' && format!=='Swap') && format !=='Option'">
                                    <div style="position:relative;">
                                        <label class="disabledlbl">{{"Price" |
                                            translate}} (%)</label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" [(ngModel)]="IBPrice" id="txtIBPrice" maxlength="10"
                                            [disabled]="this.SolveForvalue === 'IBPrice' " (change)="IBPricechange()"
                                            (blur)="this.reset();this.IBPrice = EcCommon.setDecimal($event);"
                                            (keypress)="format === 'Swap' ? EcCommon.InputNegativeNumber($event) :EcCommon.InputNumber($event)"
                                            tabindex="4" />
                                    </div>
                                </div>
                                <!-- Price (%) 2-->
                                <div class="row-grid-2"
                                    *ngIf="(this.SolveForvalue !== 'IBPrice' && format!=='Swap') && format !=='Option' ">
                                    <div style="position:relative;">
                                        <label>{{"Price" | translate}} (%)</label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" [(ngModel)]="IBPrice" id="txtIBPrice" maxlength="10"
                                            [disabled]="this.SolveForvalue === 'IBPrice' " (change)="IBPricechange()"
                                            (blur)="this.reset();this.IBPrice = EcCommon.setDecimal($event);"
                                            (keypress)="format === 'Swap'? EcCommon.InputNegativeNumber($event) :EcCommon.InputNumber($event)"
                                            tabindex="4" />
                                    </div>
                                </div>

                                <!-- Upfront (%) -->
                                <div class="row-grid-2" *ngIf="format === 'Swap' || format === 'Option' ">
                                    <div style="position:relative;">
                                        <label style="white-space: nowrap;">Upfront (%) </label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" [(ngModel)]="IBPrice" id="txtIBPrice" maxlength="10"
                                            [disabled]="this.SolveForvalue === 'IBPrice' " (change)="IBPricechange()"
                                            (blur)="this.reset();this.IBPrice = EcCommon.setDecimal($event);"
                                            (keypress)="(format === 'Swap' || format === 'Option') ? EcCommon.InputNegativeNumber($event) :EcCommon.InputNumber($event)"
                                            tabindex="4" />
                                            <img src="{{asseturl}}information.png" class="info" style="margin: -4px 8px !important;"  *ngIf="format==='Swap' || format === 'Option' ">
                                            <div class="infodiv" *ngIf="format==='Swap' || format === 'Option'">
                                                <span class="infoNote rightinfoNote" *ngIf="format==='Swap' || format === 'Option'"
                                                style="white-space: initial;width: 260px;transform: translate(-250px, 20px);">
                                                    Negative Upfront means BBVA pays.
                                                </span>
                                            </div>
                                    </div>
                                </div>
                                    <div class="row-grid-2" *ngIf="format !== 'Swap' && format !== 'Option' ">
                                    <div class="relPosition">
                                            <label>{{ "Issue Price (%)" | translate }}</label>
                                        </div>
                                    <div class="relPosition">
                                            <input type="text" [(ngModel)]="issuePrice" tabindex="16"
                                                (blur)="this.issuePrice = EcCommon.setDecimal($event); this.reset();"
                                                maxlength="10" (keypress)="EcCommon.InputNumber($event)"
                                                *ngIf="format!=='Swap' || format!=='Option'" 
                                                [disabled]="true" />
                                                <!-- [disabled]="enabledisablefields('IssuePrice')" /> -->
                                                <!-- Temp done by Jyoti S || 11-Dec-2023  -->
                                        </div>
                                    </div>
                                    <div class="label-row">
                                        <div class="relPosition">
                                                <label class="box-header" *ngIf="format === 'Swap'">Funding</label>
                                            </div>
                                        </div>
                                        <div class="row-grid-2" *ngIf="format === 'Swap'">
                                        <div class="relPosition">
                                                <label>Type</label>
                                            </div>
                                        <div class="relPosition">
                                                <select *ngIf="format === 'Swap'" [(ngModel)]="fundType" tabindex="46"
                                                    (change)="this.reset();" class="ip-border">
                                                    <option value="Fixed Rate">Fixed Rate</option>
                                                    <option value="Floating Rate">Floating Rate</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row-grid-2" *ngIf="format === 'Swap'">
                                        <div class="relPosition">
                                                <label>Frequency</label>
                                            </div>
                                        <div class="relPosition">
                                                <select name="" [(ngModel)]="fundFreq" *ngIf="format === 'Swap'"
                                                    [(ngModel)]="fundFreq" tabindex="14" (change)="this.reset();" class="ip-border">
                                                    <option value="1m">1m</option>
                                                    <option value="3m">3m</option>
                                                    <option value="6m">6m</option>
                                                    <option value="12m">12m</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row-grid-2" *ngIf="(format === 'Swap' && this.SolveForvalue === 'FundingRate') || format === 'Swap' && this.SolveForvalue !== 'FundingRate'">
                                        <div class="dvStkDate">
                                                <label [ngClass]="format === 'Swap' && this.SolveForvalue === 'FundingRate' ? 'disabledlbl' : ''">Rate/Spread
                                                    (%)</label>
                                            </div>
                                            <div class="relPosition">
                                                <input type="text" *ngIf="format === 'Swap'" tabindex="48"
                                                    [(ngModel)]="fundRate" id="txtFundingRate" maxlength="100"
                                                    (blur)="this.reset();this.fundRate = EcCommon.setDecimal($event);"
                                                    (keypress)="EcCommon.InputSpread($event)"
                                                    [disabled]="this.SolveForvalue === 'FundingRate'">
                                                 <span (clickOutside)="onClickedOutside('fundRate')">
                                                    <img src="{{asseturl}}information.png" class="info" style="margin: 0px 0px 0px 8px !important"
                                                        *ngIf="format === 'Swap' && fundRate !==''"
                                                        (click)="GetTriggerValue('fundRate')">
                                                    <div *ngIf="fundRatePopup" class="triggerTable">
                                        
                                                        <table class="tblWidth">
                                                            <tr>
                                                                <th class="hdrWidth">Periods</th>
                                                                <th class="hdrWidth">Trigger</th>
                                                            </tr>
                                                            <tr *ngFor="let t of TriggerValueArr; let i = index; "
                                                                class="tblWidth">
                                        
                                                                <td class="tdRight hdrWidth">{{t.NoOfPeriods}}
                                                                </td>
                                                                <td class="tdRight hdrWidth"> {{t.OutTrigger |
                                                                    number:'1.2-2'}}
                                                                </td>
                                        
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </span>
                                            </div>
                                        </div>

                                                                                                </div>
                            </div>
                        </div>
                        <!--Right Column-->
                    <div class="relPosition">
                            <!-- Column 1 & 2 -->
                            <div class="row-grid-inner">
                                <!-- Column 1 -->
                                <div class="flex-column">
                                    <div class="label-row">
                                        <label class="box-header">{{ "Upside" | translate }}</label>
                                    </div>
                                    <div class="row-grid-2" *ngIf="this.participationType =='TwinWin KG'">
                                        <div style="position:relative;">
                                            <label>{{"Type" | translate}}</label>
                                        </div>
                                        <div style="position:relative;">
                                            <!-- <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12"> -->
                                                <select [(ngModel)]="upsidetype" (change)="upsidetypechange()"
                                                    tabindex="1">
                                                    <option value="Call Spread">Call Spread
                                                    </option>
                                                    <option value="Call">Call
                                                    </option>
                                                    <option value="Up and Out" >
                                                      Up & Out
                                                    </option>
                                                </select>
                                            <!-- </div> -->
                                    
                                        </div>
                                    </div>
                                    <div class="row-grid-2">
                                    <div class="relPosition">
                                            <label [ngClass]="this.SolveForvalue === 'UpsideStrike' ? 'disabledlbl' : ''" >Strike (%)</label>
                                        </div>
                                    <div class="relPosition">
                                            <input type="text" tabindex="17" [(ngModel)]="upStrike" id="txtupStrike"
                                                maxlength="8"
                                                (blur)="upStrike = EcCommon.setDecimal($event);PriceValidation($event,'upStrike');"
                                                (keypress)="EcCommon.InputNumber($event)" [disabled]="SolveForvalue === 'UpsideStrike'">
                                        </div>
                                    </div>
                                    <div class="row-grid-2">
                                    <div class="relPosition">
                                        <label [ngClass]="SolveForvalue === 'UpsideGearing' ? 'disabledlbl' : ''">{{"Gearing" | translate}}(%)</label>
                                        </div>
                                        <div class="relPosition">
                                            <input type="text" name="" id="txtupGearing" [(ngModel)]="upGearing"
                                                tabindex="18" maxlength="8"
                                                (blur)="upGearing = EcCommon.setDecimal($event);PriceValidation($event,'upGearing');"
                                                [disabled]="SolveForvalue === 'UpsideGearing'" (keypress)="EcCommon.InputNumber($event)">
                                        </div>
                                    </div>
                                    <div class="row-grid-2"*ngIf="this.upsidetype!='Call'">
                                        <div class="relPosition" style="padding-right: 0 !important;">
                                            <label [ngClass]="SolveForvalue === 'UpperStrike' ? 'disabledlbl' : ''" title="Only for Call Spread">
                                                {{"Upper Strike" | translate}} (%)</label>
                                        </div>
                                        <div class="div-flex-date relPosition" *ngIf="this.upsidetype=='Up and Out' || this.participationType !='TwinWin KG'">
                                            <div class="btngroup" title="Only for Call Spread">
                                                <button [ngClass]="upperStrikeYN === 'Y' ? 'Btn_Yes':'Btn_No'" tabindex="19" (click)=" changeupperStrikeYN('Y')" class="Btn">Yes</button>
                                                <button [ngClass]="upperStrikeYN === 'N' ? 'Btn_Yes':'Btn_No'" tabindex="20" (click)=" changeupperStrikeYN('N')" class="Btn">No</button>
                                            </div><!-- Changed by Jyoti S || 24-Apr-2023 -->
                                            <div>
                                                <input type="text" class="YNbox" tabindex="21" [(ngModel)]="upUpperStrike"
                                                    id="txtupUpperStrike" maxlength="8" [disabled]="minCouponYN==='Y' || SolveForvalue === 'UpperStrike'"
                                                    title="Only for Call Spread"
                                                    (blur)="upUpperStrike = EcCommon.setDecimalForBlank($event);PriceValidation($event,'upUpperStrike');"
                                                    (keypress)="EcCommon.InputNumber($event)"
                                                    (change)="upUpperStrikeChange();">
                                            </div>
                                        </div>
                                        <div *ngIf="this.upsidetype == 'Call Spread'" style="position:relative;">
                                            <input type="text" class="YNbox" tabindex="23" [(ngModel)]="upUpperStrike"
                                            id="txtupUpperStrike" maxlength="8"
                                            title="Only for Call Spread"
                                            (blur)="upUpperStrike = EcCommon.setDecimalForBlank($event);PriceValidation($event,'upUpperStrike');"
                                            (keypress)="EcCommon.InputNumber($event)"
                                            (change)="upUpperStrikeChange();">
                                        </div>
                                    </div>
                                    <div class="row-grid-2" *ngIf="this.participationType !='TwinWin KG'">
                                        <div class="relPosition" style="padding-right: 0 !important;">
                                        <label [ngClass]="this.SolveForvalue === 'UpperStrike' ? 'disabledlbl':''">{{"Min. Coupon" | translate}} (%)</label>
                                        </div>
                                        <div class="div-flex-date relPosition">
                                            <div class="btngroup">
                                                <button [ngClass]="minCouponYN === 'Y' ? 'Btn_Yes':'Btn_No'" tabindex="22" (click)=" changeminCouponYN('Y')" class="Btn">Yes</button>
                                                <button [ngClass]="minCouponYN === 'N' ? 'Btn_Yes':'Btn_No'" tabindex="23" (click)=" changeminCouponYN('N')" class="Btn">No</button>
                                            </div><!-- Changed by Jyoti S || 24-Apr-2023 -->
                                            <input type="text" class="YNbox" tabindex="24" [(ngModel)]="upCoupon"
                                                id="txtupCoupon" maxlength="8" [disabled]="upperStrikeYN ==='Y' || this.SolveForvalue === 'UpperStrike'"
                                                (blur)="upCoupon = EcCommon.setDecimal($event);PriceValidation($event,'upCoupon');txtupCouponChange()">
                                        </div>
                                    </div>
                                </div>

                                <!-- Column 2 -->
                                <div class="flex-column">
                                    <div class="label-row">
                                        <label class="labelHeaders" style="height: 25px;"></label>
                                    </div>
                                    <div class="row-grid-2" *ngIf="(this.upsidetype==='Up and Out' || this.participationType !='TwinWin KG') ">
                                    <div class="relPosition">
                                            <label title="Up&Out Barrier Type">{{ "Barrier Type" | translate }}</label>
                                        </div>
                                    <div class="relPosition">
                                            <select name="" tabindex="25" (change)="upbarrierTypeChange();"
                                                [(ngModel)]="upBarrierType" title="Up&Out Barrier Type"
                                                 class="ip-border">
                                                <ng-container  *ngFor="let u of upBarrierTypeArr">
                                                    <option [value]="u.Key">{{u.Value}}</option>
                                                </ng-container>
                                            </select>
                                            <img src="{{asseturl}}information.png" class="info" style="margin: -4px 8px !important;">
                                            <div class="infodiv">
                                                <span class="infoNote rightinfoNote" *ngIf="upBarrierType === 'None'"
                                                style="white-space: initial;width: 260px;transform: translate(-250px, 20px);">
                                                    {{ "There is no barrier, meaning the call is always activated." | translate }}
                                                </span>
                                                <span class="infoNote rightinfoNote"
                                                    *ngIf="upBarrierType === 'At Expiry'"
                                                    style="white-space: initial;width: 260px;transform: translate(-250px, 20px);">
                                                    {{ "The underlyings are observed against the Barrier Level only on the Close Value for the Final Observation Date of the Product." | translate }}
                                                </span>
                                                <span class="infoNote rightinfoNote" *ngIf="upBarrierType === 'Daily'"
                                                style="white-space: initial;width: 260px;transform: translate(-250px, 20px);">
                                                    {{ "The underlyings are observed against the Barrier only on the Close Value every day over the life of the product." | translate }}
                                                </span>
                                                <span class="infoNote rightinfoNote"
                                                    *ngIf="upBarrierType === 'American'"
                                                    style="white-space: initial;width: 260px;transform: translate(-250px, 20px);">
                                                    {{ "The underlyings are observed against the Barrier Level continuously over the life of the product." | translate }}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <div *ngIf="this.upsidetype==='Up and Out'"> -->
                                        <div class="row-grid-2" *ngIf="this.upBarrierType !='None' && this.upBarrierType !=''">
                                            <div style="position:relative;" style="padding-right: 0 !important;" *ngIf="upBarrierType !== 'None'">
                                                <label [ngClass]="this.SolveForvalue === 'UpsideBarrierLevel' ? 'disabledlbl':''" title="Up&Out Barrier Level">Barrier Level (%)</label>
                                            </div>
                                            <div *ngIf="upBarrierType!=='None'" style="position:relative;">
                                                <input type="text" tabindex="26" title="Up&Out Barrier Level"
                                                    [(ngModel)]="upBarrierLevel" id="txtupBarrierLevel" maxlength="8"
                                                    (blur)="upBarrierLevel = EcCommon.setDecimal($event);PriceValidation($event,'upBarrierLevel');"
                                                    (keypress)="EcCommon.InputNumber($event)" [disabled]="SolveForvalue === 'UpsideBarrierLevel'">
                                            </div>
                                        </div>
                                    <!-- </div> --> <!-- Temp commented by Jyoti S || Upside Type is not yet added in code since it WIP || 07-Dec-2023 -->
                                    <!-- <div class="row-grid-2" *ngIf="upBarrierType!=='None' && this.upsidetype==='Up and Out'"> --><!-- Temp commented by Jyoti S || Upside Type is not yet added in code since it WIP || 07-Dec-2023 -->
                                    <div class="row-grid-2" *ngIf="this.upBarrierType !='None' && this.upBarrierType !=''">
                                    <div class="relPosition"  *ngIf="upBarrierType !== 'None' ">
                                            <label [ngClass]="SolveForvalue === 'Rebate' ? 'disabledlbl':''">Rebate (%)</label>
                                        </div>
                                        <div *ngIf="upBarrierType !== 'None'" style="position:relative;">
                                            <input type="text" [(ngModel)]="upRebate" tabindex="27"
                                                title="Rebate if Up&Out Barrier is touched" id="txtRebateCoupon"
                                                maxlength="8"
                                                (blur)="upRebate = EcCommon.setDecimal($event);PriceValidation($event,'upRebate');"
                                                [disabled]="SolveForvalue === 'Rebate'"
                                                (keypress)="EcCommon.InputNumber($event)">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                     <div class="row-grid rwGridPadding">
                        <!--Left Column-->
                    <div class="relPosition">
                            <!-- Column 1 & 2 -->
                            <div class="row-grid-inner">
                                <!-- Column 1 -->
                                <div class="flex-column">
                                    <!-- Dates -->
                                   <div class="label-row">
                                       <label class="box-header">{{ "Dates" | translate }}</label>
                                   </div>
                                   <div class="row-grid-2">
                                       <!--Strike Shifter/Date-->
                                       <div class="relPosition">
                                           <label>{{ "Strike Shifter/Date" | translate }}</label>
                                       </div>
                                       <div class="div-flex-date error-date-2" style="position: relative;">
                                           <!-- <label class="switch">
                                                   <input type="checkbox" id="switch">
                                                   <span class="slider"><p>Tdy Fwd</p></span>
                                                 </label> -->
                                           <div class="Btn_priips">
                                               <div class="btngroup">
                                                   <!-- Change for Tdy to TOD && Fwd to FWD || VarshaG || 21-03-2023 -->
                                                   <button [(ngModel)]="stkshiftTdy"  ngDefaultControl tabindex="9" (click)="Setstkshiftvalue(stkshiftTdy);this.reset();changeStkShiftToggle();" [disabled]="enabledisablefields('StrikeShifterDate')" class="Btn" [ngClass]="stkshift === '0B' ? 'Btn_Yes' : 'Btn_No' ">TOD</button>
                                                   <button [(ngModel)]="stkshiftFwd"  ngDefaultControl tabindex="9" (click)="Setstkshiftvalue(stkshiftFwd);this.reset();changeStkShiftToggle();" [disabled]="enabledisablefields('StrikeShifterDate')" class="Btn" [ngClass]="stkshift === '0B' ? 'Btn_No' : 'Btn_Yes' ">FWD</button>
                                               </div>
                                               <!-- <div> -->
                                                   <!-- <input type="date" [(ngModel)]="stkdate" id="txtstkdate" tabindex="13" value="{{stkdate}}" (change)="this.reset();" min="{{todayDate}}" (blur)="txtTenorDateChange('Payment');" *ngIf="stkshift === 'Fwd'" style="margin-left: 4px  !important; width: 117px !important;max-width: 117px !important;min-width: 117px !important;"> -->
                                                   <div class="dateLabel" *ngIf="stkshift === 'Fwd'">
                                                       <input type="date" [(ngModel)]="stkdate" id="txtstkdate" tabindex="9" value="{{stkdate}}" (change)="this.reset();" min="{{todayDate}}" (blur)="txtTenorDateChange('Payment');">
                                                <span class="spnstkdate" id="stkdate">{{ stkdate | date: "dd-MMM-yyyy" }}</span>
                                                   </div>
                                              
                                              
                                               
                                           </div>
                                           <!-- <mat-button-toggle-group [(ngModel)]="stkshift" tabindex="13"
                                                   style="width: auto; height: 35px;"
                                                   (change 
                                            <input type="text" name="" class="tenorBox" maxlength="4" tabindex="9"
                                   (blur)="txtTenorChange($event,'Strike');"
                                   (keypress)="this.commonfunctions.tenorDateValidation($event);" [(ngModel)]="stkshift">/ -->
   
                                           <!-- <img src="{{asseturl}}information.png" class="info">
                                               <div class="infodiv">
                                                   <span class="infoNote" style="white-space: initial;width: 260px;">
                                                       Number of days you want to shift the Strike Forward from Today. For
                                                       Strike
                                                       today (or
                                                       next business day in case today is holiday), please input 0b.
                                                   </span>
                                               </div> -->
                                       </div>
                                   </div>
                                   <div class="row-grid-2">
                                       <!-- Payment Shifter/Date -->
                                    <div class="dvStkDate">
                                           <label>Issue Date Offset</label>
                                       </div>
                                    <div class="div-flex-date error-date-2 relPosition">
                                           <select [(ngModel)]="paymentshift" class="YNbox1 select_Euroconnect" tabindex="10" style="width: 82px;" (blur)="txtTenorDateChange('Payment');txtTenorDateChange('Expiry');" (change)="this.reset();" [disabled]="enabledisablefields('IssueDateOffset')" class="ip-border">
                                                   <!-- <option value="5B">T+5</option>
                                           <option value="10B">T+10</option>
                                           <option value="Custom">Custom</option> -->
                                                   <option *ngFor="let d of IssueDateOffset"
                                                       (selected)="d.Value === paymentshift" [value]="d.Value">
                                                       {{ d.Key }}</option>
                                               </select>
                                           <!-- <input type="text" name="" class="tenorBox" maxlength="4" tabindex="10"
                                           (keypress)="this.commonfunctions.tenorDateValidation($event);"
                                           (blur)="txtTenorChange($event,'Payment');" [(ngModel)]="paymentshift">/ -->
                                           <!-- <input type="date" [(ngModel)]="settdate" value="{{settdate}}" tabindex="14" id="txtsettdate" (change)="this.reset();" (blur)="txtTenorDateChange('Expiry');txtTenorDateChange('Payment');" *ngIf="paymentshift === 'Custom'" style="margin-left: 4px !important; width: 117px !important;max-width: 117px !important;min-width: 117px !important;"> -->
                                           <div class="dateLabel" id="customOffset" *ngIf="paymentshift === 'Custom'">
                                               <input type="number" name="settdate" id="settdate" min="1" max="99" oninput="validity.valid||(value='');" [(ngModel)]="customSetDate" tabindex="11" id="txtsettdate" (change)="this.reset();" (blur)="txtTenorDateChange('Expiry');txtTenorDateChange('Payment');">
                                               <span id="settdateLabel">T + </span>
                                           </div>
                                           <!-- <img src="{{asseturl}}information.png" class="info">
                                               <div class="infodiv">
                                                   <span class="infoNote" style="white-space: initial;width: 260px;">
                                                       Number of days you want to shift the Payment Forward from Strike
                                                       Date.
                                                   </span>
                                               </div> -->
                                       </div>
                                   </div>
                                   <div class="row-grid-2">
                                       <!-- Tenor -->
                                    <div class="relPosition">
                                           <label>{{ "Tenor" | translate }}</label>
                                       </div>
                                       <div class="div-flex-date">
                                           <!-- added blur event to calculate expiry date || PriyaL || 07Apr2022 || Assigned by Pranav D -->
                                           <select [(ngModel)]="expshift" class="YNbox1 ip-border ScrollCss" tabindex="12" style="width: 80px;" (blur)="txtTenorChange($event,'Expiry');" (change)="this.reset();customTenor = ''" [disabled]="enabledisablefields('Tenor')">
                                                   <option *ngFor="let t of Tenor" (selected)="t.Value === expshift"
                                                       [value]="t.Value">
                                                       {{ t.Key }}</option>
                                               </select>
                                           <input type="text" name="" maxlength="4" *ngIf="expshift === 'Custom'" [(ngModel)]="customTenor" tabindex="13" (blur)="this.reset();CustomerTenorChange('Expiry');" (keypress)="EcCommon.customTenorValidation($event, customTenor)"
                                               style="margin-left: 4px !important; width: 117px !important;max-width: 117px !important;min-width: 117px !important;">
                                           <!--(keypress)="commonfunctions.TenorValidation($event)"
                                           (blur)="txtTenorChange($event,'Expiry');changeAutoFreqOnTenor()" -->
                                           <!-- <input type="date" [(ngModel)]="expdate" tabindex="12" value="{{expdate}}" id="txtexpdate"
                         (change)="this.reset();" disabled> -->
                                           <!-- <img src="{{asseturl}}information.png" class="info">
                                               <div class="infodiv">
                                                   <span class="infoNote" style="white-space: initial;width: 260px;">
                                                       In case you require the exact Maturity or Final Observation Date,
                                                       please do
                                                       not
                                                       hesitate to request a
                                                       Termsheet.
                                                   </span>
                                               </div> -->
                                       </div>
                                   </div>
                                  
                               </div>
                                <!-- Column 2 -->
                                <div class="flex-column">
                                    <div class="label-row">
                                        <label class="box-header">Regulatory</label>
                                    </div>
                                    <div class="row-grid-2">
                                        <!--Priips-->
                                        <div class="relPosition">
                                            <label>Priips</label>
                                
                                        </div>
                                        <div class="relPosition">
                                            <div class="btngroup">
                                                <button [ngClass]="priipsYN==='Yes'?'Btn_Yes':'Btn_No'" (click)=" priipsChanged('Yes')" class="Btn">Yes</button>
                                                <button [ngClass]="priipsYN==='No'?'Btn_Yes':'Btn_No'"  (click)=" priipsChanged('No')" class="Btn">No</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row-grid-2" *ngIf="priipsYN === 'Yes'">
                                        <!--Language-->
                                        <div class="relPosition">
                                            <label *ngIf="priipsYN === 'Yes'">Language</label>
                                
                                        </div>
                                        <div class="relPosition">
                                            <!-- Custom Multi Dropdown  -->
                                            <app-custom-dropdown-multi-select [tabIdx]="'13'" [pricerType]="'single'" 
                                            *ngIf="languageDropdown1?.length <= 0 || languageDropdown1[0]==''" 
                                            [options]="LanguageArr1" [(ngModel)]="language" 
                                            [disabled]="enabledisablefields('Language')">
                                            </app-custom-dropdown-multi-select>
                                
                                            <app-custom-dropdown-multi-select [pricerType]="'single'" 
                                            [options]="languageDropdown1" [(ngModel)]="language"
                                            *ngIf="languageDropdown1?.length > 0 && languageDropdown1[0]!=''">
                                            </app-custom-dropdown-multi-select>
                                        </div>
                                    </div>
                                    <div class="row-grid-2" *ngIf="priipsYN === 'Yes'">
                                        <!--Country-->
                                        <div class="relPosition">
                                            <label *ngIf="priipsYN === 'Yes'">Country</label>
                                        </div>
                                        <div class="relPosition">
                                            <app-custom-dropdown-multi-select [tabIdx]="'14'" [pricerType]="'single'" [options]="CountryofDistribution" 
                                            [(ngModel)]="country" [disabled]="enabledisablefields('Country')" *ngIf="countryDropdown1?.length <= 0 || countryDropdown1[0]==''">
                                            </app-custom-dropdown-multi-select>
                                
                                            <app-custom-dropdown-multi-select [pricerType]="'single'" [options]="countryDropdown1" [(ngModel)]="country"
                                            *ngIf="countryDropdown1?.length > 0 && countryDropdown1[0]!=''">
                                            </app-custom-dropdown-multi-select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Right Column-->
                        <div class="relPosition">
                            <!-- Column 1 & 2 -->
                            <!-- Guaranteed Section  -->
                            <div class="row-grid-inner" >
                                <!-- Column 1 -->
                                <div class="flex-column" *ngIf="participationType==='Guaranteed Capital'">
                                    <div class="label-row">
                                        <div style="position:relative;">
                                            <label class="box-header">{{ "Guaranteed Coupon" | translate }}</label>
                                        </div>
                                    </div>
                                    <div class="row-grid-2">
                                        <div style="position:relative;" style="padding-right: 0!important;">
                                            <label>Capital Guaranteed (%)</label>
                                        </div>
                                        <div class="relPosition">
                                            <input type="text" [(ngModel)]="capitalGuaranteed" id="txtcapitalGuaranteed"
                                                maxlength="8"
                                                (blur)="capitalGuaranteed = EcCommon.setDecimal($event);PriceValidation($event,'Strike');"
                                                (keypress)="EcCommon.InputNumber($event)" tabindex="30" disabled>
                                        </div>
                                    </div>
                                    <div class="row-grid-2">
                                        <div class="relPosition">
                                            <label>Coupon (%)</label>
                                        </div>
                                        <div class="relPosition">
                                            <input type="text" tabindex="50" [(ngModel)]="guaranteedCoupon"
                                                maxlength="8" (blur)="this.guaranteedCoupon = EcCommon.setDecimal($event)">
                                            <img src="{{asseturl}}information.png" class="info" style="margin: 8px !important;">
                                            <div class="infodiv">
                                                <span class="infoNote">
                                                    {{"The guaranteed coupon to be paid in absolute term." | translate}}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row-grid-2">
                                        <div class="relPosition">
                                            <label>Coupon Freq</label>
                                        </div>
                                        <div class="relPosition">
                                            <select tabindex="37" [(ngModel)]="guaranteedCouponFreq">
                                                <option value="At Maturity">At
                                                    Maturity</option>
                                            </select>

                                        </div>
                                    </div>

                                </div>
                                <!-- Column 2 -->
                                <div class="flex-column">

                                </div>
                            </div>


                            <!-- Column 1 & 2 -->
                            <!-- Downside Section  -->
                            <div class="row-grid-inner" >
                                <!-- Column 1 -->
                                <div class="flex-column" *ngIf="participationType !=='Guaranteed Capital'">
                                    <div class="label-row row-grid-2">
                                        <div class="relPosition">
                                            <label class="box-header">{{ "Downside" | translate }}</label>
                                        </div>
                                    </div>
                                    <div class="row-grid-2" *ngIf="this.participationType == 'TwinWin KG'">
                                        <div style="position:relative;">
                                            <label>{{"Type" | translate}}</label>
                                        </div>
                                        <div style="position:relative;">
                                            <!-- <div> -->
                                                <select [(ngModel)]="downsideType" (change)="onchangeDownsideType()"
                                                    tabindex="1">
                                                    <option value="Put">Put
                                                    </option>
                                                    <option value="PutSpread">Put Spread
                                                    </option>
                                                </select>
                                            <!-- </div> -->
    
                                        </div>
                                    </div>
                                    <div class="row-grid-2">
                                        <div class="relPosition">
                                            <!-- <label class="disabledlbl" *ngIf="this.SolveForvalue === 'Strike'">Strike
                                                (%)</label> -->
                                            <!-- <label [ngClass]="this.downsideType !== 'PutSpread' && (this.SolveForvalue === 'DownsideStrike' || SolveForvalue === 'DownsideStrike + LowerStrike') ? 'disabledlbl' : ''" *ngIf="this.downsideType !== 'PutSpread' && (this.SolveForvalue !== 'DownsideStrike' && SolveForvalue !== 'DownsideStrike + LowerStrike')">{{"Strike" | translate }}(%)</label> -->
                                            <label class="disabledlbl"
                                            *ngIf="this.downsideType !== 'PutSpread' && (this.SolveForvalue === 'DownsideStrike' || SolveForvalue === 'DownsideStrike + LowerStrike')">{{"Strike"
                                            | translate}}(%)
                                        </label>
                                        <label
                                            *ngIf="this.downsideType !== 'PutSpread' && (this.SolveForvalue !== 'DownsideStrike' && SolveForvalue !== 'DownsideStrike + LowerStrike')">{{"Strike"
                                            | translate}}(%)
                                        </label>
                                            <label *ngIf="this.downsideType == 'PutSpread'">{{"Upper Strike" | translate}} (%)
                                        </label>
                                        </div>
                                        <div class="relPosition">
                                            <input type="text" [(ngModel)]="downStrike" id="txtdownStrike" maxlength="8"
                                                (blur)="downStrike = EcCommon.setDecimal($event);PriceValidation($event,'downStrike');calculateLeverage();"
                                                (keypress)="EcCommon.InputNumber($event)" tabindex="28" [disabled]="SolveForvalue === 'DownsideStrike' || SolveForvalue === 'DownsideStrike + LowerStrike'">
                                        </div>
                                    </div>
                                    <div class="row-grid-2" *ngIf="this.downsideType !== 'Put'">
                                        <div class="relPosition">
                                            <!-- <label [ngClass]="(SolveForvalue === 'LowerStrike' || SolveForvalue === 'DownsideStrike + LowerStrike') ? 'disabledlbl' : ''">Lower Strike (%)</label> -->
                                            <label
                                            *ngIf="participationType !== 'Guaranteed Capital'  && SolveForvalue !== 'LowerStrike' && SolveForvalue !== 'DownsideStrike + LowerStrike'"
                                            title="Only for Put Spread">Lower Strike (%)</label>
                                        <label
                                            *ngIf="SolveForvalue === 'LowerStrike' || SolveForvalue === 'DownsideStrike + LowerStrike'"
                                            class="disabledlbl"
                                            title="Only for Put Spread">Lower Strike (%)</label>
                                        </div>
                                        <div class="relPosition flexDisplay">
                                            <div class="btngroup" style="width: 34% !important;" title="Only for Put Spread"  *ngIf="participationType === 'Booster'"> 
                                                <button [ngClass]="lowerStrikeYN === 'Y' ? 'Btn_Yes':'Btn_No'" tabindex="29" (click)="(SolveForvalue == 'LowerStrike' || SolveForvalue == 'DownsideStrike + LowerStrike') ? null : changelowerStrikeYN('Y')" class="Btn">Yes</button>
                                                <button [ngClass]="lowerStrikeYN === 'N' ? 'Btn_Yes':'Btn_No'" tabindex="30" (click)="(SolveForvalue == 'LowerStrike' || SolveForvalue == 'DownsideStrike + LowerStrike') ? null : changelowerStrikeYN('N')" class="Btn">No</button>
                                            </div><!-- Changed by Jyoti S || 24-Apr-2023 -->

                                            <!-- <label *ngIf="participationType === 'Booster'" style='margin-right: 10px;'> &nbsp;</label> -->
                                            <input type="text"
                                                [ngClass]="participationType === 'Booster' ? 'YNbox' : ''"
                                                title="Only for Put Spread" tabindex="31" [(ngModel)]="downLowerStrike"
                                                id="txtdownLowerStrike" maxlength="8"
                                                (blur)="downLowerStrike = EcCommon.setDecimal($event);PriceValidation($event,'downLowerStrike');"
                                                (keypress)="EcCommon.InputNumber($event)"
                                                [disabled]="participationType === 'Guaranteed Capital' || lowerStrikeYN === 'N' || SolveForvalue === 'LowerStrike' || SolveForvalue === 'DownsideStrike + LowerStrike'">
                                        </div>
                                    </div>
                                    <div class="row-grid-2" *ngIf="this.participationType == 'TwinWin KG'">
                                        <div style="position:relative;" style="padding-right: 0 !important;">
                                            <label>{{"Gearing" | translate}} (%)
                                            </label>
                                        </div>
                                        <div style="position:relative;" style="padding-right: 0 !important;">
                                            <input type="text" [(ngModel)]="downsidePutGearing" maxlength="8"
                                                (blur)="downsidePutGearing = EcCommon.setDecimal($event);"
                                                (keypress)="EcCommon.InputNumber($event)" tabindex="30">
                                        </div>
    
                                        <div>
    
                                        </div>
                                    </div>
                                    <div class="row-grid-2" *ngIf="this.participationType !== 'TwinWin KG'">
                                        <div class="relPosition">
                                            <label class="disabledlbl"
                                            *ngIf="participationType === 'Twin Win' || lowerStrikeYN==='N' || SolveForvalue === 'Leverage'">{{"Leverage"
                                            | translate}}
                                            (%)</label>
                                        <label
                                            *ngIf="participationType === 'Booster' && lowerStrikeYN ==='Y' && SolveForvalue !== 'Leverage'">{{"Leverage"
                                            | translate}}
                                            (%)</label>
                                        </div>
                                        <div style="position:relative; display: flex;">
                                            <div class="btngroup" style="width: 34% !important;" *ngIf="participationType === 'Booster'" >
                                                <button [ngClass]="downLeverageYN === 'Y' ? 'Btn_Yes':'Btn_No'" tabindex="32" (click)="SolveForvalue === 'Leverage' ? '' : this.downLeverageYN='Y';changedownLeverageYN()" class="Btn">Yes</button>
                                                <button [ngClass]="downLeverageYN === 'N' ? 'Btn_Yes':'Btn_No'" tabindex="33" (click)="SolveForvalue === 'Leverage' ? '' : this.downLeverageYN='N';changedownLeverageYN()" class="Btn">No</button>
                                            </div><!-- Changed by Jyoti S || 24-Apr-2023 -->

                                            <!-- <label *ngIf="participationType === 'Booster'" style='margin-right: 10px;'> &nbsp;</label> -->
                                            <input type="text" tabindex="34"
                                                [ngClass]="participationType === 'Booster' ? 'YNbox' : ''"
                                                [(ngModel)]="downLeverage" id="txtdownLeverage" maxlength="8"
                                                (blur)="downLeverage = EcCommon.setDecimal($event);PriceValidation($event,'downLeverage');"
                                                (keypress)="EcCommon.InputNumber($event)"
                                                [disabled]="participationType === 'Twin Win' || downLeverageYN === 'N' || SolveForvalue === 'Leverage'">
                                        </div>
                                    </div>
                                    <div class="flex-column" *ngIf="participationType != 'Guaranteed Capital'">
                                    <div class="label-row row-grid-2" style="grid-gap: 85px !important;"  *ngIf="this.participationType  == 'TwinWin KG' ">
                                        <label class="box-header " style="width: 148px !important;">Capital Protection</label>
                                        <input style="width: 67px !important;" type="text" class="YNbox"  [(ngModel)]="capitalprotection"
                                        id="capprotection" 
                                        (blur)="capitalprotection = EcCommon.setDecimal($event);"
                                        (keypress)="EcCommon.InputNumber($event)">
                                    </div>
                                </div>
                                </div>
                                <!-- Column 2 -->
                                <div class="flex-column" *ngIf="participationType != 'Guaranteed Capital'">
                                    <div class="label-row">
                                        <div class="relPosition">
                                            <label class="labelHeaders" style="height: 23px;"></label>
                                        </div>
                                    </div>
                                    <div class="row-grid-2">
                                        <div class="relPosition">
                                            <label *ngIf="this.participationType  !== 'TwinWin KG' " title="Down&In Barrier Type">Barrier Type</label>
                                            <label *ngIf="this.participationType  == 'TwinWin KG' ">D&O Obs Type</label>
                                        </div>
                                        <div class="relPosition">
                                            <select name="" [(ngModel)]="downBarrierType" tabindex="35"
                                                title="Down&In Barrier Type" (change)="downbarrierTypeChange();" class="ip-border">
                                                <ng-container  *ngFor="let d of downBarrierTypeArr">
                                                    <option [value]="d.Key" *ngIf="participationType === 'Booster' && d.Key == 'None'">{{d.Value}}</option>
                                                    <option [value]="d.Key" *ngIf="d.Key != 'None'">{{d.Value}}</option>
                                                </ng-container>
                                            </select>
                                            <img src="{{asseturl}}information.png" class="info" style="margin: -4px 8px !important;">
                                            <div class="infodiv">
                                                <span class="infoNote rightinfoNote" *ngIf="downBarrierType === 'None'"
                                                style="white-space: initial;width: 260px;transform: translate(-250px, 20px);">
                                                    There is no barrier, meaning the put is always activated.
                                                </span>
                                                <span class="infoNote rightinfoNote"
                                                    *ngIf="downBarrierType === 'At Expiry'"
                                                    style="white-space: initial;width: 260px;transform: translate(-250px, 20px);">
                                                    The underlyings are observed against the Barrier Level only on the
                                                    Close
                                                    Value for the Final Observation Date of the Product.
                                                </span>
                                                <span class="infoNote rightinfoNote" *ngIf="downBarrierType === 'Daily'"
                                                style="white-space: initial;width: 260px;transform: translate(-250px, 20px);">
                                                    The underlyings are observed against the Barrier only on the Close
                                                    Value
                                                    every day over the life of the product.
                                                </span>
                                                <span class="infoNote rightinfoNote"
                                                    *ngIf="downBarrierType === 'American'"
                                                    style="white-space: initial;width: 260px;transform: translate(-250px, 20px);">
                                                    The underlyings are observed against the Barrier Level continuously
                                                    over
                                                    the life of the product.
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row-grid-2">
                                        <div class="relPosition" *ngIf="downBarrierType !== 'None'">
                                            <label *ngIf="this.participationType  !== 'TwinWin KG' && downBarrierType !== 'None'" title="Down&In Barrier Level" [ngClass]="this.SolveForvalue === 'DownsideBarrierLevel' ? 'disabledlbl':''">Barrier Level (%)</label>
                                            <label *ngIf="this.participationType  == 'TwinWin KG' && downBarrierType !== 'None'" [ngClass]="this.SolveForvalue === 'DownsideBarrierLevel' ? 'disabledlbl':''">D&O Barrier Level</label>
                                        </div>
                                        <div class="relPosition" *ngIf="downBarrierType !== 'None'">
                                            <input type="text" title="Down&In Barrier Level"
                                                [(ngModel)]="downBarrierLevel" id="txtdownBarrierLevel" maxlength="8"
                                                *ngIf="downBarrierType !== 'None'"
                                                (blur)="downBarrierLevel = EcCommon.setDecimal($event);PriceValidation($event,'downBarrierLevel');"
                                                (keypress)="EcCommon.InputNumber($event)" tabindex="36" [disabled]="SolveForvalue === 'DownsideBarrierLevel'">
                                        </div>
                                    </div>
                                    <div class="row-grid-2">
                                        <div style="position:relative;display:flex;" >
                                            <label  *ngIf="this.participationType  == 'TwinWin KG' ">Rebate
                                                </label>
                                        </div>
                                        <div  *ngIf="this.participationType  == 'TwinWin KG' " style="position:relative;">
                                            <input type="text" [(ngModel)]="downRebate" 
                                                title="Rebate if Up&Out Barrier is touched" id="txtdownRebateCoupon"
                                                maxlength="8"
                                                (blur)="downRebate = EcCommon.setDecimal($event);PriceValidation($event,'downRebate');"
                                                (keypress)="EcCommon.InputNumber($event)">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>




                    <!-- viewOnly -->
                <div class="row-button-grid clearPriceDivheight">
                        <!-- <button class="button" (click)="Price()" tabindex="35" *ngIf="!this.viewOnly">Price</button> "-->

                        <!-- Start - Added by Apurva K|| 25-Apr-2023||FIN1EURINT-219 -->
                    <div class="btn-group btn-groupMargin" (clickOutside)="priceoptionflag = false" *ngIf="!this.viewOnly">
                           <!-- Added by Varsha G || 03-May-2023||FIN1EURINT-278 -->
                           <button class="button clearPriceMargin" (click)="this.reset()">Clear Price</button>
                           <!-- ngIf condition added to resolve alignment issue in View functonality in RFQ Blotter -->
                           <button type="button" class="button priceAll" tabindex="38" *ngIf="!this.viewOnly" [disabled]="priceBtnActive === 'N' || loadflag" (click)="Price()">

                               <div class="price-with-loader">
                                   {{ "Price All" | translate }}
                                <div class="txtAlignCenter" *ngIf="loadflag">
                                    <div class="row priceall-loader loaderbox">
                                           <div class="col-12">
                                            <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                           </div>
                                       </div>
                                   </div>
                               </div>
                           </button>
                           <!-- <button type="button" (click)="priceOptions()"
                                   class="btn btn-split dropdown-toggle dropdown-toggle-split"
                                   style="height: 40px !important; font-size: 14px !important;" data-toggle="dropdown"
                                   aria-haspopup="true" aria-expanded="false" [disabled]="priceBtnActive === 'N'"
                                   *ngIf="!this.viewOnly">
                                   <span class="sr-only">Toggle Dropdown</span>
                               </button>
                               <div class="ddl" style="top:45px;" *ngIf="priceoptionflag">
                                   <div style="float: left;padding-left: 5px;">
                                       <mat-icon
                                           style="width:25px !important;height:25px !important;margin: 3px 5px 3px 10px;font-size: 24px!important;font-family: 'Material Icons' !important;">
                                           schedule</mat-icon>
                                   </div>
                                   <div class="btndllList" (click)="showSchedulePopup()">Schedule Price</div>
                               </div> -->
                       </div>
                       <!-- <button class="button" tabindex="36" (click)="Save()" *ngIf="!this.viewOnly">Save</button> -->
                            <!-- START || Added by SandipA for FIN1EURINT-46 || 11-Apr-2023 -->
                            <!-- <div *ngIf="pageloadflag" class="loading" id="loading">
                           
                               <img src="{{asseturl}}loading_dots.gif" alt="Loading..." class="loadingImg" >
                                   
                           </div> -->
                           <!-- END || Added by SandipA for FIN1EURINT-46 || 11-Apr-2023 -->
                   <!-- End - Added by Apurva K|| 25-Apr-2023||FIN1EURINT-219 -->
                        <!-- Loader icon position changed by AdilP FIN1EURINT-506 || 05-07-2023 ||START -->
                    <div class="pageload-overlay" *ngIf="pageloadflag">
                        <div>
                            <svg version="1.1" id="L4" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
                        y="0px" [ngStyle]="{ width:  + '25px', height:  + '25px' }"
                        style="margin-left: 30px" viewBox="0 0 100 100" enable-background="new 0 0 0 0"
                        xml:space="preserve">
                        <circle stroke="#a1a1a1" cx="55" cy="23" r="1.4" stroke-width="0.1" fill="var(--icon-active-bg)">
                            <animate attributeName="opacity" dur="2s" values="0;1;0" repeatCount="indefinite" begin="0.1" />
                        </circle>
                        <circle stroke="#a1a1a1" cx="55" cy="23" r="1.5" stroke-width="0.1" fill="var(--icon-active-bg)">
                            <animate attributeName="opacity" dur="2s" values="0;1;0" repeatCount="indefinite" begin="0.1" />
                        </circle>
                        </svg>
                        </div>
                    </div>
                     <!-- Loader icon position changed by AdilP FIN1EURINT-506 || 05-07-2023 ||END -->

                    <div class="relPosition">

                       <!-- *ngIf=" (this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].Price !== '')|| timeoutMsg==='Timeout' || (orderID!=='' && this.viewOnly)" -->
                        <div class="msgBox msgBoxborder" *ngIf="this.viewOnly && this.sortedAllPrices?.length > 0 && this.sortedAllPrices[0].Price !== ''">
                            <div class="row reply-popup reply-popupBox">
                               <!-- Show Min/Max Limit on Reprice action - added by Priya L. on 25-Feb-2022 - assigned by Pranav D. -->
                               <div class="col-12" *ngIf="!this.viewOnly">
                                    <span class="bestreply replyColor">
                                           Best Reply &nbsp;: :
                                       </span>

                               </div>
                               <div class="col-6" *ngIf="this.viewOnly">
                                    <span class="bestreply replyColor">
                                           Reply &nbsp;: :
                                       </span>
                               </div>
                                <div class="col-6 txtAlignRight" *ngIf="this.viewOnly">
                                    <span _ngcontent-bgr-c14="" class="bestreply MinMaxLimit" *ngIf="this.bestLPArray.minLimit !== undefined && this.bestLPArray.maxLimit !== undefined
                                        && this.bestLPArray.minLimit !== '' && this.bestLPArray.maxLimit !== ''">
                                           Min./Max. Limit: {{this.bestLPArray.minLimit | number:'1.2-2'}} /
                                           {{this.bestLPArray.maxLimit | number:'1.2-2'}}</span>
                               </div>
                               <!-- <div class="col-10" style="text-align: right">
           <span class="bestreply">
             <span class="bestPriceStyle" *ngIf="this.sortedAllPrices.length > 0">
               {{replySolveFor}} (%) : &nbsp;
               {{this.sortedAllPrices[0].Price === 'Rejected' || this.sortedAllPrices[0].Price === 'Unsupported' || this.sortedAllPrices[0].Price === 'Expired' || this.sortedAllPrices[0].Price === 'Cancelled' ? this.sortedAllPrices[0].Price :
               this.sortedAllPrices[0].Price | number:'1.2-2'}}
             </span>
           </span>
           <span class="errorMsg" *ngIf="timeoutMsg!==''">
             {{timeoutMsg}}
           </span>
         </div> -->
                           </div>
                            <div class="row reply-popup reply-popupBox">
                               <div class="col-6">
                                   <span class="bestreply">
                                           <span class="bestPriceStyle" *ngIf="this.sortedAllPrices?.length > 0">
                                               {{this.sortedAllPrices[0].lp}}
                                           </span>
                                   </span>
                               </div>
                               <div class="col-6">
                                   <span class="bestreply">
                                           <span class="bestPriceStyle" *ngIf="this.sortedAllPrices?.length > 0">
                                               {{this.sortedAllPrices[0].Price === 'Rejected' ||
                                               this.sortedAllPrices[0].Price === 'Unsupported' ||
                                               this.sortedAllPrices[0].Price === 'Expired' ||
                                               this.sortedAllPrices[0].Price === 'Cancelled' ||
                                               this.sortedAllPrices[0].Price === '-' ?
                                               this.sortedAllPrices[0].Price :
                                               this.sortedAllPrices[0].Price | number:'1.2-2'}}
                                           </span>
                                   </span>
                               </div>
                           </div>
                       </div>
                       <!-- <div style="text-align: center;" *ngIf="loadflag">
                           <div class="row" style="padding: 0 auto !important;margin: 0;">
                               <div class="col-12">
                                   <img src="{{asseturl}}loading_dots.gif" alt="" width="100px" style="margin-top: -40px;">
                               </div>
                           </div>
                       </div> -->
                   
                   </div>
                    <div class="ViewModebtn">
                       <!-- <button class="button" *ngIf="this.viewOnly" (click)="cloneSinglePricer()"
                       style="pointer-events: all;" >Clone</button> -->


                  


                       <!-- [ngClass]="TSFlag ? 'button viewButton' : 'button'" tabindex="38" -->
                       <!-- (click)="PriceLP(this.sortedAllPrices[0].lp);postBackMethod()" -->
                       <button class="button btnPointer" *ngIf=" (this.viewOnly)" (click)="PriceLP(LPfromPrevQuote);postBackMethod()"  [disabled]="sendtoCptyBookOrder">Reprice</button>
                       <!-- Modified css to show cursor pointer || PriyaL || 12Apr2022 || Assigned by Pranav D.  -->
                       <button class="button btnPointer" *ngIf="this.viewOnly && this.sortedAllPrices?.length > 0 && this.sortedAllPrices[0].Price!==''
                           && sortedAllPrices[0].Price !== '-' && sortedAllPrices[0].Price !=='Timeout' && sortedAllPrices[0].Price > 0 && !sendtocptyflag" (click)="emailQuote(sortedAllPrices[0].rfq)">Mail best Quote</button>
                       <!-- <button class="button" style="pointer-events:all;height: 35px !important;margin: 0.5em !important;" (click)="emailQuote(sortedAllPrices[0].rfq)">Mail
                           best Quote</button> -->
                       <!-- <button class="button" *ngIf=" (this.viewOnly)"
                               (click)="lauchProduct(this.sortedAllPrices[0])" style="pointer-events: all;height: 35px !important;">Launch
                               Product</button> -->
                        <!-- //Added by Apurva K for View TS remaining code changes|| 06-Dec-2023 -->
                               <button class="button btnPointer" tabindex="44" (click)="RequestTermsheet();postBackMethod();" *ngIf="(this.viewOnly && this.sortedAllPrices?.length > 0 && !this.sortedAllPrices[0].TSFlag && !sendtocptyflag && (orderStatus == 'Active' || orderStatus == 'Pending Reprice' || orderStatus == 'Order Placed' || orderStatus == 'Pool Created'))" [disabled]="!(docSupportStatus[this.sortedAllPrices[0].lp]?.['Indicative_Termsheet'] === 'Y') || this.sortedAllPrices[0].TSDisableFlag" >
                                <div class="price-with-loader priceLoader">
                                    Request TS
                                    <div class="txtAlignCenter" *ngIf="this.sortedAllPrices[0].TSLoadFlag">
                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="ReqLoader"> 
                                    </div>
                                </div>
                                </button>

                           <!-- //Added by Apurva K for View TS remaining code changes|| 06-Dec-2023 -->
                           <button id="btnViewTS" class="btnPointer" [ngClass]="this.sortedAllPrices[0].TSFlag ? 'button viewButton' : 'button'" tabindex="45" (click)="ViewTermsheet()" *ngIf="(this.viewOnly && this.sortedAllPrices?.length && this.sortedAllPrices[0].TSFlag && !sendtocptyflag && (orderStatus == 'Active' || orderStatus == 'Pending Reprice' || orderStatus == 'Expired' || orderStatus == 'Order Placed' || orderStatus == 'Pool Created'))">
                            <div class="price-with-loader priceLoader">
                                View TS
                                <div class="txtAlignCenter" *ngIf="this.sortedAllPrices[0].ViewTSFlag">
                                    <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="ReqLoader"> 
                                </div>
                            </div></button>

                            <button class="button btnPointer" tabindex="46" (click)="RequestKIDonView()" [disabled]="priipsYN === 'No'" *ngIf="(this.viewOnly && this.sortedAllPrices?.length && !this.sortedAllPrices[0].KIDFlag && !sendtocptyflag && (orderStatus == 'Active' || orderStatus == 'Pending Reprice' || orderStatus == 'Order Placed' || orderStatus == 'Pool Created'))" [disabled]="!(docSupportStatus[this.sortedAllPrices[0].lp]?.['KID'] === 'Y') || this.sortedAllPrices[0].KIDDisableFlag">
                                <div class="price-with-loader priceLoader">
                                    Request KID
                                    <div class="txtAlignCenter" *ngIf="this.sortedAllPrices[0].KIDLoadFlag">
                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="ReqLoader"> 
                                    </div>
                                </div>
                                </button><!-- Changed by Jyoti S || 31-May-2023 -->
                            <button id="btnViewTS" class="btnPointer" [ngClass]="this.sortedAllPrices[0].KIDFlag ? 'button viewButton' : 'button'" tabindex="47" (click)="ViewKIDonView()" *ngIf="(this.viewOnly && this.sortedAllPrices?.length && this.sortedAllPrices[0].KIDFlag && !sendtocptyflag && (orderStatus == 'Active' || orderStatus == 'Pending Reprice' || orderStatus == 'Expired' || orderStatus == 'Order Placed' || orderStatus == 'Pool Created'))">
                                <div class="price-with-loader priceLoader">
                                    View KID
                                    <div class="txtAlignCenter" *ngIf="this.sortedAllPrices[0].ViewKIDFlag">
                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="ReqLoader"> 
                                    </div>
                                </div></button><!-- Changed by Jyoti S || 31-May-2023 -->

                       <button id="btnViewTS" class="button btnPointer"  tabindex="43" (click)="sendordertocounterparty()" *ngIf="this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].Price!==''
                               && sortedAllPrices[0].Price !== '-' && sortedAllPrices[0].Price !=='Timeout' && sortedAllPrices[0].Price > 0 && sendtocptyflag" [disabled]="!shwRepriceBookOrder || sendtoCptyBookOrder">Book Order
                               <!-- [disabled]="!priceClickFlag" -->
                           </button>
                   </div>
                    <div class="relPosition">

                       <!-- <div class="msgBox" style="border: 1px solid rgb(105, 105, 105); border-radius: 5px; " *ngIf="((this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].Price!=='') && !saveFlag && !quoteEmailFlg) || (orderID!==''  && this.viewOnly) "> -->

                       <!-- *ngIf="((this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].Price!=='') && !saveFlag) || (orderID!==''  && this.viewOnly)" -->
                        <div class="msgBox msgBoxborder" *ngIf="this.viewOnly && this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].Price !== ''">
                            <div class="row reply-popup reply-popupBox">
                               <div class="col-4">
                                   <span>
                                           Cpty Ref
                                       </span>
                               </div>
                               <div class="col-8">
                                   <span>{{orderID}}</span>
                               </div>
                           </div>
                           <div class="row reply-popup" style="padding: 10px 0 !important;margin: 0;" *ngIf="sendtocptyflag">
                               <div class="col-4">
                                   <span>
                                           Quote Req Id
                                       </span>
                               </div>
                               <div class="col-8">
                                   <span>{{this.sortedAllPrices[0].rfq}}</span>
                               </div>
                           </div>
                            <div class="row reply-popup reply-popupBox">
                               <div class="col-4">
                                   <span>
                                           Status
                                       </span>
                               </div>
                               <div class="col-8">
                                   <span>{{orderStatus}}</span>
                               </div>
                           </div>
                            <div class="row reply-popup reply-popupBox" *ngIf="reqSuccessMsg">
                               <div class="col-4">
                                   <span>
                                           Termsheet
                                       </span>
                               </div>
                               <!-- <div class="col-8" style="color: rgb(28, 56, 97);"> -->
                               <div class="col-8">
                                   {{reqSuccessMsg}}
                               </div>
                           </div>
                       </div>


                       <div class="msgBox" style="border: 1px solid rgb(105, 105, 105); border-radius: 5px; " *ngIf="this.viewOnly && (this.sortedAllPrices.length == 0 || (this.sortedAllPrices[0] && this.sortedAllPrices[0].Price === '')) && sendtocptyflag">
                           <div class="row reply-popup" style="padding: 10px 0 !important;margin: 0;" *ngIf="sendtocptyflag">
                               <div class="col-4">
                                   <span>
                                           Quote Req Id
                                       </span>
                               </div>
                               <div class="col-8">
                                   <span>
                                           <!-- {{viewRFQ}}**** old RFQ -->
                                           {{rfqID}}
                                       </span>
                               </div>
                           </div>
                       </div>

                       <div style="padding: 15px 0 0 15px;">
                           <!-- <span class="successMsg" *ngIf="saveFlag || quoteEmailFlg">{{successMsg}} </span> -->
                           <!-- <span class="successMsg" *ngIf="saveFlag">{{successMsg}} </span> -->
                           <span class="successMsg" *ngIf="quoteEmailFlg">{{successMsg}} </span>
                           <!-- <span class="successMsg"> "Quote Mail Initiated"</span> -->
                       </div>
                   </div>
               </div>


                    <div class="row">
                        <!-- *ngFor="let sortedPrice of this.lpArr" -->

                        <div class="lpFlex" *ngIf="!viewOnly">
                            <!-- <div class="bestlp" *ngIf="this.bestLPArray"> -->
                            <div class="card">
                                <div [ngClass]="this.bestLPArray.length !== 0 ? 'bestlpHighlight' : 'bestlp'" *ngIf="this.bestLPArray">
                                    <div class="divbestLP">
                                                <!-- <h6>{{this.bestLPArray.lp}}</h6> -->
                                                <!-- <div style="display: grid; grid-template-columns: 10% auto;"> -->
                                                <!-- <input type="checkbox" /> -->
                                                <!-- [(ngModel)]="chkDateRange" (change)="chngChkBox()" disabled -->
                                                <div class="lp-box-name">
                                        <h6 class="hdrBest">Best</h6>
                                                </div>
                                                <!-- </div> -->
                                        <div class="LPheight">
                                            <span class="rfqFont">{{this.bestLPArray.rfq}}</span>
                                                </div>
                                               
                                        <div class="LPheight timer-icon"> <!-- timer-icon class added by SandipA for HSBCECCLI-30 || 10-Aug-23 -->
                                                    <span *ngIf="this.bestLPArray.timer" class="pricer-timer">{{this.bestLPArray.timer}}
                                                        </span>
                                                </div>
                                                <!-- <div style="width: 95%; display: flex; justify-content: space-between; align-items: center;">
                                                    <h5 ></h5>
                                                    <div class="infocarddiv">
                                                    <div class="infodiv"></div>
                                                    </div>
                                                </div>
                                                <h5></h5> -->
                
                                                <!-- <br *ngIf="!this.bestLPArray.timer" /> -->
                
                                        <div class="divActiveStatus">
                                                    <div></div>
                                                    <!-- Changes done by Apurva K|| 25-Apr-2023|| FIN1EURINT-219|| inline css:;height: 3em; -->
                                            <h5 class="priceColor hdrBestPrice" [ngClass]="(this.bestLPArray.price === 'Rejected') ? 'infocard' : ''" [ngStyle]="{'height' : (this.bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || this.bestLPArray.length
                                            < 1 || bestLPArray.price==='-' || this.bestLPArray.price==='Timeout' ) ? '14px' : 'inherit' }">
                                                        {{(this.bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || this.bestLPArray.length
                                                        < 1 || bestLPArray.price==='-' || this.bestLPArray.price==='Timeout' ) ? this.bestLPArray.price : this.bestLPArray.price | number: '1.2-2'}} </h5>
                                                            <!-- <div class="infocarddiv" *ngIf="(this.bestLPArray.status === 'REJECTED' || this.bestLPArray.status === 'Rejected') && this.bestLPArray.remark !==''">
                                                                <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                                                        {{ this.bestLPArray.remark}}
                                                                    </span>
                                                            </div> -->
                                                            <div class="infocarddiv"  *ngIf="(this.bestLPArray.status === 'Active'  && this.bestLPArray.remark !=='' && this.bestLPArray.price !== '-')">
                                                                <!-- <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                                                        {{ p.remark}}
                                                                    </span> -->
                                                                    <!--Added by Varsha G || FIN1EURINT-188 || 21-Apr-2023-->
                                                            <img src="{{asseturl}}information.png" class="info imgInfo" *ngIf="this.bestLPArray.remark !==''">
                                                                    <div class="infodiv" *ngIf="this.bestLPArray.remark !==''">
                                                                <span class="infoNote spnRemark" *ngIf="this.bestLPArray.remark !==''">
                                                                                {{this.bestLPArray.remark}}
                                                                        </span>
                                                                    </div>
                                                            </div>
                                                </div>
                                        <div class="divAdjustedPrice" >
                                            <!-- <div *ngIf="this.bestLPArray.isSpreadEntityYN === 'Y'"> -->
                                                <span class="txtAdjust" *ngIf="this.bestLPArray.isSpreadEntityYN === 'Y'">Adjusted</span>
                                                <h4 class="priceColor hdrPriceFont" *ngIf="this.bestLPArray.isSpreadEntityYN === 'Y'">
                                                    {{(this.bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || this.bestLPArray.length
                                                    < 1 || bestLPArray.price==='-' || this.bestLPArray.price==='Timeout' ) ? this.bestLPArray.modifiedValue : this.bestLPArray.modifiedValue | number:'1.2-2'}}
                                                   </h4>
                                                </div>
                                                <!-- <h5>
                                                    <div style="text-align: center;">
                                                        <div class="row"></div>
                                                    </div>
                                                </h5> -->
                                                        <!-- <br
                                                            *ngIf="bestLPArray.price == '' || bestLPArray.price ==='Timeout' || bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || bestLPArray.price < 0" /> -->
                
                                                <h5 class="priceColor hdrPriceFont"></h5>
                                                <h5 class="priceColor hdrPriceFont"></h5>
                                                <h5 class="priceColor hdrPriceFont"></h5>
                                                <h6 class="hdrBestLpTsMsg">{{this.bestLPArray.TSMsg}}</h6>
                                                <h6 class="hdrBestLPMsg">{{this.bestLPArray.Msg}}</h6><!-- Changed by AdilP @09-05-2023 || FIN1EURINT-291  -->
                                                <h6 class="hdrTsMsg"></h6> 
                                                        <!-- <div style="height: 20px;">
                                                            <a *ngIf="bestLPArray && bestLPArray.price && bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price !== 'Rejected' && this.bestLPArray.price !== 'Unsupported' && this.bestLPArray.price !== 'Expired'  && bestLPArray.price > 0"
                                                                class="quoteMailLabel" (click)="emailQuote(bestLPArray.rfq)">Mail</a>
                                                        </div> -->
                
                                                        <!-- <br
                                                            *ngIf="bestLPArray && bestLPArray.price && bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price !== 'Rejected' && bestLPArray.price !== 'Unsupported' && bestLPArray.price !== 'Expired' && bestLPArray.price !== 'Cancelled' && bestLPArray.price > 0">
                                                        <br
                                                            *ngIf="bestLPArray === undefined || bestLPArray.length <=0 || bestLPArray.price == '' || bestLPArray.price ==='Timeout' || bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || bestLPArray.price < 0" /> -->
                                                        <!-- <div style="height: 20px;">     -->
            
                                                        <!-- Added by Apurva K|| 25-Apr-2023||FIN1EURINT-219 -->
                                                <button class="button bestLpBtnMail" [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq))" 
                                                (click)="emailQuote(bestLPArray.rfq)">Mail</button>
                                                        <!-- </div> -->
                                                            <!-- Changed by Amogh K | 19apr2022 | request TS config check | assigned by pranav D -->
                                                        
                                                <button class="button btnMinWidth" [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq) || bestLPArray.timer === 0 || bestLPArray.TSNotSupported || bestLPArray.TSFlag|| bestLPArray.TSDisableFlag)"
                                                    *ngIf="(EQ_Show_Termsheet_Button === 'YES' || EQ_Show_Termsheet_Button === 'Y' || EQ_Show_Termsheet_Button === 'Yes')" (click)="RequestTS(bestLPArray.idx)" >Request
                                                                TS</button>
                                                        <button class="button btnViewTSandKID" *ngIf="bestLPArray.TSFlag" (click)="ViewTS(bestLPArray.idx)"> 
                                                            <div class="price-with-loader divMarginLeft">
                                                                    View TS
                                                                <div class="txtAlignCenter" *ngIf="bestLPArray.ViewTSFlag">
                                                                    <div class="row priceall-loader loaderbox">
                                                                                <div class="col-12">
                                                                            <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </button><!-- Changed by Jyoti S || 25-May-2023 -->
                                                        <!-- Changed by Amogh K | 21apr2022 | request KID config check | assigned by pranav D -->
                                                <button class="button btnMinWidth" [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq) || priipsYN === 'No' || bestLPArray.KidNotSupported || bestLPArray.KidDisableFlag)"
                                                    *ngIf="(EQ_Show_KID_Button === 'YES' || EQ_Show_KID_Button === 'Y' || EQ_Show_KID_Button === 'Yes')" (click)="RequestKID(bestLPArray.idx)" >Request
                                                                KID</button>
                                                <button class="button btnViewTSandKID" *ngIf="bestLPArray.KIDFlag" (click)="ViewKID(bestLPArray.idx)">
                                                    <div class="price-with-loader divMarginLeft">
                                                                        View KID
                                                            <div class="txtAlignCenter" *ngIf="bestLPArray.ViewKIDFlag">
                                                                <div class="row priceall-loader loaderbox">
                                                                                    <div class="col-12">
                                                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                </button><!-- Changes done by Jyoti S || 25-May-2023 -->
                                                        <!-- <button class="bookBtn"
                                                    [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq))"
                                                    style="min-width: 8em;"
                                                    [routerLink]="['/PreviousQuotesNew',{RFQ_ID:bestLPArray.rfq,Template_Code:'EQC_Europe',RedirectedFrom:'Pricers',Mode:'Launch Product'}]"
                                                    routerLinkActive="active-link">Launch Product</button> -->
                                                        <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                                                <button class="button btnMinWidth" *ngIf="isDealer && (EQ_Show_Launch_Button === 'YES' || EQ_Show_Launch_Button === 'Y' || EQ_Show_Launch_Button === 'Yes')" [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq))"
                                                     (click)="lauchProduct(bestLPArray)">Launch
                                                                Product</button>
                                                        <!-- <button class="bookBtn" style="min-width: 8em;" *ngIf="!viewOnly"
                                                            (click)="PriceLP(bestLPArray.lp)"
                                                            [disabled]="!bestLPArray.priceChkFlg">Price
                                                        </button> -->
                                                        <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                                                <button class="button btnMinWidth" [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' 
                                        || bestLPArray.timer === '' || bestLPArray.timer === 0 || (viewOnly && viewRFQ !== bestLPArray.rfq) || !bookOrderFlag)"  (click)="showOrderDetails(bestLPArray.lp,bestLPArray.rfq,bestLPArray);postBackMethod();"
                                                            *ngIf="!viewOnly && (EQ_Show_Order_Button === 'YES' || EQ_Show_Order_Button === 'Y' || EQ_Show_Order_Button === 'Yes')">Book
                                                                Order</button>
                
                
                
                
                                            </div>
                                            <div>
                                                <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 start -->
                                                <!-- <br /> -->
                                        <span *ngIf="bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price > 0" class="minMaxLimitFont">
                                                        {{this.EcCommon.nFormatter(bestLPArray.minLimit)}}</span>&nbsp;
                                                <span *ngIf="bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price > 0">/</span>&nbsp;
                                        <span *ngIf="bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price > 0" class="minMaxLimitFont">
                                                        {{this.EcCommon.nFormatter(bestLPArray.maxLimit)}}</span>
                                                <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 end -->
                
                                            </div>
                                        </div>
                            </div>
                                
                            <!-- <div [ngClass]="this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].lp === p.lp ? 'selectedlp' : 'lpname'" -->
                            <div class="cards-section">
                                <div [ngClass]="this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].lp === p.lp ? 'selectedlp' : 'lpname'" *ngFor="let p of this.priceProvidersArr, let i = index;">
                                    <!-- <div style="display: flex; flex-direction: column; justify-content: flex-start;align-items: center;align-self: center; gap: 5px;" [ngClass]="{ 'lp-loading' : p.loadFlag == true}"> -->
                                <div class="divbestLP">
                                        <div class="lp-box-name">
                                        <input type="checkbox" [checked]="p.priceChkFlg" (change)="chngPriceChkBox(i)" class="lpNameWidth" />
                                            <h6>{{p.lp}}</h6>
                                        </div>
                                    <div class="LPheight">
                                        <span class="rfqFont">{{p.rfq}}</span>
                                        </div>
                                    <div class="timer-icon LPheight">
                                            <app-svg-icons *ngIf="p.price !== '-'" [icon]="'clock-icon'" [width]="'10'" [height]="'10'">
                                            </app-svg-icons>
                                        <span class="spntimerHeight" [ngClass]="p.timer <= 10 && p.timer > 0 ? 'timerTimeout':'timer-text'" >{{(p.timer
                                                ===
                                                this.defaultTimeout) || (p.price === '-' || p.price === '' || p.price === 0 || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout') ? '' : p.timer}}</span>
                                        </div>
                                        <!-- ngclass added to timer for blinking effect || Jyoti S || 25-Apr-2023 -->
        
                                        <!-- <br *ngIf="p.timer===this.defaultTimeout" /> -->
                                        <!-- <br
                                                *ngIf="p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled'" /> -->
                                    <div class="divRejectedPrice" *ngIf="p.price === 'Rejected'">
                                        <h5 class="priceColor hdrRejectedPrice" *ngIf="p.price === 'Rejected'">
                                                {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>
                                            <div class="infocarddiv" *ngIf="(p.status === 'REJECTED' || p.status === 'Rejected') && (p.price === 'Rejected') && p.remark !==''">
                                                <!-- <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                                        {{ p.remark}}
                                                    </span> -->
                                                    <!--Added by Varsha G || FIN1EURINT-188 || 21-Apr-2023-->
                                                <img src="{{asseturl}}information.png" class="info ReqLoader" *ngIf="p.remark !==''">
                                                    <div class="infodiv" *ngIf="p.remark !==''">
                                                    <span class="infoNote spnRemarkInfo" *ngIf="p.remark !==''">
                                                                {{p.remark}}
                                                        </span>
                                                    </div>
                                            </div>
                                        </div>
                                    <h5 class="priceColor hdrPriceFont" *ngIf="p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout'">
                                            {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>
                                        <!-- <h5 class="priceColor" style="font-size: 20px !important" *ngIf="p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price !== 'Timeout'"> -->
                                        <div class="divActiveStatus">
                                            <div></div>
                                            <h5 class="priceColor hdrActiveStatus" *ngIf="p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price !== 'Timeout' && p.price !== '-'">
                                                {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>
                                                <div class="infocarddiv" *ngIf="(p.status === 'Active'  && p.remark !=='' && p.price !== '-')">
                                                    <!-- <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                                            {{ p.remark}}
                                                        </span> -->
                                                        <!--Added by Varsha G || FIN1EURINT-188 || 21-Apr-2023-->
                                                        <img src="{{asseturl}}information.png" class="info imgInfo" *ngIf="p.remark !==''">
                                                        <div class="infodiv" *ngIf="p.remark !==''">
                                                            <span class="infoNote spnRemark" *ngIf="p.remark !==''">
                                                                    {{p.remark}}
                                                            </span>
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="divAdjustedPrice">
                                                <span class="txtAdjust" *ngIf="p.isSpreadEntityYN === 'Y'">Adjusted</span>
                                                <h4 class="priceColor hdrPriceFont" *ngIf="p.isSpreadEntityYN === 'Y'">
                                                {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.modifiedValue : p.modifiedValue | number:'1.2-2'}}
                                           </h4>
                                        </div>
                                    <h5 class="priceColor hdrPriceFont" *ngIf="!p.loadFlag && p.price === '-'">
                                            {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>    
                                    <div class="txtAlignCenter" *ngIf="p.loadFlag">
                                        <div class="row loaderbox">
                                                <div class="col-12">
                                                <img src="{{asseturl}}loading_dots.gif" alt="" width="50px" height="54px" class="imgMargin">
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <br> -->
                                        <!-- <br *ngIf="p.Msg===''">
                        <br *ngIf="p.TSMsg===''"> -->
                                    <h6 class="hdrTsMsg">{{p.TSMsg}}</h6>
                                    <h6 class="hdrMsg">{{p.Msg}}</h6>
                                        <!-- <h6  style="height: 2em;" *ngIf="p.TSMsg!==''">{{p.TSMsg}}</h6>
                        <h6  style="height: 2em;" *ngIf="p.Msg!==''">{{p.Msg}}</h6> -->
                                        <!-- <a *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price > 0"
                            class="quoteMailLabel" (click)="emailQuoteLP(p.rfq)">Mail</a><br> -->
    
                                    <div class="divMail">
                                            <a *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price > 0 && p.timer !== 0" class="quoteMailLabel" (click)="emailQuote(p.rfq)">Mail</a>
                                        <a *ngIf="p.price ==='Timeout' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled'" class="quoteMailLabel mailLabelHeight"></a>
                                        </div>
                                        <!-- <br
                                                *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price > 0">
                                            <br
                                                *ngIf="p.price === '-' || p.price === '' || p.price ==='Timeout' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled'|| p.price < 0" /> -->
                                        <!-- Changed by Amogh K | 19apr2022 | request TS config check | assigned by pranav D -->
                                        
                                         <!--Start - Changes done by Apurva K|| 26-Apr-2023||FIN1EURINT-246 -->
                                    <button class="button btnMinWidth" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq) || (p.timer == 0))|| p.TSFlag|| p.TSDisableFlag || p.TSNotSupported"
                                        *ngIf="(EQ_Show_Termsheet_Button === 'YES' || EQ_Show_Termsheet_Button === 'Y' || EQ_Show_Termsheet_Button === 'Yes')"
                                        (click)="RequestTS(i);postBackMethod();" >
                                                <div class="price-with-loader">
                                                   Request
                                                TS
                                             <div class="txtAlignCenter" *ngIf="p.TSLoadFlag">
                                                 <div class="row priceall-loader loaderbox">
                                                            <div class="col-12">
                                                         <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <!--End - Changes done by Apurva K|| 26-Apr-2023||FIN1EURINT-246 -->
    
                                        <!--Start - Changes done by Apurva K|| 09-May-2023||As suggested by Nitish K  -->
                                    <button class="button btnViewTSandKID" *ngIf="p.TSFlag" (click)="ViewTS(i)"> 
                                        <div class="price-with-loader divMarginLeft">
                                            View TS
                                            <div class="txtAlignCenter" *ngIf="p.ViewTSFlag">
                                                <div class="row priceall-loader loaderbox">
                                                        <div class="col-12">
                                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div></button><!-- Changed by Jyoti S || 25-May-2023 -->
                                        <!--End - Changes done by Apurva K|| 09-May-2023||As suggested by Nitish K  -->
    
                                        <!-- Changed by Amogh K | 21apr2022 | request KID config check | assigned by pranav D -->
    
                                         <!--Start - Changes done by Apurva K|| 09-May-2023||As suggested by Nitish K  -->
                                    <button class="button btnMinWidth" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq) || priipsYN === 'No' || p.timer === 0)|| p.KIDFlag|| p.KidDisableFlag || p.KidNotSupported" 
                                        *ngIf="(EQ_Show_KID_Button === 'YES' || EQ_Show_KID_Button === 'Y' || EQ_Show_KID_Button === 'Yes')"
                                        (click)="RequestKID(i)" >
                                            <div class="price-with-loader">
                                                Request
                                                    KID
                                            <div class="txtAlignCenter" *ngIf="p.KIDLoadFlag">
                                                <div class="row priceall-loader loaderbox">
                                                            <div class="col-12">
                                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                            </div>
                                                        </div>
                                                    </div>
                                            </div>
                                        </button>
                                         <!--End - Changes done by Apurva K|| 09-May-2023||As suggested by Nitish K  -->
                                    <button class="button btnViewTSandKID" *ngIf="p.KIDFlag" (click)="ViewKID(i)" [disabled]="p.ViewKIDFlag">
                                        <div class="price-with-loader divMarginLeft">
                                                View KID
                                                <div class="txtAlignCenter" *ngIf="p.ViewKIDFlag">
                                                    <div class="row priceall-loader loaderbox">
                                                            <div class="col-12">
                                                            <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                        </button><!-- Changes done by Jyoti S || 25-May-2023 -->
                                        <!-- <button class="button"
                                        [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq))"
                                        style="min-width: 8em;"
                                        [routerLink]="['/PreviousQuotesNew',{RFQ_ID:p.rfq,Template_Code:'EQC_Europe',RedirectedFrom:'Pricers',Mode:'Launch Product'}]"
                                        routerLinkActive="active-link">Launch Product</button> -->
                                        <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                                    <button class="button btnMinWidth" *ngIf="isDealer && (EQ_Show_Launch_Button === 'YES' || EQ_Show_Launch_Button === 'Y' || EQ_Show_Launch_Button === 'Yes')" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq) || (p.timer == 0))"
                                         (click)="lauchProduct(p)">Launch Product</button>
                                    <button class="button btnMinWidth"  *ngIf="!viewOnly" (click)="PriceLP(p.lp)" [disabled]="!p.priceChkFlg || p.loadFlag">
                                            <!-- <div class="price-with-loader"> -->
                                                {{ "Price" | translate }}
                                                <!-- <div style="text-align: center;" *ngIf="p.loadFlag">
                                                    <div class="row" style="padding: 0 auto !important;margin: 0;">
                                                        <div class="col-12">
                                                            <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" style="margin-top: -40px; width: 15px; height: 15px;">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div> -->
                                        </button>
                                        <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                                    <button class="button btnMinWidth" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq) || !bookOrderFlag) || (p.timer == 0)" 
                                        (click)="showOrderDetails(p.lp,p.rfq,p);postBackMethod();" *ngIf="!viewOnly && (EQ_Show_Order_Button === 'YES' || EQ_Show_Order_Button === 'Y' || EQ_Show_Order_Button === 'Yes')">Book
                                                Order</button>
        
        
                                    </div>
                                    <div>
                                        <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 start -->
                                        <!-- <br /> -->
                                    <span *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price > 0" class="minMaxLimitFont">
                                                {{this.EcCommon.nFormatter(p.minLimit)}}</span>&nbsp;
                                        <span *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price > 0">/</span>&nbsp;
                                    <span *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price > 0" class="minMaxLimitFont">
                                                {{this.EcCommon.nFormatter(p.maxLimit)}}</span>
                                        <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 end -->
        
                                    </div>
        
        
        
                                </div>
                            </div>
                           
                        </div>
                        <!-- Changed by Jyoti S || 25-Apr-2023 -->


                    </div>

                    <div *ngIf="showOrderDetailsFlag" style="display: none !important;">
                        <div class="row" style="padding-top:1em !important;">
                            <label
                                style="background-color:rgba(243, 241, 241, 0.527);  font-size: 25px !important; width:100%;color: var(--header);">Order
                                Details</label>
                        </div>


                        <div class="row" style="padding-top: 0 !important;">
                            <div class="col-lg-6 col-md-12 col-sm-12" style="width: 45vw !important;">
                                <div class="row">
                                    <div class="relPosition">
                                        <label class="disabledlbl">Issuer</label>
                                    </div>
                                    <div class="relPosition">
                                        <input type="text" class=" floatMiddle" disabled="disabled"
                                            value="{{ Issuer }}" />
                                    </div>
                                    <div class="relPosition">
                                        <label>Booking Branch</label>
                                    </div>
                                    <div class="relPosition">
                                        <select [(ngModel)]="selectedBookingBranch">
                                            <!-- <option value="FinIQ Europe">FinIQ Europe</option>
                    <option value="FinIQ Asia">FinIQ Asia</option> -->
                                            <option *ngFor="let b of BookingCenter" value="{{b.BookingCenterCode}}">
                                                {{b.BookingCenterName}}
                                            </option>
                                        </select>
                                    </div>
                                </div>

                                <div class="row">

                                    <div class="relPosition">
                                        <label>Order Type</label>
                                    </div>
                                    <div class="relPosition">
                                        <select [(ngModel)]="OrderType">
                                            <option value="Limit">Limit</option>
                                            <option value="Market">Market</option>
                                            <!-- Change sby Apurva K|| 30-MAY-2023|| Asked by Nitish K -->
                                            <option value="MOC">MOC</option>
                                            <option value="VWAP">VWAP</option>
                                        </select>
                                    </div>
                                    <div class="relPosition">
                                        <label>Limit Level</label>
                                    </div>
                                    <div class="relPosition">
                                        <select *ngIf="ShareBasket && OrderType === 'Limit'" style="max-width: 6em;">
                                            <option *ngFor="let sharearr of ShareBasket"
                                                [selected]="ShareBasket[ShareBasket.length-1].Name"
                                                [value]="sharearr.Code">
                                                {{ sharearr.Code }}</option>
                                        </select>
                                        <input type="text" [ngClass]="OrderType === 'Limit' ? 'limitAmtWidth' : '' "
                                            [(ngModel)]="LimitAmount" [disabled]="OrderType !== 'Limit'" value="0"
                                            maxlength="10" (keypress)="EcCommon.InputNumber($event)" />
                                        <!-- (blur)="this.onBlurLimitAmt($event);" -->
                                    </div>
                                </div>
                                <div class="row">


                                </div>


                            </div>

                            <!-- right col -->
                            <div class="col-lg-6 col-md-12 col-sm-12" style="width: 45vw !important;">


                                <div class="row">
                                    <div class="relPosition">
                                        <label>Order Notional ({{ (ddlNoteCcy) }})</label>
                                    </div>
                                    <div class="relPosition">
                                        <input type="text" class=" floatMiddle" value="{{totalNotional}}"
                                            [(ngModel)]="totalNotional" />
                                    </div>

                                </div>


                                <div class="row">
                                    <div class="relPosition">
                                        <label class="disabledlbl">EQC Ref</label>
                                    </div>
                                    <div class="relPosition">
                                        <label class="disabledlbl"> {{ eqcRef }}</label>
                                    </div>


                                </div>


                                <div class="row">


                                </div>





                            </div>
                        </div>
                        <!-- 
                        <div class="row">
                        <table style="width: 91%;">
                            <tr>
                            <th><input type="checkbox" id="checkboxAll" checked (click)="chkAll($event);" /></th>
                            <th>RM Name</th>
                            <th>Notional</th>
                            </tr>
                            <tr *ngFor="let data of tblAllocation; let rowIndex = index">
                            <td class="tdCenter">
                                <input id="checkbox{{rowIndex}}" type="checkbox" checked (click)="chkAllocation($event);" />
                            </td>
                            <td class="tdCenter">
                                <select id="Select{{rowIndex}}"  >
                                <option *ngFor="let arr of rmList" [value]="arr.Rel_Manager_Name">
                                {{ arr.Rel_Manager_Name }}</option>
                            </select> 
                            </td>
                            <td class="tdCenter">
                                <input type="text" id="Notional{{rowIndex}}" maxlength="14"
                                (focus)="EcCommon.UnformatNumber($event); previousNotionals($event);"
                                (blur)="checkValidAllocatedNotional($event);" (keypress)="EcCommon.NotionalValidateKeys($event)"
                                (keyup)="EcCommon.chkNotionalFormat_keyUp($event)" placeholder="Enter Notional" value="0.00" />
                            </td>
                            </tr>

                        </table>

                        </div>
                        <div class="row">
                        <div class="col-2">
                            <label>Total Notional</label>
                        </div>
                        <div class="col-4">
                            <label class="valText">{{ totalNotional }}</label>
                        </div>
                        <div class="col-2">
                            <label>Min Limit : </label>
                        </div>
                        <div class="col-1">
                            <label class="valText">{{minNotional}}</label>

                        </div>
                        <div class="col-3">
                            <button class="btnPrice" style="margin-top:-0.5em !important;" (click)="btnAllocationClick()">Add
                            Allocation</button>
                        </div>

                        </div>

                        <div class="row">
                        <div class="col-2">
                            <label>Allocated Notional</label>
                        </div>
                        <div class="col-4">
                            <label class="valText">{{ allocatedNotional}}</label>
                        </div>
                        <div class="col-2">
                            <label>Max Limit : </label>
                        </div>
                        <div class="col-4">
                            <label class="valText">{{maxNotional}}</label>
                        </div>
                        </div>

                        <div class="row">
                        <div class="col-2">
                            <label>Remaining Notional</label>
                        </div>
                        <div class="col-4">
                            <label class="valText">{{ remainingNotional}}</label>
                        </div>

                        </div> -->

                        <div class="row" style="padding-top:1em !important;">
                            <div id="blotterDiv" class="col-12">
                            </div>
                        </div>
                        <div class="row" style="padding-top:2em !important;">
                            <div class="col-xl-3 col-lg-4 col-md-8 col-sm-6 col-xs-12">

                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-8 col-sm-6 col-xs-12" style="text-align: center;">
                                <button class="btnPrice" (click)="bookOrder()">Confirm</button>


                                <button class="btnPrice" (click)="hideOrderDetails()">Cancel</button>
                            </div>

                            <div class="col-xl-4 col-lg-4 col-md-8 col-sm-12 col-xs-12">
                                <span class="errorMsg">{{ErrorMsg1}}</span>
                                <span class="successMsg">{{ordersuccessMsg}}</span>
                            </div>
                        </div>

                    </div>

                    <div *ngIf="poolDetailsVisibleFlag">
                    <div class="row divPoolDetails">
                        <label class="lblPoolDetails">Pool
                                Details</label>
                        </div>


                    <div class="row rowpaddingTop">
                        <div class="col-lg-6 col-md-12 col-sm-12 divRowWidth">
                                <div class="row">
                                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                        <label>Pool Activation Date</label>
                                    </div>
                                    <div class="col-xl-9 col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                    <input type="text" class="divActivePoolWidth" [(ngModel)]="poolActivateDate" id="txtpoolActivateDate" value="{{poolActivateDate}}">

                                    </div>

                                </div>

                                <div class="row">

                                    <div style="position:relative;">
                                        <label>Min Notional</label>
                                    </div>
                                    <div style="position:relative;">
                                        <!-- <label>{{minPoolNotional}}</label> -->
                                        <input type="text" [(ngModel)]="minPoolNotional" id="txtminPoolNotional"
                                            value="{{minPoolNotional}}">
                                    </div>
                                    <div style="position:relative;">
                                        <label>Max Notional</label>
                                    </div>
                                    <div style="position:relative;">

                                        <input type="text" [(ngModel)]="maxPoolNotional" id="txtmaxPoolNotional"
                                            value="{{maxPoolNotional}}">

                                    </div>
                                </div>
                                <div class="row">


                                </div>


                            </div>

                            <!-- right col -->
                        <div class="col-lg-6 col-md-12 col-sm-12 divRowWidth">


                                <div class="row">
                                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                                        <label>Pool Expiry Date</label>
                                    </div>
                                    <div class="col-xl-9 col-lg-9 col-md-6 col-sm-12 col-xs-12">
                                    <input type="text" class="divActivePoolWidth" [(ngModel)]="poolExpiryDate" id="txtpoolExpiryDate" value="{{poolExpiryDate}}">
                                    </div>

                                </div>


                                <div class="row">
                                    <div style="position:relative;">
                                        <label>Min Order Size</label>
                                    </div>
                                    <div style="position:relative;">
                                        <!-- <label> {{ minOrderSize }}</label> -->
                                        <input type="text" [(ngModel)]="minOrderSize" id="minOrderSize"
                                            value="{{minOrderSize}}">

                                    </div>

                                    <div style="position:relative;">
                                        <label>Denomination</label>
                                    </div>
                                    <div style="position:relative;">
                                        <!-- <label> {{ Denomination }}</label> -->
                                        <input type="text" [(ngModel)]="Denomination" id="Denomination"
                                            value="{{Denomination}}">

                                    </div>
                                </div>

                                <div class="row">
                                </div>

                            </div>
                        </div>





                    <div class="row divPoolDetails">
                            <div id="blotterDiv" class="col-12">
                            </div>
                        </div>
                    <div class="row dvPoolBtns">
                            <div class="col-xl-3 col-lg-4 col-md-8 col-sm-6 col-xs-12">

                            </div>
                        <div class="col-xl-4 col-lg-4 col-md-8 col-sm-6 col-xs-12 txtAlignCenter">
                                <button class="btnPrice" (click)="createPool()">Confirm</button>


                                <button class="btnPrice" (click)="hidePoolDetails()">Cancel</button>
                            </div>

                            <div class="col-xl-4 col-lg-4 col-md-8 col-sm-12 col-xs-12">
                                <span class="errorMsg">{{poolErrorMsg}}</span>
                                <span class="successMsg">{{poolSuccessMsg}}</span>
                            </div>
                        </div>

                    </div>


                    <br />
                    <br />
                    <br />
            </div>
            <!-- remove br tags || Apurva C  -->
            <!-- <br><br> -->
            <div *ngIf="activeTab=='PQ'">
                <app-previous-quotes-new [accord]="4" [activeTab]="activeTab"></app-previous-quotes-new>
            </div>
            <div *ngIf="activeTab=='Summary'">
                You are in Summary
            </div>
            </div>
        </div>
    </div>
</div>
<div id="schedule" *ngIf="showSchedulePopupFlag">
    <div class="schedulePopup">
        <div>
            <span class="spnDateTime">Pick date & time</span>
            <div class="btnClose dvDateTimeClose" (click)="hideSchedulePopup()">
                X
            </div>
        </div>
        <div class="scheduleDiv">
            <div class="calendar-wrapper">
                <mat-calendar #calendar (monthSelected)="monthSelected($event)" [(selected)]="selectedDate"
                    (selectedChange)="dateChanged()" [minDate]="todayDate"></mat-calendar>
            </div>
            <div>
                <input type="text" class="scheduleInput" [(ngModel)]="inputDate"
                    value="{{selectedDate | date:'dd-MMM-yyyy'}}" disabled><br />
                <!-- <input type="text" class="scheduleInput" [(ngModel)]="inputTime"  value="{{selectedDate | date:'hh:mm a'}}"> -->
                <input type="time" class="scheduleInput inputDate" [(ngModel)]="inputTime" value="{{inputTime}}">

            </div>
        </div>
        <div class="scheduleBtnGrid">
            <div>
                <span class="spnErrMsgTop" *ngIf="ErrorMsgTop!==''">{{ErrorMsgTop}}</span>
                <span class="successMsg" *ngIf="scheduleMsg!==''">{{scheduleMsg}}</span>
            </div>
            <div>
                <button class="btnPrice" (click)="hideSchedulePopup()">Cancel</button>
                <button class="btnPrice" (click)="scheduleSend()">Schedule Send</button>

            </div>
        </div>
    </div>

</div>

<div id="saveShare" *ngIf="showsaveSharePopupFlag">
    <div class="savesharePopup">
        <div class="divSaveShare">
            <span class="spnShare">Share with Colleagues and Groups</span>
        </div>
        <div class="divSaveShare">
            <!-- <input type="text" placeholder="Please enter user ID or client group" class="longText saveShareInput">  -->
            <input type="text" placeholder="Please enter user ID or client group" value="{{userName}}"
                class="saveShareInput" style="text-align: left;max-width: 100% !important;" [(ngModel)]="userName"
                maxlength="10" (keypress)="ChangeIndex_User($event); showSuggestions_User = true"
                (keydown.enter)="selectUser($event); userflag=false;" (keydown.backspace)="backKeyPress_User($event)"
                (keydown.delete)="backKeyPress_User($event)" (keydown.tab)="userflag=false;"
                (keydown.ArrowUp)="selectedBIndex_User = EcCommon.moveUpSelection1($event, selectedBIndex_User)"
                (keydown.ArrowDown)="selectedBIndex_User = EcCommon.moveDownSelection1($event, selectedBIndex_User)"
                tabindex="44" Id="txtUserGroup" />
            <div class="SelectorBox selectorBoxWidth" *ngIf="userflag && showSuggestions_User" 
                (clickOutside)="userflag=false;">
                <a *ngFor="let user of (users | searchUserGroup: userName); let i = index"
                    (keypress)="ChangeIndex_User($event)" (keydown.enter)="selectUser($event)">
                    <div *ngIf="user" [attr.data-user]="user.Code" (click)="showUser($event,user)"
                        [ngClass]="{HoverSuggestion: i === selectedBIndex_User}">
                        <span>{{ user.Name }}</span>
                    </div>
                </a>
            </div>
        </div>

        <div class="userListDiv" *ngFor="let u of userBasket;let i = index">
            <div class="dvUserList" (click)="deleteUserfromList(i)">
                <!-- <img src="{{asseturl}}delete.png" width="30px" style="filter: invert(50%);cursor: pointer;"
                    title="Delete"> -->
                    <app-svg-icons [icon]="'delete'" [width]="'20'" [height]="'20'">
                    </app-svg-icons>
            </div>
            <div class="dvUserName">
                <span class="spnUserName">{{u.Name}}</span>
            </div>
            <div>
                <select id="list{{i}}" class="ddlAccess" 
                    (change)="changeAccessofUserGroup($event,i)" [attr.selected]="u.Access">
                    <!-- <option *ngIf="(u.Type === 'USER' || u.Type === 'User') && !isPortfolioShared" [ngValue]='u.Access'
          [attr.selected]="u.Access === 'EDIT' ? true : null">EDIT</option> -->
                    <option [ngValue]='u.Access' [attr.selected]="u.Access === 'VIEW' ? true : null">VIEW</option>
                </select>
            </div>
        </div>

        <!-- <div style="text-align:center;">
            <span style="margin-left: 10px;font-size: 12px;font-weight: 500">Owner:</span>
            <span style="margin-left: 10px;font-size: 12px;font-weight: 500;color: var(--links);">{{currentowner}}</span>
        <div class="txtAlignCenter">
            <span class="spnOwner">Owner:</span>
            <span class="spnCurrOwner">{{currentowner}}</span>
        </div>
        <div class="popupBtns">
            <button class="button" (click)="hidesaveSharePopup()">Cancel</button>
            <button class="button" (click)="sharePortfolio()">Share</button>
        </div>-->
    </div>

</div>
<!--Added by Varsha G || FIN1EURINT-277 || 04-May-2023 -->
<div id="updateMessage" *ngIf="updateMessagePopupFlag">
    <div class="updateMessagePopup">
        <div class="renameVariant">
            <span>You are about to rename the existing variant name. Do you still want to Continue?</span>
        </div>
        <div class="popupBtns">
            <button class="button" (click)="updateMessagePopupFlag = false">Cancel</button>
            <button class="button" (click)="updatePortfolio();updateMessagePopupFlag = false">Continue</button>
        </div>
    </div>
</div>
<div class="overlay" *ngIf="showOrderDetailsFlag  || PrevQuoteShowOrderPopUp">
    <div class="order-capture-modal">
        <div class="modalheader modal-header">
            <label>You are placing an order for Participation</label>
            <div (click)="hideOrderDetails()" class="modal-close"></div>
        </div>
        <div style="max-height: calc(100vh - 180px); overflow-y: auto;">
            <div class="input-grid">
                <label>Issuer</label>
                <input disabled type="text" type="text" style="text-align: left;" [(ngModel)]="Issuer"
                    value="{{ Issuer }}" />

                <label>Underlying</label>
                <input disabled type="text" class="longText" style="text-align: left;" Id="txtShare"
                    [(ngModel)]="txtShare" />

                <label>Booking Branch</label>
            <select [(ngModel)]="selectedBookingBranch" class="ip-border">
                    <!-- <option value="FinIQ Europe">FinIQ Europe</option>
            <option value="FinIQ Asia">FinIQ Asia</option> -->
                    <option *ngFor="let b of BookingCenter" value="{{b.BookingCenterCode}}">
                        {{b.BookingCenterName}}
                    </option>
                    <!-- <option value="London">London</option>
                    <option value="Madrid">Madrid</option> -->
                </select>

            <label>Order Notional ({{txtddlNoteCcy}})</label>
            <!-- <input type="text" id="txtnotional" [(ngModel)]="txtnotional" type="text"/> -->
            <input type="text" id="txtnotional" [(ngModel)]="txtnotional" type="text" (focus)="EcCommon.UnformatNumber($event);" (keypress)="EcCommon.NotionalValidateKeys($event)" (keyup)="EcCommon.chkNotionalFormat_keyUp($event) === false ? txtnotional = '': txtnotional=txtnotional"
                (change)="checkValidBookOrderNotional($event, 'txtnotional');" /> <!-- Func call setnotional removed and added in checkValidBookOrderNotional by Jyoti S || 14-Apr-2023 -->
            <!-- Modified keyup event to handle invalid notional || Added by Priya L || 01Apr2022 || assigned by Pranav D. -->
            <label>Reoffer (%)</label>
            <input disabled type="text" id="txtIBPrice" [(ngModel)]="txtIBPrice" type="text" />

                <label>Client Price (%)</label>
                <input disabled type="text" id="txtClientPrice" [(ngModel)]="txtClientPrice" type="text" />

                <label>Strike (%)</label>
                <input disabled type="text" id="txtStrike" [(ngModel)]="txtStrike" type="text" />

                <label>Tenor</label>
                <input disabled type="text" id="txtTenor" [(ngModel)]="txtTenor" type="text" />

                <label>Upfront (%)</label>
                <input disabled type="text" id="txtUpfront" [(ngModel)]="txtUpfront" type="text" />

                <!-- <label>Client Yield (%)p.a.</label>
          <input disabled type="text" id="txtClietYield"  [(ngModel)]="txtClietYield" type="text"/> -->

                <label>Order Type</label>
            <select [(ngModel)]="txtOrderType" (change)="changeOrderType()" class="ip-border">
                    <option value="Limit">Limit</option>
                    <option value="Market">Market</option>
                <option value="MOC">MOC</option>
                <option value="VWAP">VWAP</option>
                </select>

                <label>Limit Level</label>
                <!-- <input type="text" id="txtlimitLevel"  [(ngModel)]="txtlimitLevel" type="text" style="grid-column: 2 / span 3;"  [disabled]= "txtOrderType !== 'Limit'" /> -->
            <input type="text" id="txtlimitLevel" [(ngModel)]="txtlimitLevel" type="text" [disabled]="txtOrderType !== 'Limit'" (focus)="EcCommon.UnformatNumber($event);" (keypress)="EcCommon.NotionalValidateKeys($event)" (keyup)="EcCommon.chkNotionalFormat_keyUp($event) === false ? txtlimitLevel = '': txtlimitLevel=txtlimitLevel"
                    (change)="checkValidBookOrderNotional($event, 'txtlimitLevel')" />
 <!-- Modified keyup event to handle invalid notional || Added by Priya L || 01Apr2022 || assigned by Pranav D. -->
            <!-- (focus)="commonfunctions.UnformatNumber($event); previousNotionals($event);"
  (change)="addNotional($event,rowIndex);"
  (keypress)="commonfunctions.NotionalValidateKeys($event)" 
  (keyup)="commonfunctions.chkNotionalFormat_keyUp($event)" -->


            <label>Underlying For Limit</label>
            <select id="underlyingForLimit" type="text" [(ngModel)]="underlyingForLimit" [disabled]="txtOrderType !== 'Limit'">
                <option *ngFor="let share of ShareBasket" value="{{share.Code}}">{{share.Code}}</option>
            </select>

                <!-- <label>EQC Ref</label>
          <input type="text" id="txtEQCRef" type="text"  [(ngModel)]="txtEQCRef" style="grid-column: 2 / span 3;"/> -->


                <label *ngIf="(this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].lp !== this.Issuer)  || 
                    (this.dataItemAccordian && this.dataItemAccordian.EP_BestPrice_YN === 'N')">
                    Non Best Price Reason</label>

            <!-- <input type="text" class="longText" id="nonBestPriceRsnDD" [(ngModel)]="nonBestPriceRsnDD" type="text"
                style="grid-column: 2 / span 3;  text-align: left !important;" *ngIf="(this.sortedAllPrices.length > 0 && 
                   this.sortedAllPrices[0].lp !== this.Issuer) || 
                   (this.dataItemAccordian && this.dataItemAccordian.EP_BestPrice_YN === 'N')" /> -->
            <select class="longText ddlReason" id="nonBestPriceRsnDD" [(ngModel)]="nonBestPriceRsnDD" type="text" *ngIf="(this.sortedAllPrices.length > 0 && 
            this.sortedAllPrices[0].lp !== this.Issuer) || 
            (this.dataItemAccordian && this.dataItemAccordian.EP_BestPrice_YN === 'N')">
                <option *ngFor="let n of NonBestPriceReasonArr" value="{{n.Key}}">
                    {{n.Value}}</option>
            </select>
            <label *ngIf="nonBestPriceRsnDD === 'Other' || nonBestPriceRsnDD === 'Others'"></label>
            <input type="text" [(ngModel)]="txtOthersRsn" *ngIf="nonBestPriceRsnDD === 'Other' || nonBestPriceRsnDD === 'Others'" class="ipReason"/>




            <label>Comment</label>
            <input type="text" class="longText ipComment" id="txtComment" [(ngModel)]="txtComment" />
        </div>
        <div>
            <table class="modal-table">
                <tr>
                    <th>
                        <input id="checkboxAll" type="checkbox" checked (click)="chkAll($event);" class="tblModelCheckBox">
                    </th>
                    <th *ngIf="(this.EQ_Login_Client_Mapping === 'Yes' || this.EQ_Login_Client_Mapping === 'YES')"></th>
                    <th *ngIf="(this.EQ_Show_Order_RM === 'Yes' || this.EQ_Show_Order_RM === 'YES')">RM Name</th>
                    <th *ngIf="(this.EQ_Show_Order_Customer === 'Yes' || this.EQ_Show_Order_Customer === 'YES')">
                        Customer Name</th>

                    <th>Notional</th>
                </tr>
                <!-- <tr> -->
                <tr *ngFor="let data of tblAllocation; let rowIndex = index">

                    <td>
                        <input id="checkbox{{rowIndex}}" type="checkbox" checked (click)="chkAllocation($event,rowIndex);" class="tblAllocationCheckBox">
                        </td>
                        <td *ngIf="EQ_Login_Client_Mapping === 'Yes' || EQ_Login_Client_Mapping === 'YES'">
                            <span>Place order for </span>
                            <select id="Select{{rowIndex}}" [(ngModel)]="allocatedClientArray[rowIndex]">
                                <option *ngFor="let bookData of allBooksData" value="{{bookData.BookCode}}">
                                    {{bookData.BookName}}</option>
                            </select>

                        </td>
                        <td *ngIf="EQ_Show_Order_RM === 'Yes' || EQ_Show_Order_RM === 'YES'">

                        <select id="Select{{rowIndex}}" [(ngModel)]="allocatedRMArray[rowIndex]" class="ddltblAllocation">
                                <option *ngFor="let RMItem of RMList" value="{{RMItem.Rel_Manager_Name}}">
                                    {{RMItem.Rel_Manager_Name}}</option>
                            </select>

                    </td>
                    <td *ngIf="EQ_Show_Order_Customer === 'Yes' || EQ_Show_Order_Customer === 'YES'" class="ddltblAllocation">
                        <select id="Select{{rowIndex}}" [(ngModel)]="allocatedCustomerArray[rowIndex]">
                            <option *ngFor="let c of customerList" value="{{c.CustomerID}}">
                                {{c.CustomerName}}</option>
                        </select>
                    </td>
                    <td>
                        <!-- <input type="text" id="txtnotional" type="text" addNotional($event,rowIndex);/> -->
                        <input type="text" id="Notional{{rowIndex}}" maxlength="14" (focus)="EcCommon.UnformatNumber($event);" (blur)="allocatedNotionalArr[rowIndex]=$event.target.value;checkNotional($event);setFormattedNotional($event,rowIndex);" (keypress)="EcCommon.NotionalValidateKeys($event)"
                            (keyup)="EcCommon.chkNotionalFormat_keyUp($event) === false ? allocatedNotionalArr[rowIndex] = '': allocatedNotionalArr[rowIndex]=allocatedNotionalArr[rowIndex]" placeholder="Enter Notional" value="0.00" [(ngModel)]="allocatedNotionalArr[rowIndex]"
                            class="ddltblAllocation" />
 <!-- Modified keyup event to handle invalid notional || Added by Priya L || 01Apr2022 || assigned by Pranav D. -->

                            <!-- (blur)="checkValidAllocateNotional($event, rowIndex);" -->

                        <!-- (blur)="this.reset();checkValidNotional($event);"
          (keypress)="commonfunctions.NotionalValidateKeys($event)"
          (keyup)="commonfunctions.chkNotionalFormat_keyUp($event)" -->
                        <!-- [disabled]="orderflag" /> -->

                        <!-- (focus)="EcCommon.UnformatNumber($event)"
        (blur)="this.reset();checkValidNotional($event);checkNotional($event);"
        (keypress)="commonfunctions.NotionalValidateKeys($event)"
        (keyup)="commonfunctions.chkNotionalFormat_keyUp($event)" -->

                    </td>
                </tr>
            </table>
        </div>
        <div class="button-row-right">
            <button class="button" (click)="btnAllocationClick();" [disabled]="tblAllocation.length >= 5">Add
                    Allocation</button>
            </div>
        <div class="input-grid dvTotalNotional">
                <label>Total Notional</label>
                <label>{{formattedAmount(totalNotional)}}</label>
                <label>Min Limit:</label>
                <label>
                    <!-- 250,000.00 -->
                    {{formattedAmount(minNotional)}}
                </label>
                <label>Allocated Notional</label>
                <label>{{formattedAmount(allocatedNotional)}}</label>
                <label>Max Limit:</label>
                <label>
                    <!-- 500,000.00:  -->
                    {{formattedAmount(maxNotional)}}
                </label>
           <!-- <label>Remaining Notional</label> -->
			<!-- Added by AdilP for FIN1EURINT-125 @19-04-2023 -->
            <label *ngIf="this.remainingNotional < 0 " ngClass="displayError">Remaining Notional</label>
            <label *ngIf="this.remainingNotional >= 0 ">Remaining Notional</label>
            <!-- <label>{{formattedAmount(this.remainingNotional)}}</label> -->
            <label *ngIf="this.remainingNotional < 0 " ngClass="displayError">{{formattedAmount(this.remainingNotional)}}</label>
            <label *ngIf="this.allocatedNotional >= 0 ">{{formattedAmount(this.remainingNotional)}}</label> 
        </div>
        <div class="button-row">
            <button class="button" id="bookOrderConfirm" (click)="confirmOrder();postBackMethod();" [disabled]="orderBookedFlag || orderLoadFlag">
                <div class="confirm-with-loader">
                        {{ "Confirm" | translate }}
                    <div class="txtAlignCenter" *ngIf="orderLoadFlag">
                        <div class="order-loader loaderbox">
                                <div class="col-12">
                                <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="imgConfirmLoader">
                                </div>
                            </div>
                        </div>
                    </div>
                </button>
            <button (click)="hideOrderDetails();postBackMethod();" class="button">{{ "Close" | translate }}</button>
        </div>
        <div class="dvErrMsg">
            <!-- <span style="color: #008000 !important; font-size: 16px" class="msgSpan"> {{successMsgBookOrder}} </span> -->
            <span class="msgSpan erMsgBookOrder">
                {{errorMsgBookOrder}} </span>
        </div>
    </div>
</div>
</div>

<div class="success-overlay" *ngIf="successMessage">
    <div class="success-grid">
        <div class="close-success-modal">
            <div (click)="toggleSuccessMessage()" class="modal-close success-close"></div>
        </div>
        <div class="success-div">
            <div class="success-icon" *ngIf="!warningMessage && !showBlockReason"></div>
            <!-- <div class="warning-icon" *ngIf="warningMessage"> -->
                <div *ngIf="warningMessage || showBlockReason">
                <app-svg-icons [icon]="'warning-icon'" [width]="'15'" [height]="'15'">
                </app-svg-icons><!-- Added by Jyoti S || 26-Apr-2023 || FIN1EURINT-216 -->
            </div>
        </div>
        <div class="success-div">
            <label class="success-message-bold lblSuccessMsg">{{successMsgBookOrder}}</label>
        </div>
        <!-- <div class="success-div">
      <label class="success-message-light">{{successMsgProdLaunch}}</label>
    </div> -->
        <div class="success-div">
            <ng-template [ngIf]="!showBlockReason">
                <button (click)="toggleSuccessMessage()" class="button success-button" *ngIf="!quoteEmailFlg && !warningMessage">Continue</button>
                <button (click)="toggleSuccessMessage()" class="button warning-button" 
				*ngIf="!quoteEmailFlg && warningMessage">Continue</button>
            </ng-template>
            <button (click)="toggleSuccessMessage()" class="button success-button" *ngIf="quoteEmailFlg || showBlockReason">Ok</button>
        </div>
    </div>
</div>
<app-previous-quotes-new [RFQ_ID]="selectRecord['RFQ_ID']" [Template_Code]="selectRecord['Template_Code']" [redirectFrom]="selectRecord['RedirectedFrom']" [Mode]="selectRecord['Mode']" [prevQuoteLaunchPopUp]="prevQuoteLaunchPopUp" [srcComponent]="'Pricer'"
    *ngIf="prevQuoteLaunchPopUp">
</app-previous-quotes-new>
<!-- RFQ_ID:p.rfq,Template_Code:'AutocallablePhoenix',RedirectedFrom:'Pricers',Mode:'Launch Product'} -->
<!-- <div class="overlaybondBlox" *ngIf="minNotionalConfirm">
    <div class="popupbondBlox">
        <div class="box-content">
            <label class="popup-text">
                Order size is less than minimum pool size.
                <br />Do you want to proceed?
            </label>
            <div class="popup-buttons">
                <button class="btnPrice"
                    style="height: 35px !important; font-family: 'Open Sans',sans-serif!important; font-size: 12px !important;"
                    (click)="hideViewPopup()">Cancel</button>
                <button class="btnPrice"
                    style="height: 35px !important; font-family: 'Open Sans',sans-serif!important; font-size: 12px !important;"
                    (click)="minNotionalConfirm = false">Continue</button>
            </div>
        </div>

    </div>
</div> -->
<!-- confirm pop up changes by Suvarna P || 26Mar2022 || assigned by Pranav D || start -->
<div class="success-overlay" *ngIf="minNotionalConfirm">
    <div class="success-grid dvMinNotional">
        <div class="close-success-modal">
            <div (click)="hideViewPopup()" class="modal-close success-close"></div>
        </div>
        <div class="success-div">
            <!-- <div class="success-icon"></div> -->
             <!-- <div class="warning-icon"></div> -->
             <div>
                <app-svg-icons [icon]="'warning-icon'" [width]="'15'" [height]="'15'">
                </app-svg-icons><!-- Added by Jyoti S || 26-Apr-2023 || FIN1EURINT-216 -->
            </div>
        </div>
        <div class="success-div">
            <!-- <label class="success-message-bold">{{successMsgButtonAction}}</label> -->
            <label class="success-message-bold"> Order size is less than minimum pool size.
                <br />Do you want to proceed?</label>
        </div>
        <div class="success-div">
            <button (click)="hideViewPopup()" class="button warning-button btnMinNotional"
			>Cancel</button>
            <button (click)="minNotionalConfirm = false" class="button success-button btnMinNotional">Continue</button>

        </div>
    </div>
</div>
<app-docs-modal *ngIf="showDocsPopup"
    [tableData]="docsData"
    [labelsData]="docsPopupLabels"
    (closeModalEvent)="closeDocsModal(val)"></app-docs-modal>
<router-outlet> </router-outlet>
<!-- confirm pop up changes by Suvarna P || 26Mar2022 || assigned by Pranav D || start -->
