<!-- <div class="page-controls">
   
</div> -->

<div class="container-fluid contentdiv">
    <!-- Added ngClass | Anubhav Goyal | BBVACLI-775 | 27-01-2023 -->
    <div [ngClass]="{'disablePointerEvents': this.viewOnly}">
        <div class="row pgHeaderTop"><!--Padding changed by Jyoti S || 13-Apr-2023 -->
            <div class="col-12 title-row">
                <label class="pageHeader">Credit Linked Note</label>
                
                <!--Added by Apurva C||19-Oct-->
                <!-- Commented by Apurva K|| yet to devloped -->
                <!-- <div class="product-tabs" *ngIf="!this.viewOnly">
                    <div></div>
                    <div *ngIf="!this.viewOnly">
                        <div class="topGridRow">
                            <div class="relPosition">
                                <label class="labelNames">Load Variants</label>
                            </div>
                            <div class="relPosition">
                                <app-custom-dropdown [data]="portfolioIdArr" [unicodeIcon]="false" [showIcon]="true" [textField]="'P_Name'" [valueField]="'P_ID'" [iconSrcField]="'imageIcon'" (selected)="changeDdl($event)" >
                                </app-custom-dropdown>
                            </div>

                            <div class="relPosition">
                                <label class="labelNames">New Variant</label>
                            </div>
                            <div class="relPosition">
                                <input type="text" [(ngModel)]="portfolioName" class="txtalignLeft">
                            </div>
                            <div class="relPosition">
                                <div class="btn-group btnSaveMargin" (clickOutside)="saveoptionflag = false">
                                    <button type="button" class="btn btn_Save" (click)="Save()" tabindex="50" *ngIf="!this.viewOnly" [disabled]="priceBtnActive === 'N'">
                                        <div class="price-with-loader">
                                            {{ "Save" | translate }}
                                            <div class="txtAlignCenter" *ngIf="variantFlag">
                                                <div class="row priceall-loader loaderbox">
                                                    <div class="col-12">
                                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                    </div>
                                                </div>
                                            </div>
                                           </div>
                                            
                                    </button>
                                   
                                    <button type="button" (click)="saveOptions()" class="sidebutton btnSaveNShare" *ngIf="!this.viewOnly" [disabled]="(priceBtnActive === 'N')">
                                        <app-svg-icons [icon]="'arrow-drop-down'" [width]="'8'" [height]="'8'">
                                        </app-svg-icons>
                                    </button>
                                    <div class="ddl SaveNShare" *ngIf="(saveoptionflag) ">
                                        <div class="flexDisplay">
                                        <div class="updateIcon" *ngIf="portfolio!=='' && accessRight !== 'VIEW'">
                                           
                                                <app-svg-icons [icon]="'update-icon'" [width]="'15'" [height]="'15'">
                                                </app-svg-icons>
                                        </div>
                                        <div class="ddlitem" role="menuitem" (click)="updateVariant();saveoptionflag=false" *ngIf="portfolio!=='' && accessRight !== 'VIEW'">Update Variant
                                        </div>
                                    </div>
                                    <div class="flexDisplay">

                                        <div class="SaveNShareIcon">
                                           
                                                <app-svg-icons [icon]="'share-icon'" [width]="'15'" [height]="'15'">
                                                </app-svg-icons>
                                        </div>
                                        <div class="ddlitem" role="menuitem" (click)="showsaveSharePopup()">Save and Share
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="relPosition">
                                <button class="button DeleteIcon" (click)="DeleteTemplate();" [disabled]="(portfolio==='')">
                                  
                                    <app-svg-icons *ngIf="(portfolio==='')" [icon]="'delete'" [width]="'13'" [height]="'13'">
                                    </app-svg-icons>
                                    <app-svg-icons *ngIf="(portfolio !=='')" [icon]="'deleteEnabled'" [width]="'13'" [height]="'13'">
                                    </app-svg-icons>
                                    {{ "Delete" | translate }}
                                </button>
                            </div>
                        </div>


                    </div>
                </div> -->
                <!-- Added top on 09 Jan 2023 by Ashwini H -->
                <div class="portfolioMsg" *ngIf="successMsg !== '' && saveFlag">
                    <span class="successMsg txtsuccessMsg" *ngIf="successMsg !== '' && saveFlag">{{successMsg}} </span>
                </div>
                <div class="portfolioMsg" *ngIf="SaveandShareErrorMsg !== ''">
                    <span class="errorMsg" *ngIf="SaveandShareErrorMsg !== ''">{{SaveandShareErrorMsg}} </span>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="relPosition">
                <div class="row divRfqId">
                    <div class="col-12">
                        <div class="Messagebox" *ngIf="rfqID" style="font-size: 22px !important;">
                            RFQ ID : &nbsp; {{noteMasterID}}</div>
                        <div *ngIf="portfolioId && portfolioId!=='' && this.viewOnly" style="font-size: 22px !important;" class="Messagebox">
                            Saved Request ID : {{portfolioId}}
                        </div>
                        <div *ngIf="scheduledReqId && scheduledReqId!=='' " style="font-size: 22px !important;" class="Messagebox">
                            Scheduled Request ID : {{scheduledReqId}}
                        </div>
                        <div *ngIf="ErrorMsg !== '' " class="Messagebox">
                            <span class="errMsgTop">{{ErrorMsg}}</span>
                        </div>
                        <div *ngIf="infoMsg !== '' " class="Messagebox">
                            <span class="validationErrorMsg">{{infoMsg}}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div></div>
        </div>
        <div class="row-grid">
            
            <!--Left Column-->
            <div class="relPosition">
                <div class="row-grid-inner">
                    <!-- Column 1 -->
                    <div class="flex-column">
            
                                <div class="label-row">
                                    <!-- Changed by Pranav D 26-Oct-2021 Removed hidescreen class from below label and added General Terms -->
                                    <label class="box-header">General Terms</label>
                                </div>

                                <!-- On behalf of -->
                                <!-- *ngIf="this.allBooksData.length > 1" Added by Pranav D 6-Mar-2023 | BBVAEPCLI-407 -->
                                <!-- <div class="row-grid-2">
                                    <div style="position:relative;" *ngIf="this.allBooksData.length > 1">
                                        <label>{{this.commonfunctions.Onbehalfof | translate}}</label>
                                    </div>
                                    <div style="position:relative;" *ngIf="this.allBooksData.length > 1">
                                        <select [(ngModel)]="onBehalfOf" tabindex="1" (change)="this.reset();onBehalfOfChange();">
                                            <option *ngFor="let bookData of allBooksData;let i = index"
                                                [value]="bookData.BookCode">
                                                {{bookData.BookName }}</option>
                                        </select>
                                    </div>
                                </div> -->

                                <div class="row-grid-2">
                                    <!--Underlying-->
                                    <div class="relPosition">
                                        <label>{{ "Underlying" | translate }} </label>
                                    </div>
                                    <div class="relPosition">
                                        <!-- Changes done by Apurva K for disabling the field after 4 underlyings are reached|| 25-Apr-2023 -->
                                        <input type="text" placeholder="Enter underlying" value="{{ShareName}}" class="txtalignLeft" [(ngModel)]="ShareName" maxlength="10" (keypress)="ChangeIndex($event); showSuggestions = true" (keydown.enter)="selectShare($event); flag=false;" (keydown.backspace)="backKeyPress($event)"
                                            (keydown.delete)="backKeyPress($event)" (keydown.tab)="flag=true;" (keydown.ArrowUp)="selectedBIndex = commonfunctions.moveUpSelection1($event, selectedBIndex)" (keydown.ArrowDown)="selectedBIndex = commonfunctions.moveDownSelection1($event, selectedBIndex)"
                                            tabindex="1" Id="txtShare" [disabled]="enabledisablefields('Underlyings') || ShareBasket.length >= 4" />
                                        <!-- <div class="error-input"></div> -->
                                        <div class="SelectorBox" *ngIf="flag && showSuggestions" (clickOutside)="flag=false;">
                                            <a *ngFor="let share of (shares | searchunderlying : ShareName); let i = index" (keypress)="ChangeIndex($event)" (keydown.enter)="selectShare($event)">
                                                <div *ngIf="share" [attr.data-share]="share.Code" (click)="showUnderlying($event,share)" [ngClass]="{HoverSuggestion: i === selectedBIndex}">
                                                    <span>{{ share.LongName }}</span>
                                                </div>
                                            </a>
                                        </div>
                                        <!-- <div class="validate-popup active"><div class="exclaim-icon"></div><span>Please Enter Underlying.</span></div> -->
                                    </div>
                                </div>
                                <div class="row-grid-1" *ngIf="ShareBasket && ShareBasket.length > 0">
                                    <!--Shares List-->
                                    <div class="sharebasket flexDisplay" *ngFor="let Selectedshare of ShareBasket; let rowIndex = index;">
                                        <button class="shareName" (click)="onclickShareBasket(Selectedshare)">
                                                {{Selectedshare.Code}} &nbsp;
                                            </button>
                                        <input [(ngModel)]="Selectedshare.Weight" value="{{ShareBasket.Weight}}" type="text" class="ipShare" *ngIf="upsideType === 'Call Custom Basket'" (blur)="shareweightcalc()">
                                        <!-- <img src="{{asseturl}}clear.png" width="20px" style="float: right;height: 20px;margin: auto;" (click)="removeShare(rowIndex);"> -->
                                        <app-svg-icons (click)="removeShare(rowIndex);" class="cancel-icon" [icon]="'close-icon'" [width]="'12'" [height]="'12'">
                                        </app-svg-icons>
                                    </div>
                                </div>
                                
                                <!-- Currency -->
                                <div class="row-grid-2">
                                    <div class="relPosition">
                                        <label>{{ "Currency" | translate}}</label>
                                    </div>
                                    <div class="relPosition">
                                        <!-- Removed  cpnTypeChange(this.cpnType) | Anubhav Goyal | BBVAEPCLI-343-->
                                        <select [(ngModel)]="ddlNoteCcy" tabindex="2" (change)="currencyChange();" [disabled]="enabledisablefields('Currency')" class="ip-border ScrollCss">
                                               <option *ngFor="let c of CCY" [value]="c">
                                                   {{c}}</option>
                                       </select>
                                    </div>
                                </div>

                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.Format | translate}}</label>
                                    </div>
                                    <div style="position:relative;">
                                        <select [(ngModel)]="format" (change)="this.fetchMaturityDateBasedOnTenor() ; formatChange(format); maturityDateDisable(); reset()" tabindex="3">
                                            <!-- <option>Swap</option> -->
                                            <option *ngFor="let f of Format" [value]="f.Value">{{f.Key}}</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Solve For -->
                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.Solvefor | translate}}</label>
                                    </div>
                                    <div style="position:relative;">
                                        <select [(ngModel)]="SolveForvalue" id="SolveForvalue" (change)="setSolveFor(SolveForvalue)" tabindex="4">
                                            <option value="Coupon"
                                                *ngIf="(cpnType === 'Fixed' || cpnType === 'Floating' || cpnType === 'Fixed-Float' || cpnType === 'Float-Fixed')">
                                                Coupon</option>
                                            <option value="Reoffer"
                                                *ngIf="(cpnType === 'Fixed' || cpnType === 'Floating' || cpnType === 'Fixed-Float' || cpnType === 'Float-Fixed') || (cpnType === 'UpFront')">
                                                Reoffer</option>
                                            <!--START : New solve for added by Pranav D 22-Apr-2022 BBVACLI-172 -->
                                            <!-- <option value="FixedCoupon" *ngIf="(cpnType === 'Fixed-Float' || cpnType === 'Float-Fixed')">Fixed Coupon</option>
                                        <option value="FloatingCoupon" *ngIf="(cpnType === 'Fixed-Float' || cpnType === 'Float-Fixed')">Floating Coupon</option> -->
                                            <!--END : New solve for added by Pranav D 22-Apr-2022 BBVACLI-172 -->
                                            <option value="FixedRate"
                                                *ngIf="(cpnType === 'Fixed-Float' || cpnType === 'Float-Fixed')">Fixed
                                                Rate</option>
                                            <option *ngFor="let s of SolveForDropdown" value="{{s.Value}}">
                                                {{s.Key}}
                                            </option>
                                        </select>
                                    </div>
                                </div>

                                

                               
                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <!-- Added by Anubhav Goyal | BBVAEPCLI-394 lower the coupon and leave less white space on the CLN screen | 27-02-2023 -->

                                    </div>
                                </div>

                            </div>
                            <!-- Column 2 -->
                            <div class="flex-column">
                               
                                <div class="label-row hideScreen">
                                    <label class="labelHeaders hideScreen" style="height: 32px;"></label>
                                </div>
                               
                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.Notionallabel | translate}}</label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" id="txtnotional" type="text" maxlength="14" value="{{ Notional }}" (focus)="commonfunctions.UnformatNumber($event)" (blur)="this.reset();checkValidNotional($event);checkNotional($event);" (keypress)="commonfunctions.NotionalValidateKeys($event)"
                                            (keyup)="commonfunctions.chkNotionalFormat_keyUp($event)" placeholder="Enter Notional" [(ngModel)]="Notional" tabindex="6" />
                                    </div>
                                </div>

                                <!-- Price (%) -->
                                <div class="row-grid-2" *ngIf="format==='Note'">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.Pricepercent | translate}}</label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" id="txtPrice" [(ngModel)]="IBPrice" (blur)="this.reset();this.IBPrice = commonfunctions.setDecimal($event); " maxlength="10" (keypress)="(format === 'Swap') ? commonfunctions.InputNegativeNumber($event) :commonfunctions.InputNumber($event)"
                                            [disabled]="SolveForvalue === 'Reoffer'" />
                                    </div>
                                </div>

                                <!-- Upfront (%) -->
                                <div class="row-grid-2" *ngIf="format==='Swap'">
                                    <div style="position:relative;">
                                        <label style="white-space: nowrap;">{{this.commonfunctions.Upfront |
                                            translate}}
                                            (%) </label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" id="txtUpfront" [(ngModel)]="Upfront" (blur)=" this.reset();this.Upfront = commonfunctions.setDecimal($event);" maxlength="10" (keypress)="(format === 'Swap') ? commonfunctions.InputNegativeNumber($event) :commonfunctions.InputNumber($event)"
                                            [disabled]="SolveForvalue === 'Reoffer'" />
                                    </div>
                                </div>

                                <!-- Issue Price (%) -->
                                <div class="row-grid-2" *ngIf="format==='Note'">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.IssuePrice | translate}}</label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" [(ngModel)]="issuePrice" (blur)="this.issuePrice = commonfunctions.setDecimal($event); this.reset();" maxlength="10" (keypress)="commonfunctions.InputNumber($event)" />
                                    </div>
                                </div>
                            </div>
                </div>


                <div class="row-grid-inner">
                    <!-- Column 1 -->
                    <div class="flex-column">
                        <div class="label-row">
                            <label class="box-header">{{this.commonfunctions.Dateslabel | translate}}</label>
                        </div>


                        <!-- Strike Shifter/Date -->
                        <!-- <div class="row-grid-2">
                        <div style="position:relative; padding-right: 0 !important;">
                            <label>Strike Shifter/Date</label>
                        </div>
                        <div class="error-date" style="position:relative; padding: 0 !important;white-space: nowrap;">
                           
                            </div>

                            <div style="position:relative">
                                <app-svg-icons [icon]="'info-icon'" class="info" [width]="'15'"></app-svg-icons>
                                <div class="infodiv">
                                    <span class="infoNote" style="white-space: initial;width: 260px;">
                                        Number of days you want to shift the Strike Forward from Today. For
                                        Strike today (or next business day in case today is holiday), please
                                        input 0b.
                                    </span>
                            </div>
                        </div>

                        </div> -->


                        <!-- Payment Shifter/Date -->
                        <div class="row-grid-2">
                            <!--Strike Shifter/Date-->
                            <div class="relPosition">
                                <label>{{ "Strike Shifter/Date" | translate }}</label>
                            </div>
                            <div class="div-flex-date error-date-2 relPosition">
                                <!-- <label class="switch">
                                        <input type="checkbox" id="switch">
                                        <span class="slider"><p>Tdy Fwd</p></span>
                                      </label> -->
                                <div class="Btn_priips">
                                    <div class="btngroup">
                                        <!-- Change for Tdy to TOD && Fwd to FWD || VarshaG || 21-03-2023 -->
                                        <!-- Changes done by Sudarshan P/Apurva K || 06-Jun-2023|| FIN1EURINT-435  -->
                                        <button [(ngModel)]="stkshiftTdy" ngDefaultControl tabindex="9" (click)="Setstkshiftvalue(stkshiftTdy);this.reset();changeStkShiftToggle();txtTenorDateChange('Payment');" [disabled]="enabledisablefields('StrikeShifterDate')" class="Btn" [ngClass]="stkshift === '0B' ? 'Btn_Yes' : 'Btn_No' ">TOD</button>
                                        <button [(ngModel)]="stkshiftFwd" ngDefaultControl tabindex="9" (click)="Setstkshiftvalue(stkshiftFwd);this.reset();changeStkShiftToggle();" [disabled]="enabledisablefields('StrikeShifterDate')" class="Btn" [ngClass]="stkshift === '0B' ? 'Btn_No' : 'Btn_Yes' ">FWD</button>
                                    </div>
                                    <!-- <div> -->
                                        <!-- <input type="date" [(ngModel)]="stkdate" id="txtstkdate" tabindex="13" value="{{stkdate}}" (change)="this.reset();" min="{{todayDate}}" (blur)="txtTenorDateChange('Payment');" *ngIf="stkshift === 'Fwd'" style="margin-left: 4px  !important; width: 117px !important;max-width: 117px !important;min-width: 117px !important;"> -->
                                        <div class="dateLabel" *ngIf="stkshift === 'Fwd'">
                                            <input type="date" [(ngModel)]="stkdate" id="txtstkdate" tabindex="9" value="{{stkdate}}" (change)="this.reset();" min="{{todayDate}}" (blur)="txtTenorDateChange('Payment');">
                                            <span class="spnstkdate" tabindex="9" id="stkdate">{{ stkdate | date: "dd-MMM-yyyy" }}</span>
                                        </div>
                                   
                                   
                                    
                                </div>
                            </div>
                        </div>

                        <div class="row-grid-2">
                            <!-- Payment Shifter/Date -->
                            <div class="relPosition">
                                <label>Issue Date Offset</label>
                            </div>
                            <div class="div-flex-date error-date-2 relPosition">
                                <select [(ngModel)]="paymentshift" class="YNbox1 ip-border" tabindex="10" (blur)="txtTenorDateChange('Payment');txtTenorDateChange('Expiry');" (change)="this.reset();" [disabled]="enabledisablefields('IssueDateOffset')">
                                        <!-- <option value="5B">T+5</option>
                                <option value="10B">T+10</option>
                                <option value="Custom">Custom</option> -->
                                        <option *ngFor="let d of IssueDateOffset"
                                            (selected)="d.Value === paymentshift" [value]="d.Value">
                                            {{ d.Key }}</option>
                                    </select>
                                <!-- <input type="text" name="" class="tenorBox" maxlength="4" tabindex="10"
                                (keypress)="this.commonfunctions.tenorDateValidation($event);"
                                (blur)="txtTenorChange($event,'Payment');" [(ngModel)]="paymentshift">/ -->
                                <!-- <input type="date" [(ngModel)]="settdate" value="{{settdate}}" tabindex="14" id="txtsettdate" (change)="this.reset();" (blur)="txtTenorDateChange('Expiry');txtTenorDateChange('Payment');" *ngIf="paymentshift === 'Custom'" style="margin-left: 4px !important; width: 117px !important;max-width: 117px !important;min-width: 117px !important;"> -->
                                <div class="dateLabel" id="customOffset" *ngIf="paymentshift === 'Custom'"><!--Min value changed from 1 to 0 as suggested by Nitish K|| Varsha G ||FIN1EURINT-604|| 04-Sep-2023 -->
                                    <input type="number" name="settdate" id="settdate"  min="0" max="99" oninput="validity.valid||(value='');" [(ngModel)]="customSetDate" 
                                    tabindex="11" id="txtsettdate" (change)="this.reset();" (blur)="txtTenorDateChange('Expiry');txtTenorDateChange('Payment');">
                                    <span id="settdateLabel">T + </span>
                                </div>
                                <!-- <img src="{{asseturl}}information.png" class="info">
                                    <div class="infodiv">
                                        <span class="infoNote" style="white-space: initial;width: 260px;">
                                            Number of days you want to shift the Payment Forward from Strike
                                            Date.
                                        </span>
                                    </div> -->
                            </div>
                        </div>

                        <!-- Tenor -->
                        <div class="row-grid-2">
                            <!-- Tenor -->
                            <div class="relPosition">
                                <label>{{ "Tenor" | translate }}</label>
                            </div>
                            <div class="div-flex-date">
                                <!-- added blur event to calculate expiry date || PriyaL || 07Apr2022 || Assigned by Pranav D -->
                                <select [(ngModel)]="expshift" class="YNbox1 ip-border ScrollCss" tabindex="11" 
                                (blur)="txtTenorChange($event,'Expiry');" (change)="this.reset();autocallfreqbasedonTenor();customTenor = ''" 
                                [disabled]="enabledisablefields('Tenor')" *ngIf="TenorDropdown?.length <= 0 || TenorDropdown[0]==''">
                                        <option *ngFor="let t of Tenor" (selected)="t.Value === expshift"
                                            [value]="t.Key">
                                            {{ t.Key }}</option>
                                    </select>

                                    <select [(ngModel)]="expshift" class="YNbox1 YNboxWidth" tabindex="15" 
                                    (change)="this.reset();" [disabled]="TenorYN=='N' "
                                    *ngIf="TenorDropdown?.length > 0 && TenorDropdown[0]!=''">
                                    <option *ngFor="let t of TenorDropdown" (selected)="t === expshift" [value]="t">
                                        {{ t }}</option>
                                    </select>
                                <input type="text" name="" maxlength="4" *ngIf="expshift === 'Custom'" [(ngModel)]="customTenor" tabindex="12" (blur)="this.reset();autocallfreqbasedonTenor();CustomerTenorChange('Expiry');" (keypress)="eccommon.customTenorValidation($event, customTenor)"
                                   class="ipCustomTenor">
                            </div>
                        </div>

                    </div>

                    <!-- Column 2 -->
                    <div class="flex-column">
                        <div class="label-row">
                            <label class="box-header" *ngIf="format === 'Swap'">Funding</label>
                        </div>

                        <!-- Type -->
                        <div class="row-grid-2" *ngIf="format === 'Swap'">
                            <div style="position:relative;">
                                <label>{{this.commonfunctions.Type | translate}}</label>
                            </div>
                            <div style="position:relative;">
                                <select *ngIf="format === 'Swap'" [(ngModel)]="fundType" tabindex="11" (change)="this.reset();">
                                    <option value="Fixed Rate">{{this.commonfunctions.FixedRate |
                                        translate}}
                                    </option>
                                    <option value="Floating Rate">{{this.commonfunctions.FloatingRate |
                                        translate}}
                                    </option>
                                </select>
                            </div>
                        </div>

                        <!-- Frequency -->
                        <div class="row-grid-2" *ngIf="format === 'Swap'">
                            <div style="position:relative;">
                                <label>{{this.commonfunctions.Frequency | translate}}</label>
                            </div>
                            <div style="position:relative;">
                                <select name="" [(ngModel)]="fundFreq" *ngIf="format === 'Swap'" [(ngModel)]="fundFreq" tabindex="12" (change)="this.reset();">
                                    <option value="1m" *ngIf="fundType !== 'Floating Rate'">1m</option>
                                    <option value="3m">3m</option>
                                    <option value="6m">6m</option>
                                    <option value="12m" *ngIf="fundType !== 'Floating Rate'">12m</option>
                                </select>
                            </div>
                        </div>

                        <!-- Rate/Spread (%) -->
                        <div class="row-grid-2" *ngIf="(format === 'Swap' && this.SolveForvalue === 'FundingRate') || format === 'Swap' && this.SolveForvalue !== 'FundingRate'">
                            <div style="position:relative;" style="padding-right: 0 !important;">
                                <label class="disabledlbl" *ngIf="format === 'Swap' && this.SolveForvalue === 'FundingRate'">{{this.commonfunctions.Rate
                                    | translate }} / {{this.commonfunctions.Spread | translate}}
                                    (%)</label>
                                <label *ngIf="format === 'Swap' && this.SolveForvalue !== 'FundingRate'">{{this.commonfunctions.Rate
                                    | translate }}/<br>{{this.commonfunctions.Spread | translate}}
                                    (%)</label>
                            </div>
                            <div style="position:relative;">
                                <input type="text" *ngIf="format === 'Swap'" tabindex="13" [(ngModel)]="fundRate" id="txtFundingRate" maxlength="100" (blur)="this.reset();" (keypress)="commonfunctions.InputSpread($event)" [disabled]="this.SolveForvalue === 'FundingRate'">
                            </div>
                        </div>

                    </div>
                </div>

            </div>


            <div class="flex-container">

                <div class="container">
                    <div style="position:relative;">
                        <!-- Column 1 & 2 -->
                        <div class="row-grid-inner">
                                    <!-- Column 1 -->
                                    <div class="flex-column">
                                        <!-- Added by Anubhav Goyal | BBVAEPCLI-394 lower the coupon and leave less white space on the CLN screen | 27-02-2023 -->
                                        
                                        <div class="label-row">
                                            <label class="box-header">{{this.commonfunctions.Couponlabel |
                                                translate}}</label>
                                        </div>
        
        
                                        <!-- Coupon Type -->
                                        <div class="row-grid-2">
                                            <div style="position:relative;" style="padding-right: 0 !important;">
                                                <label>{{this.commonfunctions.CouponTypelabel | translate}}</label>
                                            </div>
                                            <div style="position:relative;">
                                                <select [(ngModel)]="cpnType" tabindex="18" (change)="cpnTypeChange(cpnType)">
                                                    <option value="Fixed" *ngIf="SolveForvalue !== 'FixedRate'">Fixed
                                                    </option>
                                                    <option value="Floating" *ngIf="SolveForvalue !== 'FixedRate'">Floating
                                                    </option>
                                                    <option value="Fixed-Float">Fixed Float</option>
                                                    <option value="Float-Fixed">Float Fixed</option>
                                                    <option value="UpFront"
                                                        *ngIf="SolveForvalue !== 'Coupon' && SolveForvalue !== 'FixedRate'">
                                                        No
                                                        Coupon</option>
                                                </select>
                                            </div>
                                        </div>
        
                                        <!-- Coupon p.a. (%) / Spread p.a. (%) -->
                                        <div class="row-grid-2">
                                            <div style="position:relative;" style="padding-right: 0 !important;">
                                                <label *ngIf="cpnType !== 'UpFront'" [ngClass]="{'disabledlbl':SolveForvalue === 'Coupon' || SolveForvalue === 'FloatingCoupon'}">{{this.commonfunctions.CouponpaSpreada
                                                    | translate}}</label>
                                                <!-- <div class="tooltip-flex" *ngIf="cpnType !== 'UpFront'">
                                                    <app-svg-icons [icon]="'info-icon'" class="info" [width]="'15'"></app-svg-icons>
                                                    <div class="infodiv">
                                                        <span class="infoNote" style="white-space: initial;width: 260px;">
                                                            {{this.commonfunctions.Couponexpressedperannum | translate}}
                                                        </span>
                                                    </div>
                                                </div> -->
                                            </div>
                                            <div style="position:relative;">
                                                <input type="text" id="txtCoupon" tabindex="20" [(ngModel)]="Spread" (blur)="this.Spread = commonfunctions.setDecimal($event);this.reset();" maxlength="10" (keypress)="commonfunctions.InputNumber($event)" *ngIf="cpnType !== 'UpFront'" [disabled]="SolveForvalue === 'Coupon' || SolveForvalue === 'FloatingCoupon'">
                                            </div>
        
                                        </div>
        
                                        <!-- Fixed Rate -->
                                        <div class="row-grid-2">
                                            <div *ngIf="cpnType === 'Fixed-Float' || cpnType === 'Float-Fixed'">
                                                <label *ngIf="(cpnType === 'Fixed-Float' || cpnType === 'Float-Fixed') && SolveForvalue !== 'FixedCoupon'">{{this.commonfunctions.FixedRate
                                                    | translate}}</label>
                                                <!-- <div class="tooltip-flex" *ngIf="cpnType === 'Fixed-Float' || cpnType === 'Float-Fixed'">
                                                    <app-svg-icons [icon]="'info-icon'" class="info" [width]="'15'"></app-svg-icons>
                                                    <div class="infodiv">
                                                        <span class="infoNote" style="white-space: initial;width: 260px;">
                                                            {{this.commonfunctions.Fixedrateexpressedperannum | translate}}
                                                        </span>
                                                    </div>
                                                </div> -->
                                            </div>
                                            <div *ngIf="cpnType === 'Fixed-Float' || cpnType === 'Float-Fixed'">
                                                <input type="text" id="txtFixedrate" [(ngModel)]="Fixedrate" (blur)="this.Fixedrate = commonfunctions.setDecimal($event);this.reset();" (keypress)="commonfunctions.InputNumber($event)" maxlength="10" *ngIf="cpnType === 'Fixed-Float' || cpnType === 'Float-Fixed'"
                                                    [disabled]="SolveForvalue === 'FixedCoupon' || SolveForvalue === 'FixedRate'" />
                                            </div>
        
                                        </div>
        
                                        <!-- Floating Index -->
                                        <div class="row-grid-2">
                                            <div style="position:relative;" style="padding-right: 0 !important;" *ngIf="cpnType !== 'Fixed' && cpnType !== 'UpFront'">
                                                <label>{{this.commonfunctions.FloatingIndex| translate}}</label>
                                            </div>
                                            <div style="position:relative;" *ngIf="cpnType !== 'Fixed' && cpnType !== 'UpFront'">
                                                <!-- disabled removed by Pranav D 16-Aug-2023 BBVAEPCLI-610 as field will be enabled as per requirement -->
                                                <select [(ngModel)]="floatingRef" (change)="changeFreq()">
                                                    <option *ngFor="let arr of floatingRefArr" [value]="arr.Code">
                                                        {{ arr.Code }}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
        
                                        <!-- First number of Periods -->
                                        <div class="row-grid-2" *ngIf="cpnType !== 'Fixed' && cpnType !== 'UpFront' && cpnType !== 'Floating'">
                                            <div style="position:relative;" style="padding-right: 0 !important;">
                                                <label>{{this.commonfunctions.FirstnumberofPeriods | translate}}</label>
                                                <!-- <div class="tooltip-flex">
                                                    <app-svg-icons [icon]="'info-icon'" class="info" [width]="'15'"></app-svg-icons>
                                                    <div class="infodiv">
                                                        <span class="infoNote" style="white-space: initial;width: 260px;">
                                                            {{this.commonfunctions.Numberofperiodsinwhichafixedcouponwillbepaidafterthedefinednumberthecouponpaidwithbethedefinedfloatingcoupon | translate}}
                                                        </span>
                                                    </div>
                                                </div> -->
                                            </div>
                                            <div style="position:relative;">
                                                <input type="text" [(ngModel)]="noOfPeriods" id="txtnoOfPeriods" (keypress)="commonfunctions.InputNumberForInteger($event)" [disabled]="cpnType === 'Fixed' || cpnType === 'Floating' || cpnType === 'UpFront'" (change)="this.reset();" />
                                            </div>
        
                                        </div>
                                    </div>
        
                                    <!-- Column 2 -->
                                    <div class="flex-column">
                                        <div class="label-row">
                                            <label class="labelHeaders"></label>
                                        </div>
                                        
        
                                        <!-- Coupon Freq -->
                                        <div class="row-grid-2" *ngIf="cpnType !== 'UpFront'">
                                            <div style="position:relative;" style="padding-right: 0 !important;">
                                                <label>{{this.commonfunctions.CouponFreq | translate}}</label>
                                            </div>
                                            <!-- BBVAEPCLI-610|| RadhaM || 31August|| Added a condition for cpnfreq disable when currency is EUR -->
                                            <div style="position:relative;">
                                                <select [(ngModel)]="cpnFreq" tabindex="21" (change)="this.changeFloatingrefonFreq(cpnFreq) ; this.reset(); "
                                                 [disabled]="((cpnType === 'Floating' || cpnType === 'Fixed-Float' || cpnType === 'Float-Fixed'  ) && ddlNoteCcy === 'EUR')">
                                                    <!-- changeFloatingrefonFreq(cpnFreq) ; -->
                                                    <!-- cpntype condition added for 1m and 12m by Pranav D BBVACLI-228 -->
                                                    <!-- *ngIf="cpnType === 'Fixed'" removed for 1m by Pranav D as per BBVAEPCLI-610 16-Aug-2023  ngIf condition added to hide 1m in case of an 
                                            index which does not include 1m,3m,6m  -->
                                                    <option value="1m" *ngIf="(this.fundIndex !== 'SONIA' && this.fundIndex !== 'SOFR' && this.fundIndex !== 'SARON')">Monthly</option>
                                                    <option value="3m">Quarterly</option>
                                                    <option value="6m">Semianually</option>
                                                     <!-- Removed condition by RiddhiP || 31-OCT-23 || BBVAEPCLI-751 || Add frequencies for SOFR floating references in credit tranches -->
                                                    <option value="12m">Yearly</option>
                                                </select>
                                            </div>
                                        </div>
        
        
                                        <!-- Coupon Basis -->
                                        <div class="row-grid-2" *ngIf="cpnType !== 'UpFront'">
                                            <div style="position:relative;" style="padding-right: 0 !important;">
                                                <label>{{this.commonfunctions.CouponBasislabel | translate}}</label>
                                            </div>
                                            <div style="position:relative;">
                                                <select tabindex="22" [(ngModel)]="cpnBasis" (change)="this.reset();">
                                                    <option *ngFor="let c of CouponDayBasis"  [value]="c.Key">{{c.Key}}</option>
                                                    <!-- <option value="30/360">30/360</option>
                                                    <option value="Act/360">Act/360</option> -->
                                                    <!-- <option value="Act/Act">Act/Act</option> -->
                                                </select>
                                            </div>
                                        </div>
        
                                        <!-- START : Pranav D 2-Jan-2023 BBVAEPCLI-271 -->
                                        <div class="row-grid-2">
                                            <div *ngIf="cpnType !== 'UpFront'">
                                                <label>{{this.commonfunctions.Firstcoupon | translate}}</label>
                                            </div>
                                            <div *ngIf="cpnType !== 'UpFront'">
                                                <div class="relPosition">
                                                    <div class="btngroup">
                                                        <button [ngClass]="firstCpnYN==='Y'? 'Btn_Yes':'Btn_No'" (click)="setFirstCpn('Y');" class="Btn">Long</button>
                                                        <button [ngClass]="firstCpnYN==='N' ? 'Btn_Yes':'Btn_No'"  (click)="setFirstCpn('N')" class="Btn">Short</button>
                                                    </div>
                                                </div>

                                                <!-- <div class="toggleYNFull" (click)="setFirstCpn()">
                                                    <div class="toggleNFull " (click)="firstCpnYN = 'Y'; toggeleOnOff();" [ngClass]="this.firstCpnYN==='Y'? 'Select ':''">
                                                        Long
                                                    </div>
                                                    <div class="toggleNFull" (click)="firstCpnYN = 'N'; toggeleOnOff()" [ngClass]="this.firstCpnYN==='N'? 'Select ':''">
                                                        Short
                                                    </div>
                                                </div> -->
                                            </div>
                                            <!-- END : Pranav D 2-Jan-2023 BBVAEPCLI-271 -->
                                        </div>
        
                                       
        
        
                                
                            </div>
                        </div>
                    </div>

                </div>


                <div class="container">
                    <div style="position:relative;">
                        <!-- Column 1 & 2 -->
                        <div class="row-grid-inner">
                            <!-- Column 1 -->
                            <div class="flex-column">
                                <div class="label-row">
                                    <label class="box-header">{{this.commonfunctions.Redemption |
                                        translate}}</label>
                                </div>


                                <!-- Coupon % -->
                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.RecoveryTypelabel | translate}}
                                        </label>
                                    </div>
                                    <div style="position:relative;">
                                        <select [(ngModel)]="recoveryType" (change)="this.reset(); fillSettlemetTypeArr()">
                                            <!-- <option *ngFor="let arr of recoveryTypeArr" [value]="arr.Data_Value">
                                            {{ arr.Data_Value }}
                                        </option> -->
                                            <option *ngFor="let arr of recoveryTypeArr" [value]="arr">
                                                {{ arr }}
                                            </option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Coupon % -->
                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.SettlementTypelabel | translate}}
                                        </label>
                                    </div>
                                    <div style="position:relative;">
                                        <select [(ngModel)]="settlementType">
                                            <option *ngFor="let s of settlementTypeArr" [value]="s.Key">
                                                {{ s.Key }}
                                            </option>
                                            <!-- <option *ngFor="let arr of settlementTypeArr" [value]="arr.Data_Value">
                                            {{ arr.Data_Value }}
                                        </option> -->
                                        </select>
                                    </div>
                                </div>

                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label></label>
                                    </div>
                                    <div style="position:relative;">
                                        <div class="relPosition">
                                            <div class="btngroup">
                                                <button [ngClass]="creditToggleYN==='Y'? 'Btn_Yes':'Btn_No'" (click)="CreditToggle('Y')" class="Btn">Ind.</button>
                                                <button [ngClass]="creditToggleYN==='N'? 'Btn_Yes':'Btn_No'"  (click)="CreditToggle('N')" class="Btn">Firm</button>
                                            </div>
                                        </div>
                                        <!-- <div class="toggleYNFull" (click)="CreditToggle()">
                                            <div class="toggleNFull " [ngClass]="this.creditToggleYN==='Y'? 'Select ':''">
                                                Ind.
                                            </div>
                                            <div class="toggleNFull" [ngClass]="this.creditToggleYN==='N'? 'Select ':''">
                                                Firm
                                            </div
                                        </div> -->
                                    </div>
                                </div>


                            </div>
                            <div class="flex-column">
                                <!-- Start BBVAEPCLI-679 New Credit Fields: UI changes || RadhaM || 28thAugust23 -->
                                <div class="label-row row-grid-2" *ngIf="cpnType==='Floating' || cpnType==='Fixed-Float' || cpnType==='Float-Fixed' " >
                                    <label class="box-header">Cap & Floor</label>
                                    <div class="btngroup">
                                        <button [ngClass]="capfloorYN==='Y'? 'Btn_Yes':'Btn_No'" (click)="this.capfloorYN='Y';capfloorToggle(this.capfloorYN,this.SolveForvalue);this.reset();" class="Btn">{{this.commonfunctions.Yes | translate}}</button>
                                        <button [ngClass]="capfloorYN==='N' ? 'Btn_Yes':'Btn_No'" (click)="this.capfloorYN='N';capfloorToggle(this.capfloorYN,this.SolveForvalue);this.reset();" class="Btn">{{this.commonfunctions.No | translate}}</button>
                                    </div>
                                    <!-- <div class="toggleYN" style="justify-content: end;">
                                        <div class="toggleN" style="width: 35px !important"
                                            (click)="this.capfloorYN='Y';capfloorToggle(this.capfloorYN,this.SolveForvalue);this.reset();"
                                            [ngClass]="this.capfloorYN == 'Y'?'Select':''">
                                            {{this.commonfunctions.Yes | translate}}</div>
                                        <div class="toggleN" style="width: 35px !important"
                                            (click)="this.capfloorYN='N';capfloorToggle(this.capfloorYN,this.SolveForvalue);this.reset();"
                                            [ngClass]="this.capfloorYN == 'N'?'Select':''">
                                            {{this.commonfunctions.No | translate}}</div>
                                    </div> -->
                                </div>
                                <!-- cap  -->
                                <div class="row-grid-2"  *ngIf="(cpnType==='Floating' || cpnType==='Fixed-Float' || cpnType==='Float-Fixed')">
                                    <div style="position:relative;">
                                        <label>Cap
                                        </label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" id="" [(ngModel)]="cappercent" (blur)="this.reset();this.cappercent = commonfunctions.setDecimal($event);" 
                                        [disabled]="SolveForvalue === 'Cap' || this.capfloorYN ==='N'" />
                                    </div>
                                </div>
                                 <!-- floor  -->
                                 <div class="row-grid-2"  *ngIf="(cpnType==='Floating' || cpnType==='Fixed-Float' || cpnType==='Float-Fixed')">
                                    <div style="position:relative;">
                                        <label>Floor
                                        </label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" id="" [(ngModel)]="floorpercent" (blur)="this.reset();this.floorpercent = commonfunctions.setDecimal($event); " 
                                        [disabled]="SolveForvalue === 'Floor' || this.capfloorYN ==='N' " />
                                    </div>
                                </div>
                                <!-- End BBVAEPCLI-679 New Credit Fields: UI changes || RadhaM || 28thAugust23 -->
                            </div>
                            
                        </div>
                    </div>
                </div>

                
            </div>
        </div>

        <div class="row-button-grid clearPriceDivheight" >
            <!-- <button class="button" (click)="Price()" tabindex="35" *ngIf="!this.viewOnly">Price</button> "-->

            <!-- Start - Added by Apurva K|| 25-Apr-2023||FIN1EURINT-219 -->
            <div class="btn-group btn-groupMargin"  (clickOutside)="priceoptionflag = false" *ngIf="!this.viewOnly">
               <!-- Added by Varsha G || 03-May-2023||FIN1EURINT-278 -->
               <button tabindex="42" class="button clearPriceMargin" (click)="this.reset()">Clear Price</button>
               <!-- ngIf condition added to resolve alignment issue in View functonality in RFQ Blotter -->
               <button type="button" class="button priceAll" tabindex="43" *ngIf="!this.viewOnly" [disabled]="priceBtnActive === 'N' || loadflag" (click)="Price()">
               
               
               <div class="price-with-loader">
                       {{ "Price All" | translate }}
                       <div class="txtAlignCenter" *ngIf="loadflag">
                           <div class="row priceall-loader loaderbox" >
                               <div class="col-12">
                                   <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                               </div>
                           </div>
                       </div>
                   </div>
               </button>
               
               <!-- <button type="button" (click)="priceOptions()"
                       class="btn btn-split dropdown-toggle dropdown-toggle-split"
                       style="height: 40px !important; font-size: 14px !important;" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false" [disabled]="priceBtnActive === 'N'"
                       *ngIf="!this.viewOnly">
                       <span class="sr-only">Toggle Dropdown</span>
                   </button>
                   <div class="ddl" style="top:45px;" *ngIf="priceoptionflag">
                       <div style="float: left;padding-left: 5px;">
                           <mat-icon
                               style="width:25px !important;height:25px !important;margin: 3px 5px 3px 10px;font-size: 24px!important;font-family: 'Material Icons' !important;">
                               schedule</mat-icon>
                       </div>
                       <div class="btndllList" (click)="showSchedulePopup()">Schedule Price</div>
                   </div> -->
           </div>
           <!-- <button class="button" tabindex="36" (click)="Save()" *ngIf="!this.viewOnly">Save</button> -->
                <!-- START || Added by SandipA for FIN1EURINT-46 || 11-Apr-2023 -->
                <!-- <div *ngIf="pageloadflag" class="loading" id="loading">
               
                   <img src="{{asseturl}}loading_dots.gif" alt="Loading..." class="loadingImg" >
                       
               </div> -->
               <!-- END || Added by SandipA for FIN1EURINT-46 || 11-Apr-2023 -->
       <!-- End - Added by Apurva K|| 25-Apr-2023||FIN1EURINT-219 -->

       <!-- Loader icon position changed by AdilP FIN1EURINT-506 || 05-07-2023 ||START -->
       <div class="pageload-overlay" *ngIf="pageloadflag">
           <div>
               <svg version="1.1" id="L4" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
           y="0px" [ngStyle]="{ width:  + '25px', height:  + '25px' }"
           class="pageLoadSvg" viewBox="0 0 100 100" enable-background="new 0 0 0 0"
           xml:space="preserve">
           <circle stroke="#a1a1a1" cx="55" cy="23" r="1.4" stroke-width="0.1" fill="var(--icon-active-bg)">
               <animate attributeName="opacity" dur="2s" values="0;1;0" repeatCount="indefinite" begin="0.1" />
           </circle>
           <circle stroke="#a1a1a1" cx="55" cy="23" r="1.5" stroke-width="0.1" fill="var(--icon-active-bg)">
               <animate attributeName="opacity" dur="2s" values="0;1;0" repeatCount="indefinite" begin="0.1" />
           </circle>
           </svg>
           </div>
       </div>
        <!-- Loader icon position changed by AdilP FIN1EURINT-506 || 05-07-2023 ||END -->

       <div class="relPosition">

           <!-- *ngIf=" (this.sortedAllPrices?.length > 0 && this.sortedAllPrices[0].Price !== '')|| timeoutMsg==='Timeout' || (orderID!=='' && this.viewOnly)" -->
           <div class="msgBox msgBoxborder" *ngIf="this.viewOnly && this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].Price !== ''">
               <div class="row reply-popup reply-popupBox">
                   <!-- Show Min/Max Limit on Reprice action - added by Priya L. on 25-Feb-2022 - assigned by Pranav D. -->
                   <div class="col-12" *ngIf="!this.viewOnly">
                       <span class="bestreply replyColor">
                               Best Reply &nbsp;: :
                           </span>

                   </div>
                   <div class="col-6" *ngIf="this.viewOnly">
                       <span class="bestreply replyColor">
                               Reply &nbsp;: :
                           </span>
                   </div>
                   <div class="col-6 txtAlignRight" *ngIf="this.viewOnly">
                       <span _ngcontent-bgr-c14="" class="bestreply MinMaxLimit" *ngIf="this.bestLPArray.minLimit !== undefined && this.bestLPArray.maxLimit !== undefined
                            && this.bestLPArray.minLimit !== '' && this.bestLPArray.maxLimit !== ''">
                               Min./Max. Limit: {{this.bestLPArray.minLimit | number:'1.2-2'}} /
                               {{this.bestLPArray.maxLimit | number:'1.2-2'}}</span>
                   </div>
                   <!-- <div class="col-10" style="text-align: right">
<span class="bestreply">
 <span class="bestPriceStyle" *ngIf="this.sortedAllPrices.length > 0">
   {{replySolveFor}} (%) : &nbsp;
   {{this.sortedAllPrices[0].Price === 'Rejected' || this.sortedAllPrices[0].Price === 'Unsupported' || this.sortedAllPrices[0].Price === 'Expired' || this.sortedAllPrices[0].Price === 'Cancelled' ? this.sortedAllPrices[0].Price :
   this.sortedAllPrices[0].Price | number:'1.2-2'}}
 </span>
</span>
<span class="errorMsg" *ngIf="timeoutMsg!==''">
 {{timeoutMsg}}
</span>
</div> -->
               </div>
               <div class="row reply-popup reply-popupBox">
                   <div class="col-6">
                       <span class="bestreply">
                               <span class="bestPriceStyle" *ngIf="this.sortedAllPrices?.length > 0">
                                   {{this.sortedAllPrices[0].lp}}
                               </span>
                       </span>
                   </div>
                   <div class="col-6">
                       <span class="bestreply">
                               <span class="bestPriceStyle" *ngIf="this.sortedAllPrices?.length > 0">
                                   {{this.sortedAllPrices[0].Price === 'Rejected' ||
                                   this.sortedAllPrices[0].Price === 'Unsupported' ||
                                   this.sortedAllPrices[0].Price === 'Expired' ||
                                   this.sortedAllPrices[0].Price === 'Cancelled' ||
                                   this.sortedAllPrices[0].Price === '-' ?
                                   this.sortedAllPrices[0].Price :
                                   this.sortedAllPrices[0].Price | number:'1.2-2'}}
                               </span>
                       </span>
                   </div>
               </div>
           </div>
           <!-- <div style="text-align: center;" *ngIf="loadflag">
               <div class="row" style="padding: 0 auto !important;margin: 0;">
                   <div class="col-12">
                       <img src="{{asseturl}}loading_dots.gif" alt="" width="100px" style="margin-top: -40px;">
                   </div>
               </div>
           </div> -->
       
       </div>
       <div class="ViewModebtn">
           <!-- <button class="button" *ngIf="this.viewOnly" (click)="cloneSinglePricer()"
           style="pointer-events: all;" >Clone</button> -->


      


           <!-- [ngClass]="TSFlag ? 'button viewButton' : 'button'" tabindex="38" -->
           <!-- (click)="PriceLP(this.sortedAllPrices[0].lp);postBackMethod()" -->
           <button class="button btnPointer" *ngIf=" (this.viewOnly)" (click)="PriceLP(LPfromPrevQuote);postBackMethod()" [disabled]="sendtoCptyBookOrder">Reprice</button>
           <!-- Modified css to show cursor pointer || PriyaL || 12Apr2022 || Assigned by Pranav D.  -->
           <button class="button btnPointer" *ngIf="this.viewOnly && this.sortedAllPrices?.length > 0 && this.sortedAllPrices[0].Price!==''
               && sortedAllPrices[0].Price !== '-' && sortedAllPrices[0].Price !=='Timeout' && sortedAllPrices[0].Price > 0 && !sendtocptyflag" (click)="emailQuote(sortedAllPrices[0].rfq)">Mail best Quote</button>
           <!-- <button class="button" style="pointer-events:all;height: 35px !important;margin: 0.5em !important;" (click)="emailQuote(sortedAllPrices[0].rfq)">Mail
               best Quote</button> -->
           <!-- <button class="button" *ngIf=" (this.viewOnly)"
                   (click)="lauchProduct(this.sortedAllPrices[0])" style="pointer-events: all;height: 35px !important;">Launch
                   Product</button> -->
               <!-- Quote status check added by Jyoti S || FIN1EURINT-576 || 08-Aug-2023 || START -->
           <button class="button btnPointer" tabindex="44" (click)="RequestTermsheet();postBackMethod();" *ngIf="(this.viewOnly && this.sortedAllPrices?.length > 0 && !this.sortedAllPrices[0].TSFlag && !sendtocptyflag && (orderStatus == 'Active' || orderStatus == 'Pending Reprice' || orderStatus == 'Order Placed' || orderStatus == 'Pool Created'))" [disabled]="!(docSupportStatus[this.sortedAllPrices[0].lp]?.['Indicative_Termsheet'] === 'Y') || this.sortedAllPrices[0].TSDisableFlag" >
               <div class="price-with-loader priceLoader">
                   Request TS
                   <div class="txtAlignCenter" *ngIf="this.sortedAllPrices[0].TSLoadFlag">
                       <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="ReqLoader"> 
                   </div>
               </div>
               </button> <!-- Changed by Jyoti S || 31-May-2023 -->
           <button id="btnViewTS" class="btnPointer" [ngClass]="this.sortedAllPrices[0].TSFlag ? 'button viewButton' : 'button'" tabindex="45" (click)="ViewTermsheet()" *ngIf="(this.viewOnly && this.sortedAllPrices?.length && this.sortedAllPrices[0].TSFlag && !sendtocptyflag && (orderStatus == 'Active' || orderStatus == 'Pending Reprice' || orderStatus == 'Expired' || orderStatus == 'Order Placed' || orderStatus == 'Pool Created'))">
               <div class="price-with-loader priceLoader">
                   View TS
                   <div class="txtAlignCenter" *ngIf="this.sortedAllPrices[0].ViewTSFlag">
                       <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="ReqLoader"> 
                   </div>
               </div></button><!-- Changed by Jyoti S || 31-May-2023 -->
           <button class="button btnPointer" tabindex="46" (click)="RequestKIDonView()" [disabled]="priipsYN === 'No'" *ngIf="(this.viewOnly && this.sortedAllPrices?.length && !this.sortedAllPrices[0].KIDFlag && !sendtocptyflag && (orderStatus == 'Active' || orderStatus == 'Pending Reprice' || orderStatus == 'Order Placed' || orderStatus == 'Pool Created'))" [disabled]="!(docSupportStatus[this.sortedAllPrices[0].lp]?.['KID'] === 'Y') || this.sortedAllPrices[0].KIDDisableFlag">
               <div class="price-with-loader priceLoader">
                   Request KID
                   <div class="txtAlignCenter" *ngIf="this.sortedAllPrices[0].KIDLoadFlag">
                       <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="ReqLoader"> 
                   </div>
               </div>
               </button><!-- Changed by Jyoti S || 31-May-2023 -->
           <button id="btnViewTS" class="btnPointer" [ngClass]="this.sortedAllPrices[0].KIDFlag ? 'button viewButton' : 'button'" tabindex="47" (click)="ViewKIDonView()" *ngIf="(this.viewOnly && this.sortedAllPrices?.length && this.sortedAllPrices[0].KIDFlag && !sendtocptyflag && (orderStatus == 'Active' || orderStatus == 'Pending Reprice' || orderStatus == 'Expired' || orderStatus == 'Order Placed' || orderStatus == 'Pool Created'))">
               <div class="price-with-loader priceLoader">
                   View KID
                   <div class="txtAlignCenter" *ngIf="this.sortedAllPrices[0].ViewKIDFlag">
                       <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="ReqLoader"> 
                   </div>
               </div></button><!-- Changed by Jyoti S || 31-May-2023 -->
           <button id="btnViewTS" class="button btnPointer" tabindex="48" (click)="sendordertocounterparty()" *ngIf="this.sortedAllPrices?.length > 0 && this.sortedAllPrices[0].Price!==''
                   && sortedAllPrices[0].Price !== '-' && sortedAllPrices[0].Price !=='Timeout' && sortedAllPrices[0].Price > 0 && sendtocptyflag" [disabled]="!shwRepriceBookOrder || sendtoCptyBookOrder">Book Order
                   <!-- [disabled]="!priceClickFlag" -->
               </button>
               <!-- Quote status check added by Jyoti S || FIN1EURINT-576 || 08-Aug-2023 || END -->
       </div>
       <div class="relPosition">

           <!-- <div class="msgBox" style="border: 1px solid rgb(105, 105, 105); border-radius: 5px; " *ngIf="((this.sortedAllPrices?.length > 0 && this.sortedAllPrices[0].Price!=='') && !saveFlag && !quoteEmailFlg) || (orderID!==''  && this.viewOnly) "> -->

           <!-- *ngIf="((this.sortedAllPrices?.length > 0 && this.sortedAllPrices[0].Price!=='') && !saveFlag) || (orderID!==''  && this.viewOnly)" -->
           <div class="msgBox msgBoxStyle" *ngIf="this.viewOnly && this.sortedAllPrices?.length > 0 && this.sortedAllPrices[0].Price !== ''">
               <div class="row reply-popup reply-popupBox">
                   <div class="col-4">
                       <span>
                               Cpty Ref
                           </span>
                   </div>
                   <div class="col-8">
                       <span>{{orderID}}</span>
                   </div>
               </div>
               <div class="row reply-popup reply-popupBox" *ngIf="sendtocptyflag">
                   <div class="col-4">
                       <span>
                               Quote Req Id
                           </span>
                   </div>
                   <div class="col-8">
                       <span>{{this.sortedAllPrices[0].rfq}}</span>
                   </div>
               </div>
               <div class="row reply-popup reply-popupBox">
                   <div class="col-4">
                       <span>
                               Status
                           </span>
                   </div>
                   <div class="col-8">
                       <span>{{orderStatus}}</span>
                   </div>
               </div>
               <div class="row reply-popup reply-popupBox" *ngIf="reqSuccessMsg">
                   <div class="col-4">
                       <span>
                               Termsheet
                           </span>
                   </div>
                   <!-- <div class="col-8" style="color: rgb(28, 56, 97);"> -->
                   <div class="col-8">
                       {{reqSuccessMsg}}
                   </div>
               </div>
           </div>


           <div class="msgBox QuoteReqId" *ngIf="this.viewOnly && (this.sortedAllPrices?.length == 0 || (this.sortedAllPrices[0] && this.sortedAllPrices[0].Price === '')) && sendtocptyflag">
               <div class="row reply-popup reply-popupBox" *ngIf="sendtocptyflag">
                   <div class="col-4">
                       <span>
                               Quote Req Id
                           </span>
                   </div>
                   <div class="col-8">
                       <span>
                               <!-- {{viewRFQ}}**** old RFQ -->
                               {{rfqID}}
                           </span>
                   </div>
               </div>
           </div>

           <div class="emailMsg">
               <!-- <span class="successMsg" *ngIf="saveFlag || quoteEmailFlg">{{successMsg}} </span> -->
               <!-- <span class="successMsg" *ngIf="saveFlag">{{successMsg}} </span> -->
               <span class="successMsg" *ngIf="quoteEmailFlg">{{successMsg}} </span>
               <!-- <span class="successMsg"> "Quote Mail Initiated"</span> -->
           </div>
       </div>
   </div>

   <div class="row">
       <!-- *ngFor="let sortedPrice of this.lpArr" -->
       <div class="lpFlex" *ngIf="!viewOnly">
           <!-- <div class="bestlp" *ngIf="this.bestLPArray"> -->
               <div class="card">
                   <div [ngClass]="this.bestLPArray?.length !== 0 ? 'bestlpHighlight' : 'bestlp'" *ngIf="this.bestLPArray">
                       <div class="divbestLP">
                           <!-- <h6>{{this.bestLPArray.lp}}</h6> -->
                           <!-- <div style="display: grid; grid-template-columns: 10% auto;"> -->
                           <!-- <input type="checkbox" /> -->
                           <!-- [(ngModel)]="chkDateRange" (change)="chngChkBox()" disabled -->
                           <div class="lp-box-name">
                           <h6 class="hdrBest">Best</h6>
                           </div>
                           <!-- </div> -->
                           <div class="LPheight">
                               <span class="rfqFont">{{this.bestLPArray.rfq}}</span>
                           </div>
                          
                           <div class="LPheight">
                               <span *ngIf="this.bestLPArray.timer" class="pricer-timer">{{this.bestLPArray.timer}}
                                   </span>
                           </div>
                           <!-- <div style="width: 95%; display: flex; justify-content: space-between; align-items: center;">
                               <h5 ></h5>
                               <div class="infocarddiv">
                               <div class="infodiv"></div>
                               </div>
                           </div>
                           <h5></h5> -->

                           <!-- <br *ngIf="!this.bestLPArray.timer" /> -->
                           <div class="divRejectedPrice"></div>
                           <div class="divActiveStatus">
                               <div></div>
                               <!-- Changes done by Apurva K|| 25-Apr-2023|| FIN1EURINT-219|| inline css:;height: 3em; -->
                               <h5 class="priceColor hdrBestPrice" [ngClass]="(this.bestLPArray.price === 'Rejected') ? 'infocard' : ''">
                                   {{(this.bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || this.bestLPArray?.length
                                   < 1 || bestLPArray.price==='-' || this.bestLPArray.price==='Timeout' ) ? this.bestLPArray.price : this.bestLPArray.price | number: '1.2-2'}} </h5>
                                       <!-- <div class="infocarddiv" *ngIf="(this.bestLPArray.status === 'REJECTED' || this.bestLPArray.status === 'Rejected') && this.bestLPArray.remark !==''">
                                           <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                                   {{ this.bestLPArray.remark}}
                                               </span>
                                       </div> -->
                                       <!-- <div class="infocarddiv" style="margin-bottom: 37px;" *ngIf="(this.bestLPArray.status === 'Active'  && this.bestLPArray.remark !=='' && this.bestLPArray.price !== '-')"> -->
                                       <div class="infocarddiv LPheight" *ngIf="(this.bestLPArray.status === 'Active'  && this.bestLPArray.remark !=='' && this.bestLPArray.price !== '-')">
                                           <!-- <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                                   {{ p.remark}}
                                               </span> -->
                                               <!--Added by Varsha G || FIN1EURINT-188 || 21-Apr-2023-->
                                               <img src="{{asseturl}}information.png" class="info imgInfo" *ngIf="this.bestLPArray.remark !==''">
                                               <div class="infodiv" *ngIf="this.bestLPArray.remark !==''">
                                                   <span class="infoNote spnRemark" *ngIf="this.bestLPArray.remark !==''">
                                                           {{this.bestLPArray.remark}}
                                                   </span>
                                               </div>
                                       </div>
                           </div>
                       <div class="divAdjustedPrice">
                           <span class="txtAdjust" *ngIf="this.bestLPArray.isSpreadEntityYN === 'Y'">Adjusted</span>
                           <h4 class="priceColor hdrPriceFont" *ngIf="this.bestLPArray.isSpreadEntityYN === 'Y'">
                               {{(this.bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || this.bestLPArray.length
                               < 1 || bestLPArray.price==='-' || this.bestLPArray.price==='Timeout' ) ? this.bestLPArray.modifiedValue : this.bestLPArray.modifiedValue | number:'1.2-2'}}
                           </h4>
                      </div>
                           <!-- <h5>
                               <div style="text-align: center;">
                                   <div class="row"></div>
                               </div>
                           </h5> -->
                                   <!-- <br
                                       *ngIf="bestLPArray.price == '' || bestLPArray.price ==='Timeout' || bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || bestLPArray.price < 0" /> -->
                                   <h5 class="priceColor hdrPriceFont"></h5>
                                   <h5 class="priceColor hdrPriceFont"></h5>
                                   <h5 class="priceColor hdrPriceFont"></h5>
                                   <h6 class="hdrBestLpTsMsg">{{this.bestLPArray.TSMsg}}</h6> <!-- Changed by AdilP @09-05-2023 || FIN1EURINT-291  -->
                                   <h6 class="hdrBestLPMsg" [ngStyle]="{'margin-bottom':this.bestLPArray.length !== 0 ? '25px' : '54px' }">{{this.bestLPArray.Msg}}</h6>
                                   <h6 class="hdrTsMsg"></h6>
                                   <!-- <div style="height: 20px;">
                                       <a *ngIf="bestLPArray && bestLPArray.price && bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price !== 'Rejected' && this.bestLPArray.price !== 'Unsupported' && this.bestLPArray.price !== 'Expired'  && bestLPArray.price > 0"
                                           class="quoteMailLabel" (click)="emailQuote(bestLPArray.rfq)">Mail</a>
                                   </div> -->

                                   <!-- <br
                                       *ngIf="bestLPArray && bestLPArray.price && bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price !== 'Rejected' && bestLPArray.price !== 'Unsupported' && bestLPArray.price !== 'Expired' && bestLPArray.price !== 'Cancelled' && bestLPArray.price > 0">
                                   <br
                                       *ngIf="bestLPArray === undefined || bestLPArray.length <=0 || bestLPArray.price == '' || bestLPArray.price ==='Timeout' || bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || bestLPArray.price < 0" /> -->
                                   <!-- <div style="height: 20px;">     -->

                                   <!-- Added by Apurva K|| 25-Apr-2023||FIN1EURINT-219 -->
                                       <button class="button bestLpBtnMail" [disabled]="(bestLPArray?.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq) || bestLPArray.timer === 0)" 
                                       (click)="emailQuote(bestLPArray.rfq)">Mail</button>
                                   <!-- </div> -->
                                       <!-- Changed by Amogh K | 19apr2022 | request TS config check | assigned by pranav D -->
                                   
                                   <button class="button btnMinWidth" [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq) || bestLPArray.timer === 0 || bestLPArray.TSNotSupported||bestLPArray.TSFlag|| bestLPArray.TSDisableFlag)"
                                       *ngIf="(EQ_Show_Termsheet_Button === 'YES' || EQ_Show_Termsheet_Button === 'Y' || EQ_Show_Termsheet_Button === 'Yes')" (click)="RequestTS(bestLPArray.idx)">Request
                                           TS</button>
                                   <button class="button btnViewTSandKID" *ngIf="bestLPArray.TSFlag" (click)="ViewTS(bestLPArray.idx)"> 
                                       <div class="price-with-loader divMarginLeft">
                                       View TS
                                           <div class="txtAlignCenter" *ngIf="bestLPArray.ViewTSFlag">
                                               <div class="row priceall-loader loaderbox" >
                                                   <div class="col-12">
                                                       <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                   </div>
                                               </div>
                                           </div>
                                       </div>
                                   </button><!-- Changed by Jyoti S || 25-May-2023 -->
                                   <!-- Changed by Amogh K | 21apr2022 | request KID config check | assigned by pranav D -->
                                   <button class="button btnMinWidth" [disabled]="(bestLPArray?.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq) || priipsYN === 'No' || bestLPArray.timer === 0 || bestLPArray.KidDisableFlag || bestLPArray.KidNotSupported)"
                                       *ngIf="(EQ_Show_KID_Button === 'YES' || EQ_Show_KID_Button === 'Y' || EQ_Show_KID_Button === 'Yes')" (click)="RequestKID(bestLPArray.idx)">Request
                                           KID</button>
                                   <button class="button btnViewTSandKID" *ngIf="bestLPArray.KIDFlag" (click)="ViewKID(bestLPArray.idx)">
                                       <div class="price-with-loader divMarginLeft">
                                           View KID
                                               <div class="txtAlignCenter" *ngIf="bestLPArray.ViewKIDFlag">
                                                   <div class="row priceall-loader loaderbox" >
                                                       <div class="col-12">
                                                           <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                       </div>
                                                   </div>
                                               </div>
                                           </div>
                                   </button>
                                   <!-- <button class="bookBtn"
                               [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq))"
                               style="min-width: 8em;"
                               [routerLink]="['/PreviousQuotesNew',{RFQ_ID:bestLPArray.rfq,Template_Code:'EQC_Europe',RedirectedFrom:'Pricers',Mode:'Launch Product'}]"
                               routerLinkActive="active-link">Launch Product</button> -->
                                   <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                                   <button class="button btnMinWidth" *ngIf="isDealer && (EQ_Show_Launch_Button === 'YES' || EQ_Show_Launch_Button === 'Y' || EQ_Show_Launch_Button === 'Yes')" [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq) || bestLPArray.timer === 0)"
                                       (click)="lauchProduct(bestLPArray)">Launch
                                           Product</button>
                                   <!-- <button class="bookBtn" style="min-width: 8em;" *ngIf="!viewOnly"
                                       (click)="PriceLP(bestLPArray.lp)"
                                       [disabled]="!bestLPArray.priceChkFlg">Price
                                   </button> -->
                                   <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                                   <button class="button btnMinWidth" [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' 
                               || bestLPArray.timer === '' || bestLPArray.timer === 0 || (viewOnly && viewRFQ !== bestLPArray.rfq)) || !bookOrderFlag || (bestLPArray.lp == this.OrderDisabledCpty && BookOrderDisabledForCpty)" (click)="showOrderDetails(bestLPArray.lp,bestLPArray.rfq,bestLPArray);postBackMethod();"
                                       *ngIf="!viewOnly && (EQ_Show_Order_Button === 'YES' || EQ_Show_Order_Button === 'Y' || EQ_Show_Order_Button === 'Yes')">Book
                                           Order</button>




                       </div>
                       <div>
                           <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 start -->
                           <!-- <br /> -->
                           <span *ngIf="bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price > 0" class="minMaxLimitFont">
                                   {{this.eccommon.nFormatter(bestLPArray.minLimit)}}</span>&nbsp;
                           <span *ngIf="bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price > 0">/</span>&nbsp;
                           <span *ngIf="bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price > 0" class="minMaxLimitFont">
                                   {{this.eccommon.nFormatter(bestLPArray.maxLimit)}}</span>
                           <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 end -->

                       </div>
                   </div>
               </div>
               
           <!-- <div [ngClass]="this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].lp === p.lp ? 'selectedlp' : 'lpname'" -->
            <div class="cards-section">
                <div [ngClass]="this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].lp === p.lp ? 'selectedlp' : 'lpname'" *ngFor="let p of this.priceProvidersArr, let i = index;">
                    <!-- <div style="display: flex; flex-direction: column; justify-content: flex-start;align-items: center;align-self: center; gap: 5px;" [ngClass]="{ 'lp-loading' : p.loadFlag == true}"> -->
                    <div class="divbestLP">
                        <div class="lp-box-name">
                            <input type="checkbox" [checked]="p.priceChkFlg" (change)="chngPriceChkBox(i)" class="lpNameWidth" />
                            <h6 class="lp-name">{{p.lp}}</h6>
                        </div>
                        <div class="LPheight">
                            <span class="rfqFont">{{p.rfq}}</span>
                        </div>
                        <div class="timer-icon LPheight">
                            <app-svg-icons *ngIf="p.price !== '-'" [icon]="'clock-icon'" [width]="'10'" [height]="'10'">
                            </app-svg-icons>
                            <span class="spntimerHeight" [ngClass]="p.timer <= 10 && p.timer > 0 ? 'timerTimeout':'timer-text'" >{{(p.timer
                                ===
                                this.defaultTimeout) || (p.price === '-' || p.price === '' || p.price === 0 || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout') ? '' : p.timer}}</span>
                        </div>
                        <!-- ngclass added to timer for blinking effect || Jyoti S || 25-Apr-2023 -->

                        <!-- <br *ngIf="p.timer===this.defaultTimeout" /> -->
                        <!-- <br
                                *ngIf="p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled'" /> -->
                        <div class="divRejectedPrice">
                            <h5 class="priceColor hdrRejectedPrice" *ngIf="p.price === 'Rejected'">
                                {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>
                            <div class="infocarddiv" *ngIf="(p.status === 'REJECTED' || p.status === 'Rejected') && (p.price === 'Rejected') && p.remark !==''">
                                <!-- <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                        {{ p.remark}}
                                    </span> -->
                                    <!--Added by Varsha G || FIN1EURINT-188 || 21-Apr-2023-->
                                    <img src="{{asseturl}}information.png" class="info ReqLoader" *ngIf="p.remark !==''">
                                    <div class="infodiv" *ngIf="p.remark !==''">
                                        <span class="infoNote spnRemarkInfo" *ngIf="p.remark !==''">
                                                {{p.remark}}
                                        </span>
                                    </div>
                            </div>
                        </div>
                        <h5 class="priceColor hdrPriceFont" *ngIf="p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout'">
                            {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>
                        <!-- <h5 class="priceColor" style="font-size: 20px !important" *ngIf="p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price !== 'Timeout'"> -->
                        <div class="divActiveStatus">
                            <div></div>
                            <h5 class="priceColor hdrActiveStatus" *ngIf="p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price !== 'Timeout' && p.price !== '-'">
                                {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>
                                <div class="infocarddiv" *ngIf="(p.status === 'Active'  && p.remark !=='' && p.price !== '-')">
                                    <!-- <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                            {{ p.remark}}
                                        </span> -->
                                        <!--Added by Varsha G || FIN1EURINT-188 || 21-Apr-2023-->
                                        <img src="{{asseturl}}information.png" class="info imgInfo" *ngIf="p.remark !==''">
                                        <div class="infodiv" *ngIf="p.remark !==''">
                                            <span class="infoNote spnRemark" *ngIf="p.remark !==''">
                                                    {{p.remark}}
                                            </span>
                                        </div>
                                </div>
                        </div>
                            <div class="divAdjustedPrice">
                                <span class="txtAdjust" *ngIf="p.isSpreadEntityYN === 'Y'">Adjusted</span>
                                <h4 class="priceColor hdrPriceFont" *ngIf="p.isSpreadEntityYN === 'Y'">
                                     {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.modifiedValue : p.modifiedValue | number:'1.2-2'}}
                                </h4>
                            </div>
                        <h5 class="priceColor hdrPriceFont" *ngIf="!p.loadFlag && p.price === '-'">
                            {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>    
                        <div class="txtAlignCenter" *ngIf="p.loadFlag">
                            <div class="row loaderbox" >
                                <div class="col-12">
                                    <img src="{{asseturl}}loading_dots.gif" alt="" width="50px" height="54px" class="imgMargin">
                                </div>
                            </div>
                        </div>
                        <!-- <br> -->
                        <!-- <br *ngIf="p.Msg===''">
        <br *ngIf="p.TSMsg===''"> -->
                        <h6 class="hdrTsMsg">{{p.TSMsg}}</h6>
                        <h6 class="hdrMsg">{{p.Msg}}</h6>
                        <h6 class="hdrMsg">{{p.MatchSentMsg}}</h6> <!-- HSBCECCLI-32 || Apurva K || 18-Jan-2024 -->
                        <!-- <h6  style="height: 2em;" *ngIf="p.TSMsg!==''">{{p.TSMsg}}</h6>
        <h6  style="height: 2em;" *ngIf="p.Msg!==''">{{p.Msg}}</h6> -->
                        <!-- <a *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price > 0"
            class="quoteMailLabel" (click)="emailQuoteLP(p.rfq)">Mail</a><br> -->
                        <div class="divMail">
                            <a *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price > 0 && p.timer !== 0" class="quoteMailLabel" (click)="emailQuote(p.rfq)">Mail</a>
                            <a *ngIf="p.price ==='Timeout' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled'" class="quoteMailLabel mailLabelHeight"></a>
                        </div>
                        <!-- <br
                                *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price > 0">
                            <br
                                *ngIf="p.price === '-' || p.price === '' || p.price ==='Timeout' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled'|| p.price < 0" /> -->
                        <!-- Changed by Amogh K | 19apr2022 | request TS config check | assigned by pranav D -->
                        
                         <!--Start - Changes done by Apurva K|| 26-Apr-2023||FIN1EURINT-246 -->
                        <button class="button btnMinWidth" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq) || (p.timer == 0))|| p.TSFlag|| p.TSDisableFlag || p.TSNotSupported" 
                        *ngIf="(EQ_Show_Termsheet_Button === 'YES' || EQ_Show_Termsheet_Button === 'Y' || EQ_Show_Termsheet_Button === 'Yes')"
                            (click)="RequestTS(i);postBackMethod();">
                                <div class="price-with-loader">
                                   Request
                                TS
                                    <div class="txtAlignCenter" *ngIf="p.TSLoadFlag">
                                        <div class="row priceall-loader loaderbox" >
                                            <div class="col-12">
                                                <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </button>
                            <!--End - Changes done by Apurva K|| 26-Apr-2023||FIN1EURINT-246 -->
                        <button class="button btnViewTSandKID" *ngIf="p.TSFlag" (click)="ViewTS(i)"> 
                            <div class="price-with-loader divMarginLeft">
                            View TS
                                <div class="txtAlignCenter" *ngIf="p.ViewTSFlag">
                                    <div class="row priceall-loader loaderbox" >
                                        <div class="col-12">
                                            <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                        </div>
                                    </div>
                                </div>
                            </div></button><!-- Changed by Jyoti S || 25-May-2023 -->
                        <!--Start - Changes done by Apurva K|| 09-May-2023||As suggested by Nitish K  -->
                        <button class="button btnMinWidth" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq) || priipsYN === 'No' || p.timer === 0)|| p.KIDFlag || p.KidDisableFlag || p.KidNotSupported" 
                            *ngIf="(EQ_Show_KID_Button === 'YES' || EQ_Show_KID_Button === 'Y' || EQ_Show_KID_Button === 'Yes')"
                            (click)="RequestKID(i)">
                            <div class="price-with-loader">
                            Request
                                KID
                                <div class="txtAlignCenter" *ngIf="p.KIDLoadFlag">
                                    <div class="row priceall-loader loaderbox" >
                                        <div class="col-12">
                                            <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </button>
                        <!--End - Changes done by Apurva K||09-May-2023||As suggested by Nitish K -->

                        <button class="button btnViewTSandKID" *ngIf="p.KIDFlag" (click)="ViewKID(i)" [disabled]="p.ViewKIDFlag">
                            <div class="price-with-loader divMarginLeft">
                                View KID
                                    <div class="txtAlignCenter" *ngIf="p.ViewKIDFlag">
                                        <div class="row priceall-loader loaderbox" >
                                            <div class="col-12">
                                                <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                            </div>
                                        </div>
                                    </div>
                                </div></button>
                        <!-- <button class="button"
                        [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq))"
                        style="min-width: 8em;"
                        [routerLink]="['/PreviousQuotesNew',{RFQ_ID:p.rfq,Template_Code:'EQC_Europe',RedirectedFrom:'Pricers',Mode:'Launch Product'}]"
                        routerLinkActive="active-link">Launch Product</button> -->
                        <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                        <button class="button btnMinWidth" *ngIf="isDealer && (EQ_Show_Launch_Button === 'YES' || EQ_Show_Launch_Button === 'Y' || EQ_Show_Launch_Button === 'Yes')" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq) || p.timer === 0)"
                            (click)="lauchProduct(p)">Launch Product</button>
                        <button class="button btnMinWidth" *ngIf="!viewOnly" (click)="PriceLP(p.lp)" [disabled]="!p.priceChkFlg || p.loadFlag">
                            <!-- <div class="price-with-loader"> -->
                                {{ "Price" | translate }}
                                <!-- <div style="text-align: center;" *ngIf="p.loadFlag">
                                    <div class="row" style="padding: 0 auto !important;margin: 0;">
                                        <div class="col-12">
                                            <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" style="margin-top: -40px; width: 15px; height: 15px;">
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                        </button>

                        <!-- Added by Apurva K||10-Aug-2023||HSBCECCLI-32 -->
                        <!-- Modified by Apurva K|| 11-Mar-2024|| FIN1EURINT-704 -->
                        <button tabindex="43" id="auto_trigger_RFM" class="button btnMinWidth" #RFM 
                        *ngIf="this.matchBtnFlag && p.lp == this.EQ_PriceMatch_LPName &&(p.price != 'Rejected' || p.price != 'Unsupported'|| p.price != 'Expired'||p.price != 'Cancelled' || p.price != 'Timeout')" 
                        [disabled]="(p.MatchBtnDisable || (p.price == 'Rejected' || p.price == 'Unsupported'|| p.price == 'Expired'||p.price == 'Cancelled' || p.price == 'Timeout'))" 
                        style="display: none;" (click)="Match(i)">
                                {{"Match" | translate }}
                        </button>

                        <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                        <button class="button btnMinWidth" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' 
                        || p.timer === '' || p.timer === 0  || (viewOnly && viewRFQ !== p.rfq) || !bookOrderFlag)|| (p.lp == this.OrderDisabledCpty && this.BookOrderDisabledForCpty)" (click)="showOrderDetails(p.lp,p.rfq,p);postBackMethod();" *ngIf="!viewOnly && (EQ_Show_Order_Button === 'YES' || EQ_Show_Order_Button === 'Y' || EQ_Show_Order_Button === 'Yes')">Book
                                Order</button>


                    </div>
                    <div>
                        <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 start -->
                        <!-- <br /> -->
                        <span *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price > 0" class="minMaxLimitFont">
                                {{this.eccommon.nFormatter(p.minLimit)}}</span>&nbsp;
                        <span *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price > 0">/</span>&nbsp;
                        <span *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price > 0" class="minMaxLimitFont">
                                {{this.eccommon.nFormatter(p.maxLimit)}}</span>
                        <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 end -->

                    </div>



                </div>
            </div>
               
       </div>

   </div>

   <!-- <div *ngIf="showOrderDetailsFlag" style="display: none !important;">
<div class="row" style="padding-top:1em !important;">
   <label style="background-color:rgba(243, 241, 241, 0.527);  font-size: 25px !important; width:100%;color: var(--header);">Order
Details</label>
</div>


<div class="row" style="padding-top: 0 !important;">
   <div class="col-lg-6 col-md-12 col-sm-12" style="width: 45vw !important;">
       <div class="row">
           <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12">
               <label class="disabledlbl">Issuer</label>
           </div>
           <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12">
               <input type="text" class=" floatMiddle" disabled="disabled" value="{{ Issuer }}" />
           </div>
           <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12">
               <label>Booking Branch</label>
           </div>
           <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12">
               <select [(ngModel)]="selectedBookingBranch">

 <option value="London">London</option>
<option value="Madrid">Madrid</option>

</select>
           </div>
       </div>

       <div class="row">

           <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12">
               <label>Order Type</label>
           </div>
           <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12">
               <select [(ngModel)]="OrderType">
 <option value="Limit">Limit</option>
 <option value="Market">Market</option>
 <option value="Market">MOC</option>
 <option value="Market">VWAP</option>
</select>
           </div>
           <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12">
               <label>Limit Level</label>
           </div>
           <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12">
               <select *ngIf="ShareBasket && OrderType === 'Limit'" style="max-width: 6em;">
 <option *ngFor="let sharearr of ShareBasket" [selected]="ShareBasket[ShareBasket.length-1].Name"
   [value]="sharearr.Code">
   {{ sharearr.Code }}</option>
</select>
               <input type="text" [ngClass]="OrderType === 'Limit' ? 'limitAmtWidth' : '' " [(ngModel)]="LimitAmount" [disabled]="OrderType !== 'Limit'" value="0" maxlength="10" (keypress)="commonfunctions.InputNumber($event)" />
           </div>
       </div>
       <div class="row">


       </div>


   </div>

   <div class="col-lg-6 col-md-12 col-sm-12" style="width: 45vw !important;">


       <div class="row">
           <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12">
               <label>Order Notional ({{ (ddlNoteCcy) }})</label>
           </div>
           <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12">
               <input type="text" class=" floatMiddle" value="{{totalNotional}}" [(ngModel)]="totalNotional" />
           </div>

       </div>



       <div class="row">


       </div>





   </div>
</div>


<div class="row" style="padding-top:1em !important;">
   <div id="blotterDiv" class="col-12">
   </div>
</div>
<div class="row" style="padding-top:2em !important;">
   <div class="col-xl-3 col-lg-4 col-md-8 col-sm-6 col-xs-12">

   </div>
   <div class="col-xl-4 col-lg-4 col-md-8 col-sm-6 col-xs-12" style="text-align: center;">
       <button class="button" (click)="bookOrder()">Confirm2</button>


       <button class="button" (click)="hideOrderDetails()">Cancel</button>
   </div>

   <div class="col-xl-4 col-lg-4 col-md-8 col-sm-12 col-xs-12">
       <span class="errorMsg">{{ErrorMsg1}}</span>
       <span class="successMsg">{{ordersuccessMsg}}</span>
   </div>
</div>

</div> -->

   <div *ngIf="poolDetailsVisibleFlag">
       <div class="row divPoolDetails">
           <label class="lblPoolDetails">Pool
                   Details</label>
       </div>


       <div class="row rowpaddingTop">
           <div class="col-lg-6 col-md-12 col-sm-12 divRowWidth">
               <div class="row">
                   <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                       <label>Pool Activation Date</label>
                   </div>
                   <div class="col-xl-9 col-lg-9 col-md-6 col-sm-12 col-xs-12">
                       <input type="text" class="divActivePoolWidth" [(ngModel)]="poolActivateDate" id="txtpoolActivateDate" value="{{poolActivateDate}}">

                   </div>

               </div>

               <div class="row">

                   <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12">
                       <label>Min Notional</label>
                   </div>
                   <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12">
                       <!-- <label>{{minPoolNotional}}</label> -->
                       <input type="text" [(ngModel)]="minPoolNotional" id="txtminPoolNotional" value="{{minPoolNotional}}">
                   </div>
                   <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12">
                       <label>Max Notional</label>
                   </div>
                   <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12">

                       <input type="text" [(ngModel)]="maxPoolNotional" id="txtmaxPoolNotional" value="{{maxPoolNotional}}">

                   </div>
               </div>
               <div class="row">


               </div>


           </div>

           <!-- right col -->
           <div class="col-lg-6 col-md-12 col-sm-12 divRowWidth">


               <div class="row">
                   <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                       <label>Pool Expiry Date</label>
                   </div>
                   <div class="col-xl-9 col-lg-9 col-md-6 col-sm-12 col-xs-12">
                       <input type="text" class="divActivePoolWidth" [(ngModel)]="poolExpiryDate" id="txtpoolExpiryDate" value="{{poolExpiryDate}}">
                   </div>

               </div>


               <div class="row">
                   <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12">
                       <label>Min Order Size</label>
                   </div>
                   <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12">
                       <!-- <label> {{ minOrderSize }}</label> -->
                       <input type="text" [(ngModel)]="minOrderSize" id="minOrderSize" value="{{minOrderSize}}">

                   </div>

                   <div class="col-xl-2 col-lg-2 col-md-6 col-sm-12 col-xs-12">
                       <label>Denomination</label>
                   </div>
                   <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12">
                       <!-- <label> {{ Denomination }}</label> -->
                       <input type="text" [(ngModel)]="Denomination" id="Denomination" value="{{Denomination}}">

                   </div>
               </div>

               <div class="row">
               </div>

           </div>
       </div>





       <div class="row divPoolDetails">
           <div id="blotterDiv" class="col-12">
           </div>
       </div>
       <div class="row dvPoolBtns">
           <div class="col-xl-3 col-lg-4 col-md-8 col-sm-6 col-xs-12">

           </div>
           <div class="col-xl-4 col-lg-4 col-md-8 col-sm-6 col-xs-12 txtAlignCenter" >
               <button class="button" (click)="createPool()">Confirm</button>


               <button class="button" (click)="hidePoolDetails()">Cancel</button>
           </div>

           <div class="col-xl-4 col-lg-4 col-md-8 col-sm-12 col-xs-12">
               <span class="errorMsg">{{poolErrorMsg}}</span>
               <span class="successMsg">{{poolSuccessMsg}}</span>
           </div>
       </div>

   </div>

   <br />
   <br />
   <br />

   <div class="overlay" *ngIf="showOrderDetailsFlag || PrevQuoteShowOrderPopUp">
    <div class="order-capture-modal">
        <div class="modalheader modal-header">
            <label>You are placing an order for Credit Linked Note</label>
            <div (click)="hideOrderDetails()" class="modal-close"></div>
        </div>
        <!-- Added by Apurva K||03-May-2024 -->
        <div class="errorMsg" style="padding: 4px 30px;">{{this.ErrorMsgRFQpopup}}</div> 
        <div class="input-grid">
            <label>Issuer</label>
            <input disabled type="text" type="text" class="txtalignLeft" [(ngModel)]="Issuer" value="{{ Issuer }}" />

            <label>Underlying</label>
            <input disabled type="text" class="longText txtalignLeft" Id="txtShare" [(ngModel)]="txtShare" />

            <label>Booking Branch</label>
            <select [(ngModel)]="selectedBookingBranch" class="ip-border">
                <!-- <option value="FinIQ Europe">FinIQ Europe</option>
    <option value="FinIQ Asia">FinIQ Asia</option> -->
                <option *ngFor="let b of BookingCenter" value="{{b.BookingCenterCode}}">
                    {{b.BookingCenterName}}
                </option>
                <!-- <option value="London">London</option>
                <option value="Madrid">Madrid</option> -->
            </select>

            <label>Order Notional ({{txtddlNoteCcy}})</label>
            <!-- <input type="text" id="txtnotional" [(ngModel)]="txtnotional" type="text"/> -->
            <input type="text" id="txtnotional" [(ngModel)]="txtnotional" type="text" (focus)="commonfunctions.UnformatNumber($event);" (keypress)="commonfunctions.NotionalValidateKeys($event)" (keyup)="commonfunctions.chkNotionalFormat_keyUp($event) === false ? txtnotional = '': txtnotional=txtnotional"
                (change)="checkValidBookOrderNotional($event, 'txtnotional');" /> <!-- Func call setnotional removed and added in checkValidBookOrderNotional by Jyoti S || 14-Apr-2023 -->
            <!-- Modified keyup event to handle invalid notional || Added by Priya L || 01Apr2022 || assigned by Pranav D. -->
            <label>Reoffer (%)</label>
            <input disabled type="text" id="txtIBPrice" [(ngModel)]="txtIBPrice" type="text" />

            <label>Client Price (%)</label>
            <input disabled type="text" id="txtClientPrice" [(ngModel)]="txtClientPrice" type="text" />

            <label>Order Type</label>
            <select [(ngModel)]="txtOrderType" (change)="changeOrderType()" class="ip-border">
                <!-- Commented extra options as adked by Nitish K|| 17-Apr-2024||HSBCECCLI-123 -->
                <!-- <option value="Limit">Limit</option> --> 
                <option value="Market">Market</option>
                <!-- Changes by Apurva K|| 30-May-2023|| Asked by Nitish K -->
                <option value="MOC">MOC</option>
                <!-- <option value="VWAP">VWAP</option> -->
            </select>
            <!-- <label>Strike (%)</label>
            <input disabled type="text" id="txtStrike" [(ngModel)]="issuePrice" type="text" /> -->

            <label>Tenor</label>
            <input disabled type="text" id="txtTenor" [(ngModel)]="txtTenor" type="text" />

            <label>Upfront (%)</label>
            <input disabled type="text" id="txtUpfront" [(ngModel)]="txtUpfront" type="text" />

            <label></label>
            <input style="visibility: hidden;"/>

            <!-- <label>Client Yield (%)p.a.</label>
  <input disabled type="text" id="txtClietYield"  [(ngModel)]="txtClietYield" type="text"/> -->

           

            <!-- <label>Limit Level</label>
            <input type="text" id="txtlimitLevel" [(ngModel)]="txtlimitLevel" type="text" [disabled]="txtOrderType !== 'Limit'" (focus)="commonfunctions.UnformatNumber($event);" (keypress)="commonfunctions.NotionalValidateKeys($event)" (keyup)="commonfunctions.chkNotionalFormat_keyUp($event) === false ? txtlimitLevel = '': txtlimitLevel=txtlimitLevel"
                (change)="checkValidBookOrderNotional($event, 'txtlimitLevel')" /> -->

            <!-- Modified keyup event to handle invalid notional || Added by Priya L || 01Apr2022 || assigned by Pranav D. -->
            <!-- (focus)="commonfunctions.UnformatNumber($event); previousNotionals($event);"
  (change)="addNotional($event,rowIndex);"
  (keypress)="commonfunctions.NotionalValidateKeys($event)" 
  (keyup)="commonfunctions.chkNotionalFormat_keyUp($event)" -->


            <!-- <label>Underlying For Limit</label>
            <select id="underlyingForLimit" type="text" [(ngModel)]="underlyingForLimit" [disabled]="txtOrderType !== 'Limit'">
                <option *ngFor="let share of ShareBasket" value="{{share.Code}}">{{share.Code}}</option>
            </select> -->
            <!-- <form class="example-form">
    <mat-form-field class="example-full-width">
      <mat-label>Number</mat-label>
      <input type="text"
             placeholder="Pick one"
             aria-label="Number"
             matInput
             [formControl]="myControl"
             [matAutocomplete]="auto">
      <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
        <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
          {{option}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </form> -->

            <label *ngIf="(this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].lp !== this.Issuer)  || 
                (this.dataItemAccordian && this.dataItemAccordian.EP_BestPrice_YN === 'N')">
                Non Best Price Reason</label>
            <!-- <input type="text" class="longText" id="nonBestPriceRsnDD" [(ngModel)]="nonBestPriceRsnDD" type="text"
                style="grid-column: 2 / span 3;  text-align: left !important;" *ngIf="(this.sortedAllPrices.length > 0 && 
                   this.sortedAllPrices[0].lp !== this.Issuer) || 
                   (this.dataItemAccordian && this.dataItemAccordian.EP_BestPrice_YN === 'N')" /> -->
            <select class="longText ddlReason" id="nonBestPriceRsnDD" [(ngModel)]="nonBestPriceRsnDD" type="text" *ngIf="(this.sortedAllPrices.length > 0 && 
            this.sortedAllPrices[0].lp !== this.Issuer) || 
            (this.dataItemAccordian && this.dataItemAccordian.EP_BestPrice_YN === 'N')">
                <option *ngFor="let n of NonBestPriceReasonArr" value="{{n.Key}}">
                    {{n.Value}}</option>
            </select>
            <label *ngIf="nonBestPriceRsnDD === 'Other' || nonBestPriceRsnDD === 'Others'"></label>
            <input type="text" [(ngModel)]="txtOthersRsn" *ngIf="nonBestPriceRsnDD === 'Other' || nonBestPriceRsnDD === 'Others'" class="ipReason" />




            <label>Comment</label>
            <input type="text" class="longText ipComment" id="txtComment" [(ngModel)]="txtComment" type="text" />
        </div>
        <div>
            <table class="modal-table">
                <tr>
                    <th>
                        <input id="checkboxAll" type="checkbox" checked (click)="chkAll($event);" class="tblModelCheckBox">
                    </th>
                    <th *ngIf="(this.EQ_Login_Client_Mapping === 'Yes' || this.EQ_Login_Client_Mapping === 'YES')"></th>
                    <th *ngIf="(this.EQ_Show_Order_RM === 'Yes' || this.EQ_Show_Order_RM === 'YES')">RM Name</th>
                    <th *ngIf="(this.EQ_Show_Order_Customer === 'Yes' || this.EQ_Show_Order_Customer === 'YES')">
                        Customer Name</th>

                    <th>Notional</th>
                </tr>
                <!-- <tr> -->
                <tr *ngFor="let data of tblAllocation; let rowIndex = index">

                    <td>
                        <input id="checkbox{{rowIndex}}" type="checkbox" checked (click)="chkAllocation($event,rowIndex);" class="tblAllocationCheckBox">
                    </td>
                    <td *ngIf="EQ_Login_Client_Mapping === 'Yes' || EQ_Login_Client_Mapping === 'YES'">
                        <span>Place order for </span>
                        <select id="Select{{rowIndex}}" [(ngModel)]="allocatedClientArray[rowIndex]">
                            <option *ngFor="let bookData of allBooksData" value="{{bookData.BookCode}}">
                                {{bookData.BookName}}</option>
                        </select>

                    </td>
                    <td *ngIf="EQ_Show_Order_RM === 'Yes' || EQ_Show_Order_RM === 'YES'">

                        <!-- Commented by Apurva K||Changes for FIN1EURINT-714|| 17-Apr-2024 -->
                        <!-- <select id="Select{{rowIndex}}" [(ngModel)]="allocatedRMArray[rowIndex]" class="ScrollCss ddltblAllocation">
                            <option *ngFor="let RMItem of RMList" value="{{RMItem.Rel_Manager_Name}}">
                                {{RMItem.Rel_Manager_Name}}</option>
                        </select> -->
                        
                        <input type="text" class="ScrollCss ddltblAllocation" maxlength="14" (selected)="loggedInUsername"
                         [(ngModel)]="loggedInUsername" disabled/>

                    </td>
                    <td *ngIf="EQ_Show_Order_Customer === 'Yes' || EQ_Show_Order_Customer === 'YES'" class="ddltblAllocation" >
                        <select id="Select{{rowIndex}}" [(ngModel)]="allocatedCustomerArray[rowIndex]">
                            <option *ngFor="let c of customerList" value="{{c.CustomerID}}">
                                {{c.CustomerName}}</option>
                        </select>
                    </td>
                    <td>
                        <!-- <input type="text" id="txtnotional" type="text" addNotional($event,rowIndex);/> -->
                        <input type="text" id="Notional{{rowIndex}}" maxlength="14" (focus)="eccommon.UnformatNumber($event);" (blur)="allocatedNotionalArr[rowIndex]=$event.target.value;checkNotional($event);setFormattedNotional($event,rowIndex);" (keypress)="eccommon.NotionalValidateKeys($event)"
                            (keyup)="eccommon.chkNotionalFormat_keyUp($event) === false ? allocatedNotionalArr[rowIndex] = '': allocatedNotionalArr[rowIndex]=allocatedNotionalArr[rowIndex]" placeholder="Enter Notional" value="0.00" [(ngModel)]="allocatedNotionalArr[rowIndex]"
                            class="ddltblAllocation" />
                        <!-- Modified keyup event to handle invalid notional || Added by Priya L || 01Apr2022 || assigned by Pranav D. -->

                        <!-- (blur)="checkValidAllocateNotional($event, rowIndex);" -->

                        <!-- (blur)="this.reset();checkValidNotional($event);"
          (keypress)="commonfunctions.NotionalValidateKeys($event)"
          (keyup)="commonfunctions.chkNotionalFormat_keyUp($event)" -->
                        <!-- [disabled]="orderflag" /> -->

                        <!-- (focus)="commonfunctions.UnformatNumber($event)"
        (blur)="this.reset();checkValidNotional($event);checkNotional($event);"
        (keypress)="commonfunctions.NotionalValidateKeys($event)"
        (keyup)="commonfunctions.chkNotionalFormat_keyUp($event)" -->

                    </td>
                </tr>
            </table>
        </div>
        <div class="button-row-right">
            <button class="button" (click)="btnAllocationClick();" [disabled]="tblAllocation.length >= 5">Add
                Allocation</button>
        </div>
        <div class="input-grid dvTotalNotional">
            <label>Total Notional</label>
            <label>{{formattedAmount(totalNotional)}}</label>
            <label>Min Limit:</label>
            <label>
                <!-- 250,000.00 : -->
                {{formattedAmount(minNotional)}}
            </label>
            <label>Allocated Notional</label>
            <label>{{formattedAmount(allocatedNotional)}}</label>
            <label>Max Limit:</label>
            <label>
                <!-- 500,000.00:  -->
                {{formattedAmount(maxNotional)}}
            </label>
           <!-- <label>Remaining Notional</label> -->
			<!-- Added by AdilP for FIN1EURINT-125 @19-04-2023 -->
            <label *ngIf="this.remainingNotional < 0 " ngClass="displayError">Remaining Notional</label>
            <label *ngIf="this.remainingNotional >= 0 ">Remaining Notional</label>
            <!-- <label>{{formattedAmount(this.remainingNotional)}}</label> -->
            <label *ngIf="this.remainingNotional < 0 " ngClass="displayError">{{formattedAmount(this.remainingNotional)}}</label>
            <label *ngIf="this.allocatedNotional >= 0 ">{{formattedAmount(this.remainingNotional)}}</label> 
        </div>
        <div class="button-row">
            <button class="button" id="bookOrderConfirm" (click)="confirmOrder();postBackMethod();" [disabled]="orderBookedFlag || orderLoadFlag">
                <div class="confirm-with-loader">
                    {{ "Confirm" | translate }}
                    <div class="txtAlignCenter" *ngIf="orderLoadFlag">
                        <div class="order-loader loaderbox" >
                            <div class="col-12">
                                <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="imgConfirmLoader">
                            </div>
                        </div>
                    </div>
                </div>
            </button>
            <button (click)="hideOrderDetails();postBackMethod();" class="button">{{ "Close" | translate }}</button>
        </div>
        <div class="dvErrMsg">
            <span class="msgSpan erMsgBookOrder">
                {{errorMsgBookOrder}} </span>
        </div>
    </div>
</div>

<div class="success-overlay" *ngIf="successMessage">
    <div class="success-grid">
        <div class="close-success-modal">
            <div (click)="toggleSuccessMessage()" class="modal-close success-close"></div>
        </div>
        <div class="success-div">
            <div class="success-icon" *ngIf="!warningMessage && !showBlockReason"></div>
            <!-- <div class="warning-icon" *ngIf="warningMessage"> -->
                <div *ngIf="warningMessage || showBlockReason">
                <app-svg-icons [icon]="'warning-icon'" [width]="'15'" [height]="'15'">
                </app-svg-icons><!-- Added by Jyoti S || 26-Apr-2023 || FIN1EURINT-216 -->
            </div>
        </div>
        <div class="success-div">
            <label class="success-message-bold lblSuccessMsg">{{successMsgBookOrder}}</label>
        </div>
        <!-- <div class="success-div">
      <label class="success-message-light">{{successMsgProdLaunch}}</label>
    </div> -->
        <div class="success-div">
            <ng-template [ngIf]="!showBlockReason">
                <button (click)="toggleSuccessMessage()" class="button success-button" *ngIf="!quoteEmailFlg && !warningMessage">Continue</button>
                <button (click)="toggleSuccessMessage()" class="button warning-button" *ngIf="!quoteEmailFlg && warningMessage">Continue</button>
            </ng-template>
            <button (click)="toggleSuccessMessage()" class="button success-button" *ngIf="quoteEmailFlg || showBlockReason">Ok</button>
        </div>
    </div>
</div>

<div class="success-overlay" *ngIf="minNotionalConfirm">
    <div class="success-grid dvMinNotional">
        <div class="close-success-modal">
            <div (click)="hideViewPopup()" class="modal-close success-close"></div>
        </div>
        <div class="success-div">
            <!-- <div class="success-icon"></div> -->
             <!-- <div class="warning-icon"></div> -->
             <div>
                <app-svg-icons [icon]="'warning-icon'" [width]="'15'" [height]="'15'">
                </app-svg-icons><!-- Added by Jyoti S || 26-Apr-2023 || FIN1EURINT-216 -->
            </div>
        </div>
        <div class="success-div">
            <!-- <label class="success-message-bold">{{successMsgButtonAction}}</label> -->
            <label class="success-message-bold"> Order size is less than minimum pool size.
                <br />Do you want to proceed?</label>
        </div>
        <div class="success-div">
            <button (click)="hideViewPopup()" class="button warning-button btnMinNotional">Cancel</button>
            <button (click)="minNotionalConfirm = false" class="button success-button btnMinNotional" >Continue</button>

        </div>
    </div>
</div>

</div>