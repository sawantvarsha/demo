<!-- <div class="page-controls">
    <div><label class="page-header">{{this.commonfunctions.CreditTranche | translate}}</label></div>
</div>
<div class="label-row1 ">
    <hr width="60%" class="productHeaderhr">
</div> -->

<div class="container-fluid contentdiv">
    <!-- Added ngClass | Anubhav Goyal | BBVACLI-775 | 27-01-2023 -->
    <div [ngClass]="{'disablePointerEvents': this.viewOnly}">
        <div class="row pgHeaderTop"><!--Padding changed by Jyoti S || 13-Apr-2023 -->
            <div class="col-12 title-row">
                <label class="pageHeader">Credit Tranche</label>
                
                <!--Added by Apurva C||19-Oct-->
                <!-- Commented by Apurva K|| yet to devloped -->
                <!-- <div class="product-tabs" *ngIf="!this.viewOnly">
                    <div></div>
                    <div *ngIf="!this.viewOnly">
                        <div class="topGridRow">
                            <div class="relPosition">
                                <label class="labelNames">Load Variants</label>
                            </div>
                            <div class="relPosition">
                                <app-custom-dropdown [data]="portfolioIdArr" [unicodeIcon]="false" [showIcon]="true" [textField]="'P_Name'" [valueField]="'P_ID'" [iconSrcField]="'imageIcon'" (selected)="changeDdl($event)" >
                                </app-custom-dropdown>
                            </div>

                            <div class="relPosition">
                                <label class="labelNames">New Variant</label>
                            </div>
                            <div class="relPosition">
                                <input type="text" [(ngModel)]="portfolioName" class="txtalignLeft">
                            </div>
                            <div class="relPosition">
                                <div class="btn-group btnSaveMargin" (clickOutside)="saveoptionflag = false">
                                    <button type="button" class="btn btn_Save" (click)="Save()" tabindex="50" *ngIf="!this.viewOnly" [disabled]="priceBtnActive === 'N'">
                                        <div class="price-with-loader">
                                            {{ "Save" | translate }}
                                            <div class="txtAlignCenter" *ngIf="variantFlag">
                                                <div class="row priceall-loader loaderbox">
                                                    <div class="col-12">
                                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                    </div>
                                                </div>
                                            </div>
                                           </div>
                                            
                                    </button>
                                   
                                    <button type="button" (click)="saveOptions()" class="sidebutton btnSaveNShare" *ngIf="!this.viewOnly" [disabled]="(priceBtnActive === 'N')">
                                        <app-svg-icons [icon]="'arrow-drop-down'" [width]="'8'" [height]="'8'">
                                        </app-svg-icons>
                                    </button>
                                    <div class="ddl SaveNShare" *ngIf="(saveoptionflag) ">
                                        <div class="flexDisplay">
                                        <div class="updateIcon" *ngIf="portfolio!=='' && accessRight !== 'VIEW'">
                                           
                                                <app-svg-icons [icon]="'update-icon'" [width]="'15'" [height]="'15'">
                                                </app-svg-icons>
                                        </div>
                                        <div class="ddlitem" role="menuitem" (click)="updateVariant();saveoptionflag=false" *ngIf="portfolio!=='' && accessRight !== 'VIEW'">Update Variant
                                        </div>
                                    </div>
                                    <div class="flexDisplay">

                                        <div class="SaveNShareIcon">
                                           
                                                <app-svg-icons [icon]="'share-icon'" [width]="'15'" [height]="'15'">
                                                </app-svg-icons>
                                        </div>
                                        <div class="ddlitem" role="menuitem" (click)="showsaveSharePopup()">Save and Share
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="relPosition">
                                <button class="button DeleteIcon" (click)="DeleteTemplate();" [disabled]="(portfolio==='')">
                                  
                                    <app-svg-icons *ngIf="(portfolio==='')" [icon]="'delete'" [width]="'13'" [height]="'13'">
                                    </app-svg-icons>
                                    <app-svg-icons *ngIf="(portfolio !=='')" [icon]="'deleteEnabled'" [width]="'13'" [height]="'13'">
                                    </app-svg-icons>
                                    {{ "Delete" | translate }}
                                </button>
                            </div>
                        </div>


                    </div>
                </div> -->
                <!-- Added top on 09 Jan 2023 by Ashwini H -->
                <div class="portfolioMsg" *ngIf="successMsg !== '' && saveFlag">
                    <span class="successMsg txtsuccessMsg" *ngIf="successMsg !== '' && saveFlag">{{successMsg}} </span>
                </div>
                <div class="portfolioMsg" *ngIf="SaveandShareErrorMsg !== ''">
                    <span class="errorMsg" *ngIf="SaveandShareErrorMsg !== ''">{{SaveandShareErrorMsg}} </span>
                </div>
            </div>
        </div>
                    <div class="row">
                        <div class="relPosition">
                            <div class="row divRfqId">
                                <div class="col-12">
                                    <div *ngIf="rfqID" class="Messagebox" style="font-size: 22px !important;">
                                        RFQ : {{rfqID}}</div>
                                    <div *ngIf="portfolioId && portfolioId!=='' && this.viewOnly" style="font-size: 22px !important;" class="Messagebox">
                                        Saved Request ID : {{portfolioId}}
                                    </div>
                                    <div *ngIf="scheduledReqId && scheduledReqId!=='' " style="font-size: 22px !important;" class="Messagebox">
                                        Scheduled Request ID : {{scheduledReqId}}
                                    </div>
                                    <div *ngIf="ErrorMsg !== '' " class="Messagebox">
                                        <span class="validationErrorMsg">{{ErrorMsg}}</span>
                                    </div>
                                    <div *ngIf="infoMsg !== '' " class="Messagebox">
                                        <span class="validationErrorMsg">{{infoMsg}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div></div>
                    </div>
                                

                                <!-- *ngIf="this.allBooksData.length > 1" Added by Pranav D 6-Mar-2023  | BBVAEPCLI-407 -->
                                <!-- <div class="row-grid-2">
                                    <div style="position:relative;" *ngIf="this.allBooksData.length > 1">
                                        <label>{{this.commonfunctions.Onbehalfof | translate}}</label>
                                    </div>
                                    <div style="position:relative;" *ngIf="this.allBooksData.length > 1">
                                        <select [(ngModel)]="onBehalfOf" tabindex="1" (change)="this.reset();onBehalfOfChange();">

                                            <option *ngFor="let bookData of allBooksData;let i = index"
                                                [value]="bookData.BookCode">
                                                {{bookData.BookName }}</option>
                                        </select>
                                    </div>
                                </div> -->
        <div class="row-grid">
                    <div class="relPosition">
                        <div class="row-grid-inner">
                                        <!-- Column 1 -->
                            <div class="flex-column">
                                <div class="label-row">
                                    <!-- Changed by Pranav D 26-Oct-2021 Removed hidescreen class from below label and added General Terms -->
                                    <label class="box-header">General Terms</label>
                                </div>
                                <div class="row-grid-2">
                                    <div style="position:relative;">

                                        <label>{{this.commonfunctions.Currencylabel | translate}}</label>
                                    </div>

                                 
                                    <div class="relPosition">
                                        <!-- Removed  cpnTypeChange(this.cpnType) | Anubhav Goyal | BBVAEPCLI-343-->
                                        <select [(ngModel)]="ddlNoteCcy" tabindex="2" (change)="currencyChange();" [disabled]="enabledisablefields('Currency')" class="ip-border ScrollCss">
                                               <option *ngFor="let c of CCY" [value]="c">
                                                   {{c}}</option>
                                       </select>
                                    </div>
                                </div>

                                <div class="row-grid-2">
                                    <div class="relPosition">
                                        <label>{{this.commonfunctions.Format | translate}}</label>
                                    </div>
                                    <div class="relPosition">
                                        <select [(ngModel)]="format" (change)="formatChange();tenorbasedonIndex();" tabindex="3">
                                            <!-- <option value="Note">Note</option>
                                <option value="Swap">Swap</option> -->
                                            <option *ngFor="let f of Format" value="{{f.Value}}">{{f.Value}}</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.Solvefor | translate}}</label>
                                    </div>
                                    <div style="position:relative;">
                                        <select [(ngModel)]="SolveForvalue" id="SolveForvalue" (change)="setSolveFor($event)" tabindex="4">
                                            <option value="Coupon">Coupon
                                            </option>
                                            <option value="Reoffer">Reoffer
                                            </option>
                                            <!-- <option value="AttachDetach">Attach/Detach
                                        </option> -->
                                        </select>
                                    </div>
                                </div>


                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.Index | translate}}</label>
                                    </div>
                                    <div style="position:relative;">
                                        <select [(ngModel)]="indexTranche" tabindex="5" (change)="this.reset();tenorbasedonIndex();chngIndexCode();" id="ddlIndexTranche">
                                            <option value=""></option>
                                            <option *ngFor="let arr of indexTrancheArr"
                                                [value]="(arr.LongName.split('-')[1]).trim()">
                                                {{ arr.LongName.split('-')[1] }}
                                            </option>
                                        </select>
                                    </div>
                                </div>

                            </div>

                            <!-- Column 2 -->
                            <div class="flex-column">
                                <div class="label-row hideScreen">
                                    <label class="labelHeaders hideScreen" style="height: 32px;"></label>
                                </div>
                                
                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.Notionallabel | translate}}</label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" id="txtnotional" type="text" maxlength="14" value="{{ Notional }}" (focus)="commonfunctions.UnformatNumber($event)" (blur)="this.reset();checkValidNotional($event);checkNotional($event);" (keypress)="commonfunctions.NotionalValidateKeys($event)"
                                            (keyup)="commonfunctions.chkNotionalFormat_keyUp($event)" placeholder="Enter Notional" [(ngModel)]="Notional" tabindex="6" />
                                    </div>
                                </div>

                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <!-- Added by Riddhi P || 1feb23 || Credit Tranche: Field provided in UI is wrong | bbvacli-788 -->
                                        <label class="disabledlbl" *ngIf="SolveForvalue === 'Reoffer' && format==='Note'">{{this.commonfunctions.ReofferPrice|
                                            translate}}</label>

                                        <label *ngIf="SolveForvalue !=='Reoffer' && format==='Note'">{{this.commonfunctions.ReofferPrice
                                            | translate}}</label>

                                        <label *ngIf="format !== 'Note'" class="info-label-wrapper">Upfront (%)

                                            <app-svg-icons class="info" [icon]="'info-icon'" [width]="'15'"
                                                *ngIf="format==='Swap'"></app-svg-icons>
                                            <div class="infodiv" *ngIf="format==='Swap'">
                                                <span class="infoNote" *ngIf="format==='Swap'"
                                                    style="white-space: initial;">
                                                    Negative Upfront means BBVA pays.
                                                </span>
                                            </div>
                                        </label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" id="txtReoffer" [disabled]="SolveForvalue === 'Reoffer'" [(ngModel)]="reofferPrice" (blur)="this.reofferPrice = commonfunctions.setDecimal($event); this.reset();" maxlength="10" (keypress)="(format === 'Swap') ? commonfunctions.InputNegativeNumber($event) :commonfunctions.InputNumber($event)"
                                            tabindex="7" />
                                    </div>
                                </div>

                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label *ngIf="format==='Note'">{{this.commonfunctions.IssuePricelabel |
                                            translate}}</label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" [(ngModel)]="issuePrice" (blur)="this.issuePrice = commonfunctions.setDecimal($event); this.reset();" maxlength="10" (keypress)="commonfunctions.InputNumber($event)" tabindex="8" *ngIf="format==='Note'" />
                                    </div>
                                </div>

                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.RecoveryTypelabel | translate}} </label>
                                    </div>
                                    <div style="position:relative;">
                                        <!-- Vaibhav B | KG tranches | BBVAEPCLI-421 | removed disabled attribute -->
                                        <select [(ngModel)]="recoveryType" (change)="this.reset(); recoveryTypeChng()">
                                        
                                            <!-- <option>Zero Recovery</option>
                                        <option>Market Recovery</option> -->
                                            <option *ngFor="let arr of recoveryTypeArr" [value]="arr.Value">
                                                {{ arr.Key }}
                                            </option>
                                        </select>
                                    </div>
                                </div>

                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label>{{this.commonfunctions.Settlementtype | translate}}</label>
                                    </div>
                                    <div style="position:relative;">
                                        <select [(ngModel)]="settlementType" disabled>

                                            <option *ngFor="let arr of settlementTypeArr" [value]="arr.Value">
                                                {{ arr.Key }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row-grid-inner">
                            <div class="flex-column">
                                <div class="label-row">
                                    <label class="box-header">{{this.commonfunctions.Dateslabel | translate}}</label>
                                </div>
        
        
                                <!-- Strike Shifter/Date -->
                                <!-- <div class="row-grid-2">
                                <div style="position:relative; padding-right: 0 !important;">
                                    <label>Strike Shifter/Date</label>
                                </div>
                                <div class="error-date" style="position:relative; padding: 0 !important;white-space: nowrap;">
                                   
                                    </div>
        
                                    <div style="position:relative">
                                        <app-svg-icons [icon]="'info-icon'" class="info" [width]="'15'"></app-svg-icons>
                                        <div class="infodiv">
                                            <span class="infoNote" style="white-space: initial;width: 260px;">
                                                Number of days you want to shift the Strike Forward from Today. For
                                                Strike today (or next business day in case today is holiday), please
                                                input 0b.
                                            </span>
                                    </div>
                                </div>
        
                                </div> -->
        
        
                                <!-- Payment Shifter/Date -->
                                <div class="row-grid-2">
                                    <!--Strike Shifter/Date-->
                                    <div class="relPosition">
                                        <label>{{ "Strike Shifter/Date" | translate }}</label>
                                    </div>
                                    <div class="div-flex-date error-date-2 relPosition">
                                        <!-- <label class="switch">
                                                <input type="checkbox" id="switch">
                                                <span class="slider"><p>Tdy Fwd</p></span>
                                              </label> -->
                                        <div class="Btn_priips">
                                            <div class="btngroup">
                                                <!-- Change for Tdy to TOD && Fwd to FWD || VarshaG || 21-03-2023 -->
                                                <!-- Changes done by Sudarshan P/Apurva K || 06-Jun-2023|| FIN1EURINT-435  -->
                                                <button [(ngModel)]="stkshiftTdy" ngDefaultControl tabindex="9" (click)="Setstkshiftvalue(stkshiftTdy);this.reset();changeStkShiftToggle();txtTenorDateChange('Payment');" [disabled]="enabledisablefields('StrikeShifterDate')" class="Btn" [ngClass]="stkshift === '0B' ? 'Btn_Yes' : 'Btn_No' ">TOD</button>
                                                <button [(ngModel)]="stkshiftFwd" ngDefaultControl tabindex="9" (click)="Setstkshiftvalue(stkshiftFwd);this.reset();changeStkShiftToggle();" [disabled]="enabledisablefields('StrikeShifterDate')" class="Btn" [ngClass]="stkshift === '0B' ? 'Btn_No' : 'Btn_Yes' ">FWD</button>
                                            </div>
                                            <!-- <div> -->
                                                <!-- <input type="date" [(ngModel)]="stkdate" id="txtstkdate" tabindex="13" value="{{stkdate}}" (change)="this.reset();" min="{{todayDate}}" (blur)="txtTenorDateChange('Payment');" *ngIf="stkshift === 'Fwd'" style="margin-left: 4px  !important; width: 117px !important;max-width: 117px !important;min-width: 117px !important;"> -->
                                                <div class="dateLabel" *ngIf="stkshift === 'Fwd'">
                                                    <input type="date" [(ngModel)]="stkdate" id="txtstkdate" tabindex="9" value="{{stkdate}}" (change)="this.reset();" min="{{todayDate}}" (blur)="txtTenorDateChange('Payment');">
                                                    <span class="spnstkdate" tabindex="9" id="stkdate">{{ stkdate | date: "dd-MMM-yyyy" }}</span>
                                                </div>
                                           
                                           
                                            
                                        </div>
                                    </div>
                                </div>
        
                                <div class="row-grid-2">
                                    <!-- Payment Shifter/Date -->
                                    <div class="relPosition">
                                        <label>Issue Date Offset</label>
                                    </div>
                                    <div class="div-flex-date error-date-2 relPosition">
                                        <select [(ngModel)]="paymentshift" class="YNbox1 ip-border" tabindex="10" (blur)="txtTenorDateChange('Payment');txtTenorDateChange('Expiry');" (change)="this.reset();" [disabled]="enabledisablefields('IssueDateOffset')">
                                                <!-- <option value="5B">T+5</option>
                                        <option value="10B">T+10</option>
                                        <option value="Custom">Custom</option> -->
                                                <option *ngFor="let d of IssueDateOffset"
                                                    (selected)="d.Value === paymentshift" [value]="d.Value">
                                                    {{ d.Key }}</option>
                                            </select>
                                        <!-- <input type="text" name="" class="tenorBox" maxlength="4" tabindex="10"
                                        (keypress)="this.commonfunctions.tenorDateValidation($event);"
                                        (blur)="txtTenorChange($event,'Payment');" [(ngModel)]="paymentshift">/ -->
                                        <!-- <input type="date" [(ngModel)]="settdate" value="{{settdate}}" tabindex="14" id="txtsettdate" (change)="this.reset();" (blur)="txtTenorDateChange('Expiry');txtTenorDateChange('Payment');" *ngIf="paymentshift === 'Custom'" style="margin-left: 4px !important; width: 117px !important;max-width: 117px !important;min-width: 117px !important;"> -->
                                        <div class="dateLabel" id="customOffset" *ngIf="paymentshift === 'Custom'"><!--Min value changed from 1 to 0 as suggested by Nitish K|| Varsha G ||FIN1EURINT-604|| 04-Sep-2023 -->
                                            <input type="number" name="settdate" id="settdate"  min="0" max="99" oninput="validity.valid||(value='');" [(ngModel)]="customSetDate" 
                                            tabindex="11" id="txtsettdate" (change)="this.reset();" (blur)="txtTenorDateChange('Expiry');txtTenorDateChange('Payment');">
                                            <span id="settdateLabel">T + </span>
                                        </div>
                                        <!-- <img src="{{asseturl}}information.png" class="info">
                                            <div class="infodiv">
                                                <span class="infoNote" style="white-space: initial;width: 260px;">
                                                    Number of days you want to shift the Payment Forward from Strike
                                                    Date.
                                                </span>
                                            </div> -->
                                    </div>
                                </div>
        
                                <!-- Tenor -->
                                <div class="row-grid-2">
                                    <!-- Tenor -->
                                    <div class="relPosition">
                                        <label>{{ "Tenor" | translate }}</label>
                                    </div>
                                    <div class="div-flex-date">
                                        <!-- added blur event to calculate expiry date || PriyaL || 07Apr2022 || Assigned by Pranav D -->
                                        <select [(ngModel)]="expshift" class="YNbox1 ip-border ScrollCss" tabindex="11" 
                                        (blur)="txtTenorChange($event,'Expiry');" (change)="this.reset();autocallfreqbasedonTenor();customTenor = ''" 
                                        [disabled]="enabledisablefields('Tenor')" *ngIf="TenorDropdown?.length <= 0 || TenorDropdown[0]==''">
                                                <option *ngFor="let t of Tenor" (selected)="t.Value === expshift"
                                                    [value]="t.Key">
                                                    {{ t.Key }}</option>
                                            </select>
        
                                            <select [(ngModel)]="expshift" class="YNbox1 YNboxWidth" tabindex="15" 
                                            (change)="this.reset();" [disabled]="TenorYN=='N' "
                                            *ngIf="TenorDropdown?.length > 0 && TenorDropdown[0]!=''">
                                            <option *ngFor="let t of TenorDropdown" (selected)="t === expshift" [value]="t">
                                                {{ t }}</option>
                                            </select>
                                        <input type="text" name="" maxlength="4" *ngIf="expshift === 'Custom'" [(ngModel)]="customTenor" tabindex="12" (blur)="this.reset();autocallfreqbasedonTenor();CustomerTenorChange('Expiry');" (keypress)="eccommon.customTenorValidation($event, customTenor)"
                                           class="ipCustomTenor">
                                    </div>
                                </div>
        
                            </div>
    
                            <div class="flex-column" *ngIf="format !== 'Note'">
                                <div class="row-grid-2" *ngIf="format === 'Swap'">
                                    <label class="box-header">Funding</label>
                                </div>
    
                                <div class="row-grid-2">
                                    <div style="position:relative;" *ngIf="format === 'Swap'">
                                        <label>{{this.commonfunctions.Type | translate}}</label>
                                    </div>
                                    <div style="position:relative;">
                                        <select *ngIf="format === 'Swap'" [(ngModel)]="fundType" tabindex="11" (change)="this.reset(); fundTypeChange();">
                                                <option value="Fixed Rate">
                                                    {{this.commonfunctions.FixedRate | translate}}</option>
                                                <option value="Floating Rate">
                                                    {{this.commonfunctions.FloatingRate | translate}}</option>
                                            </select>
                                    </div>
                                </div>
    
                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label *ngIf="format === 'Swap' && fundType === 'Floating Rate'">Funding
                                                Index</label>
                                    </div>
                                    <div style="position:relative;">
                                        <select *ngIf="format === 'Swap' && fundType === 'Floating Rate'" [(ngModel)]="fundIndex" (change)="setFundFreq(fundIndex)">
                                                <option *ngFor="let arr of floatingRefArr" [value]="arr.Code">
                                                    {{ arr.Code }}
                                                </option>
                                            </select>
                                    </div>
                                </div>
    
                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label *ngIf="format === 'Swap'">{{this.commonfunctions.Frequency |
                                                translate}}</label>
                                    </div>
                                        <div style="position:relative;">
                                            <!-- [disabled]="fundType === 'Floating Rate'"removed by Pranav D 16-Aug-2023 as per BBVAEPCLI-610 also ngIf condition added to hide 1m in case of an 
                                        index which does not include 1m,3m,6m -->
                                            <select name="" [(ngModel)]="fundFreq" *ngIf="format === 'Swap'"
                                                [(ngModel)]="fundFreq" tabindex="12" (change)="chngFundIdxOnFundFreq()">
                                                <option value="1m"
                                                    *ngIf="(this.fundIndex !== 'SONIA' && this.fundIndex !== 'SOFR' && this.fundIndex !== 'SARON')">
                                                    1m</option>
                                                <option value="3m">3m</option>
                                                <option value="6m">6m</option>
                                                <option value="12m">12m</option>
                                            </select>
                                        </div>
                                    </div>
    
                                <div class="row-grid-2">
                                    <div style="position:relative;">
                                        <label class="disabledlbl" *ngIf="format === 'Swap' && this.SolveForvalue === 'FundingRate'">{{this.commonfunctions.Rate
                                                | translate }} / {{this.commonfunctions.Spread | translate}} (%)
                                            </label><label class="info-label-wrapper" *ngIf="format === 'Swap' && this.SolveForvalue !== 'FundingRate'">{{this.commonfunctions.Rate
                                                | translate }}/<br> {{this.commonfunctions.Spread | translate}}
                                                (%)
                                                <span (clickOutside)="onClickedOutside('fundRate')">
                                                    <app-svg-icons class="info" [icon]="'info-icon'" [width]="'15'"
                                                        *ngIf="fundRate !==''" (click)="GetTriggerValue('fundRate')">
                                                    </app-svg-icons>
                                                    <div *ngIf="fundRatePopup" class="triggerTableCredit">
    
                                                        <table style="width: 100%;">
                                                            <tr>
                                                                <th style="width: 10em;">{{this.commonfunctions.Periods | translate}}</th>
                                                                <th style="width: 10em;">
                                                                    {{this.commonfunctions.Trigger | translate}}</th>
                                                            </tr>
                                                            <tr *ngFor="let t of TriggerValueArr; let i = index; "
                                                                style="width: 100%;">
    
                                                                <td class="tdRight" style="width:10em;">{{t.NoOfPeriods}}
                                                                </td>
                                                                <td class="tdRight" style="width: 10em;"> {{t.OutTrigger}}
                                                                </td>
    
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </span>
                                            </label>
                                    </div>
                                    <div style="position:relative;">
                                        <input type="text" *ngIf="format === 'Swap'" tabindex="13" [(ngModel)]="fundRate" id="txtFundingRate" maxlength="100" (blur)="this.reset();" (keypress)="commonfunctions.InputSpread($event)" [disabled]="this.SolveForvalue === 'FundingRate'">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

        

        <div class="flex-container">
            

            <div class="container">
                <div style="position:relative;">
                    <div class="row-grid-inner">
                        <div class="flex-column">

                            <div class="label-row">
                                <label class="box-header">{{this.commonfunctions.Couponlabel | translate}}</label>
                            </div>

                            <div class="row-grid-2">
                                <div style="position:relative;">
                                    <label>{{this.commonfunctions.CouponTypelabel | translate}}</label>
                                </div>
                                <div style="position:relative;">
                                    <select [(ngModel)]="cpnType" tabindex="18" (change)="cpnTypeChange()">
                                            <option value="Fixed">Fixed</option>
                                            <option value="Floating">Floating
                                            </option>
                                            <option value="UpFront" *ngIf="SolveForvalue !== 'Coupon'">No Coupon
                                            </option>
                                        </select>
                                </div>
                            </div>
                            <div class="row-grid-2">
                                <div style="position:relative;">
                                    <label [ngClass]="cpnType!=='Floating' ? 'disabledlbl' : ''" *ngIf="cpnType !== 'UpFront'">{{this.commonfunctions.FloatingReflabel |
                                            translate}}</label>
                                </div>
                                <div style="position:relative;">
                                    <select [(ngModel)]="floatingRef" tabindex="19" [disabled]="cpnType!=='Floating'" (change)="changeFreq()" *ngIf="cpnType !== 'UpFront'">
                                            <option value="" *ngIf="floatingRef === ''"></option>
                                            <option *ngFor="let arr1 of floatingRefArr" [value]="arr1.Code">
                                                {{ arr1.Code }}
                                            </option>

                                        </select>
                                </div>
                            </div>

                            <div class="row-grid-2">
                                <div style="position:relative;">
                                    <label class="disabledlbl" *ngIf="SolveForvalue ==='Coupon' && cpnType !== 'UpFront'">{{this.commonfunctions.CouponSpreadLabel
                                            |
                                            translate}}</label>
                                    <label *ngIf="SolveForvalue !== 'Coupon' && cpnType !== 'UpFront'">{{this.commonfunctions.CouponSpreadLabel
                                            | translate}}</label>
                                </div>
                                <div style="position:relative;">
                                    <input type="text" id="txtCoupon" [disabled]="SolveForvalue === 'Coupon'" tabindex="20" [(ngModel)]="Spread" (blur)="this.Spread = commonfunctions.setDecimal($event);this.reset();" maxlength="10" (keypress)="commonfunctions.InputNumber($event)" *ngIf="cpnType !== 'UpFront'"
                                    />
                                </div>
                            </div>

                            <div class="row-grid-2">
                                <div style="position:relative;">
                                    <label></label>
                                </div>
                                <div style="position:relative;">
                                    <div class="relPosition">
                                        <div class="btngroup">
                                            <button [ngClass]="creditToggleYN==='Y'? 'Btn_Yes':'Btn_No'" (click)="CreditToggle('Y')" class="Btn">Ind.</button>
                                            <button [ngClass]="creditToggleYN==='N'? 'Btn_Yes':'Btn_No'"  (click)="CreditToggle('N')" class="Btn">Firm</button>
                                        </div>
                                    </div>
                                    <!-- <div class="toggleYNFull" (click)="CreditToggle()">
                                        <div class="toggleNFull " [ngClass]="this.creditToggleYN==='Y'? 'Select ':''">
                                            Ind.
                                        </div>
                                        <div class="toggleNFull" [ngClass]="this.creditToggleYN==='N'? 'Select ':''">
                                            Firm
                                        </div
                                    </div> -->
                                </div>
                            </div>
                        </div>
                        <div class="flex-column">
                            <div class="label-row">
                                <label class="labelHeaders"></label>
                            </div>
                            <div class="row-grid-2">
                                <!-- *ngIf="cpnType !== 'UpFront' -->
                                <div style="position:relative;">
                                    
                                    <label  *ngIf="cpnType !== 'UpFront' ">{{this.commonfunctions.CouponFreq |
                                            translate}} </label>
                                </div>
                                <!-- Commented by RiddhiP || 23AUG23 || BBVACLI-1246 || Credit Tranche: Coupon Freq. field missing -->
                                <!-- <div style="position:relative;">
                                    <select name="" [(ngModel)]="cpnFreq" 
                                        tabindex="12" (change)="this.reset();"
                                        [disabled]="format === 'Note'"
                                        [disabled]="fundType === 'Floating Rate'">
                                        <option value="1m">1m</option>
                                        <option value="3m">3m</option>
                                        <option value="6m">6m</option>
                                        <option value="12m">12m</option>
                                    </select>
                                </div> -->
                                    <!-- BBVAEPCLI-610|| RadhaM || 31August|| Added a condition for cpnfreq disable when currency is EUR -->
                                    <div style="position:relative;">
                                        <select [(ngModel)]="cpnFreq" tabindex="21" [disabled]="(cpnType === 'Floating' && ddlNoteCcy === 'EUR')"
                                            (change)="this.reset();" *ngIf="cpnType !== 'UpFront'">
                                            <!-- <option value="1m" *ngIf="cpnType === 'Fixed'">Monthly</option>
                                        <option value="3m">Quarterly</option>
                                        <option value="6m">Semi-Annual</option>
                                        <option value="12m">Annual</option> -->
                                            <!-- *ngIf="cpnType === 'Fixed'" for 1m removed by Pranav D BBVAEPCLI-610 16-Aug-2023 *ngIf new condition added as per new requirement -->
                                            <!-- <option value="1m"
                                                *ngIf="(this.floatingRef !== 'SONIA' && this.floatingRef !== 'SOFR' && this.floatingRef !== 'SARON')">
                                                1m</option>
                                            <option value="3m">3m</option>
                                            <option value="6m">6m</option>
                                            <option value="12m">12m</option> -->
                                            <option *ngFor="let c of CpnFreqArr" [value]="c.Key">{{ c.Key }}</option>
                                        </select>
                                    </div>
                                </div>
                            <div class="row-grid-2">
                                <div style="position:relative;">
                                    <label *ngIf="cpnType !== 'UpFront'">{{this.commonfunctions.CouponBasislabel |
                                            translate}}</label>
                                </div>
                                <div style="position:relative;">
                                    <select tabindex="22" [(ngModel)]="cpnBasis" (change)="this.reset();" *ngIf="cpnType !== 'UpFront'">
                                            <option value="30/360">30/360
                                            </option>
                                            <option value="Act/360">Act/360
                                            </option>
                                            <option value="Act/Act">Act/Act
                                            </option>
                                            <!-- <option value="Act/365">Act/365
                                        </option> -->
                                        </select>
                                </div>
                            </div>
                            <!-- START : Pranav D 2-Jan-2023 BBVAEPCLI-271 -->
                            <div class="row-grid-2">
                                <div *ngIf="cpnType !== 'UpFront'">
                                    <label>{{this.commonfunctions.Firstcoupon | translate}}</label>
                                </div>
                                <div *ngIf="cpnType !== 'UpFront'">
                                    <div class="relPosition">
                                        <div class="btngroup">
                                            <button [ngClass]="firstCpnYN==='Y'? 'Btn_Yes':'Btn_No'" (click)="setFirstCpn('Y');" class="Btn">Long</button>
                                            <button [ngClass]="firstCpnYN==='N' ? 'Btn_Yes':'Btn_No'"  (click)="setFirstCpn('N')" class="Btn">Short</button>
                                        </div>
                                    </div>

                                    <!-- <div class="toggleYNFull" (click)="setFirstCpn()">
                                        <div class="toggleNFull " (click)="firstCpnYN = 'Y'; toggeleOnOff();" [ngClass]="this.firstCpnYN==='Y'? 'Select ':''">
                                            Long
                                        </div>
                                        <div class="toggleNFull" (click)="firstCpnYN = 'N'; toggeleOnOff()" [ngClass]="this.firstCpnYN==='N'? 'Select ':''">
                                            Short
                                        </div>
                                    </div> -->
                                </div>
                                <!-- END : Pranav D 2-Jan-2023 BBVAEPCLI-271 -->
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="container">
                <div style="position:relative;">
                    <div class="row-grid-inner">

                        <div class="flex-column">
                            <!-- Added by Anubhav Goyal | BBVAEPCLI-394 lower the coupon and leave less white space on the CLN screen | 27-02-2023 -->
                            <div class="row-grid-2 info-label-wrapper"></div>

                            <div class="row-grid-2 info-label-wrapper">
                                <label class="box-header">{{this.commonfunctions.Tranche | translate}}</label>
                                <span (clickOutside)="onClickedOutsideTranchDetails()" *ngIf="recoveryType !== 'Market Recovery'">
                                    <!-- <img src="{{asseturl}}info.jpg" class="info" (click)="showTranchedetails()"
                                    *ngIf="this.attachDetachCalculationsRes && this.attachDetachCalculationsRes.length"> -->
                                    <div class="tranch-table-wrapper">
                                        <app-svg-icons class="info" [icon]="'info-icon'" [width]="'15'"
                                            (click)="showTranchedetails()"
                                            *ngIf="this.attachDetachCalculationsRes && this.attachDetachCalculationsRes.length">
                                        </app-svg-icons>
                                        <span (click)="showTranchedetails()"
                                            style="cursor:pointer;font-style: italic;font-weight: 500;margin-left:5px;color: #808080;"
                                            *ngIf="this.attachDetachCalculationsRes && this.attachDetachCalculationsRes.length">table
                                        </span>
                            </div>

                            <div *ngIf="this.attachDetachCalculationsRes && this.attachDetachCalculationsRes.length && trancheDetailsFlag" class="triggerTableCredit">
                                <div>
                                    <label>At maturity client
                                                receives:</label>
                                </div>
                                <table style="width: 100%;">
                                    <tr>
                                        <th style="width: 8em;white-space: pre-wrap;">{{this.commonfunctions.Hashofcreditevents | translate}}
                                        </th>
                                        <th style="width: 22em;white-space: pre-wrap;">
                                            {{this.commonfunctions.AdjustedCreditOutstandingNotionalAmount | translate}}</th>
                                    </tr>
                                    <ng-container *ngFor="let attachDetachRes of attachDetachCalculationsRes; let i = index; ">
                                        <tr *ngIf="attachDetachRes" style="width: 100%;">
                                            <td class="tdRight" *ngIf="i ==(AttachVal-1 ) && AttachVal>1" style="width: 8em;"> 0 to {{AttachVal -1 }} </td>
                                            <td class="tdRight" *ngIf="i ==(AttachVal-1 ) && AttachVal==1" style="width: 8em;"> 0 </td>
                                            <td class="tdRight" *ngIf="(i >= AttachVal) && (i < DetachVal)" style="width: 8em;"> {{i}}
                                            </td>
                                            <td class="tdRight" *ngIf="i==(DetachVal)">
                                                {{DetachVal}} or more </td>
                                            <td class="tdRight" *ngIf="i>=(AttachVal-1) ">
                                                {{attachDetachRes.AdjustedCreditNominal}}%
                                            </td>
                                        </tr>
                                    </ng-container>
                                    <!-- <tr 
                                                style="width: 100%;">
                                                <td class="tdRight" *ngIf="i ==(AttachVal-1 ) && AttachVal>1"
                                                    style="width: 8em;"> 0 to {{AttachVal -1 }} </td>
                                                <td class="tdRight" *ngIf="i ==(AttachVal-1 ) && AttachVal==1"
                                                    style="width: 8em;"> 0 </td>
                                                <td class="tdRight" *ngIf="(i >= AttachVal) && (i < DetachVal)"
                                                    style="width: 8em;"> {{i}}
                                                </td>
                                                <td class="tdRight" *ngIf="i==(DetachVal)" style="width: 8em;">
                                                    {{DetachVal}} or more </td>
                                                <td class="tdRight" *ngIf="i>=(AttachVal-1) " style="width: 22em;">
                                                    {{attachDetachRes.AdjustedCreditNominal}}%
                                                </td>
                                            </tr> -->
                                </table>
                            </div>
                            </span>

                        </div>
                        <div class="row-grid-2">
                            <div style="position:relative;">
                                <label>{{this.commonfunctions.Attachlabel | translate}}</label>
                            </div>
                            <div style="position:relative;">
                                <!-- Added by Suvarna P || 25Jul23 || BBVAEPCLI-657 || Price Response is not cleared on the Tranches when modifying the attach || added reset function -->
                                <input type="text" class="adTxt" tabindex="14" maxlength="5" [(ngModel)]="AttachVal" (blur)="this.reset();getAttachDetachData();calculateAttachPercent()" (keypress)="commonfunctions.allowIntegerOnly($event)" id="txtAttachVal" (keyup)="commonfunctions.allowIntegerOnly($event)"
                                    [disabled]="(SolveForvalue === 'AttachDetach' || recoveryType === 'Market Recovery')"> /

                                <input type="text" class="adTxt" tabindex="15" [(ngModel)]="Attach" id="txtAttach" (blur)="Attach = commonfunctions.setDecimaltoFour($event);this.reset();" maxlength="10" (keypress)="commonfunctions.InputNumber($event)" [disabled]="recoveryType !== 'Market Recovery'"
                                /> %
                            </div>
                        </div>

                        <div class="row-grid-2">
                            <div style="position:relative;">
                                <label>{{this.commonfunctions.Detachlabel | translate}}</label>
                            </div>
                            <div style="position:relative;">
                                <!-- Added by Suvarna P || 25Jul23 || BBVAEPCLI-657 || Price Response is not cleared on the Tranches when modifying the attach || added reset function -->

                                <input type="text" class="adTxt" tabindex="16" maxlength="5" id="txtDetachVal" [(ngModel)]="DetachVal" (blur)="this.reset();getAttachDetachData();calculateDetachPercent()" (keypress)="commonfunctions.allowIntegerOnly($event)" (keyup)="commonfunctions.allowIntegerOnly($event)"
                                    [disabled]="(SolveForvalue === 'AttachDetach' || recoveryType === 'Market Recovery')"> /

                                <input type="text" class="adTxt" tabindex="17" [(ngModel)]="Detach" id="txtDetach" (blur)="Detach = commonfunctions.setDecimaltoFour($event);this.reset();" maxlength="10" (keypress)="commonfunctions.InputNumber($event)" [disabled]="recoveryType !== 'Market Recovery'"
                                /> %
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>

        </div>

    </div>
    <div class="BottomFlex">
        <div>
            <div class="msgBox" style=" " *ngIf="(this.sortedAllPrices.length > 0  && this.sortedAllPrices[0].Price!=='') || timeoutMsg==='Timeout' || (orderID!=='' && this.viewOnly)">
                <div class="row" style="justify-content: space-between;">
                    <div>
                        <span class="bestreply" style="text-align:left;">
                                Reply
                            </span>
                    </div>
                    <div style="text-align: left">
                        <span class="bestreply">
                                <span class="bestPriceStyle" *ngIf="this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].solveFor !== 'KI + CouponBarrier' 
                && this.sortedAllPrices[0].solveFor !== 'Strike + CouponBarrier'">
                                    {{replySolveFor}} (%) :
                                    <!-- changes by Suvarna P || 13May2022 || BBVACLI-214 || assigned by Pranav D -->
                                    {{this.sortedAllPrices[0].Price === 'Rejected' ? this.sortedAllPrices[0].QueueStatus
                                    :
                                    this.sortedAllPrices[0].Price | number:'1.2-2'}}
                                </span>
                        <span class="bestPriceStyle" *ngIf="this.sortedAllPrices.length > 0 && (this.sortedAllPrices[0].solveFor === 'KI + CouponBarrier' 
                || this.sortedAllPrices[0].solveFor === 'Strike + CouponBarrier')">
                                    {{replySolveFor}} (%) :
                                    <!-- changes by Suvarna P || 13May2022 || BBVACLI-214 || assigned by Pranav D -->
                                    {{this.sortedAllPrices[0].Price === 'Rejected' ? this.sortedAllPrices[0].QueueStatus
                                    :
                                    this.sortedAllPrices[0].Price | number:'1.2-2'}} <br>
                                    {{replySolveFor1}} (%) :
                                    <!-- changes by Suvarna P || 13May2022 || BBVACLI-214 || assigned by Pranav D -->
                                    {{this.sortedAllPrices[0].Price1 === 'Rejected' ?
                                    this.sortedAllPrices[0].QueueStatus :
                                    this.sortedAllPrices[0].Price1 | number:'1.2-2'}}
                                </span>

                        </span>
                        <span class="errorMsg" *ngIf="timeoutMsg!==''">
                                {{timeoutMsg}}
                            </span>
                    </div>
                </div>
            </div>
            <!-- <div style="text-align: center;" *ngIf="loadflag">
                <div class="row" style="padding: 0 auto !important;margin: 0;">
                    <div class="col-12">
                        <img src="{{asseturl}}loading_dots.gif" alt="" width="100px" style="margin-top: -40px;">
                    </div>
                </div>
            </div> -->
        </div>
        <div class="row-button-grid clearPriceDivheight">
            <div class="buttonsDiv" style="justify-content: center">
                <div class="btn-group">
                    <div (clickOutside)="priceoptionflag = false">
                        <div class="btn-group btn-groupMargin"  (clickOutside)="priceoptionflag = false" *ngIf="!this.viewOnly">
                            <!-- Added by Varsha G || 03-May-2023||FIN1EURINT-278 -->
                            <button tabindex="42" class="button clearPriceMargin" (click)="this.reset()">Clear Price</button>
                            <!-- ngIf condition added to resolve alignment issue in View functonality in RFQ Blotter -->
                            <button type="button" class="button priceAll" tabindex="43" *ngIf="!this.viewOnly" [disabled]="priceBtnActive === 'N' || loadflag" (click)="Price()">
                                <div class="price-with-loader">
                                    {{"Price All" | translate}}
                                    <div class="txtAlignCenter" *ngIf="loadflag">
                                        <div class="row priceall-loader loaderbox" >
                                            <div class="col-12">
                                                <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </button>
                        <!-- <button class="btnPrice" *ngIf="this.viewOnly" (click)="cloneSinglePricer()" style="pointer-events: all;" style="pointer-events: all;">{{this.commonfunctions.Clone |
                            translate}}</button> -->
                        <!-- <button class="btn btn-split priceBtn" style="min-width:5.5em;height: 40px !important; font-size: 14px !important;padding-left: 28px;" (click)="Price()" *ngIf="!this.viewOnly" [disabled]="priceBtnActive === 'N'" tabindex="35" type="button">{{this.commonfunctions.Pricelabel | translate}}</button>
                        <button class="btn btn-split dropdown-toggle dropdown-toggle-split btn-dropDown" data-toggle="dropdown" (click)="priceOptions()" *ngIf="!this.viewOnly" style="height: 40px !important; font-size: 14px !important;    padding: 11px;" type="button" [disabled]="priceBtnActive === 'N'"><app-svg-icons [icon]="'dropdown'" [width]="'10'" [height]="'10'" [fill]="'var(--btn-text)'"></app-svg-icons></button> -->
                    </div>
                    <!-- <div *ngIf="priceoptionflag" class="ddl" style="top: 45px;">
                        <div class="ddlitem">
                            <div>
                                <app-svg-icons class="info" [icon]="'schedule-icon'" [width]="'15'"></app-svg-icons>
                            </div>
                            <div class="" (click)="showSchedulePopup();this.reset()">{{this.commonfunctions.Scheduleprice | translate}}
                            </div>
                        </div> -->
                        <!-- <div class="ddlitem">
                            <div>
                                <app-svg-icons class="info" [icon]="'AddToWatchlist'" [width]="'15'"></app-svg-icons>
                            </div>
                            <div (click)="showddToWatchlistPopup()">
                                {{this.commonfunctions.AddtoWatchlist | translate}}
                            </div>
                        </div> -->

                   <!-- </div> -->
                </div>
                <!-- <div class="btn-group">
                    <div (clickOutside)="saveoptionflag = false">
                        <button class="btn btn-split priceBtn" style="min-width:5.5em;height: 40px !important; font-size: 14px !important;padding-left: 28px;" tabindex="35" type="button" (click)="Save()" *ngIf="!this.viewOnly" [disabled]="priceBtnActive === 'N'">{{this.commonfunctions.Save |
                            translate}}</button>
                        <button class="btn btn-split dropdown-toggle dropdown-toggle-split btn-dropDown" data-toggle="dropdown" (click)="saveOptions()" *ngIf="!this.viewOnly" style="height: 40px !important; font-size: 14px !important;    padding: 11px;" type="button" [disabled]="priceBtnActive === 'N'"><app-svg-icons [icon]="'dropdown'" [width]="'10'" [height]="'10'" [fill]="'var(--btn-text)'"></app-svg-icons></button>
                    </div>
                    <div class="ddl" *ngIf="saveoptionflag" style="top: 45px;">
                        <div class="ddlitem">
                            <div>
                                <app-svg-icons class="info" [icon]="'share-icon'" [width]="'15'"></app-svg-icons>
                            </div>
                            <div class="" (click)="showsaveSharePopup()">{{this.commonfunctions.SaveandShare | translate}}
                            </div>
                        </div>

                    </div>
                </div> -->

                <!--  Suvarna P || 19Jun23 || BBVAEPCLI-601 ||  Credit Linear Notes : Termsheet for Single Pricer || start -->

                <button class="btnPrice btn-split" [ngClass]="(this.viewOnly && buttonList !== '' && buttonList.split(',')[3] !== '') ? 'requestTSBtn' : ''" tabindex="37" (click)="RequestTermsheet()" *ngIf="((this.viewOnly && buttonList!=='' && buttonList.split(',')[3]!=='') ||
            (buttonList === '' && this.sortedAllPrices.length > 0 && 
            this.sortedAllPrices[0].Price !== '' && 
            this.sortedAllPrices[0].Price !== null && 
            this.sortedAllPrices[0].Price !== undefined && 
            this.sortedAllPrices[0].Price !== 'Rejected' && 
            this.timeoutMsg !== 'Timeout' ))  && !saveFlag  && format !== 'Bono J' && format !== 'Warrant'" [disabled]="
               reqSuccessMsg ||
             this.sortedAllPrices[0].Price == '' || 
             this.sortedAllPrices[0].Price == null || 
             this.sortedAllPrices[0].Price == undefined || 
             this.sortedAllPrices[0].Price == 'Rejected' || 
             this.timeoutMsg == 'Timeout'" style="pointer-events: all;">{{this.commonfunctions.RequestTS |
                    translate}} </button>

                <button id="btnViewTS" class="pointerEvent" [ngClass]="TSFlag ? 'btnPrice viewButton' : 'btnPrice'" tabindex="38" (click)="ViewTermsheet()" *ngIf="(this.viewOnly && buttonList!=='' && buttonList.split(',')[4]!=='') ||
       (buttonList === '' && TSFlag  && !saveFlag  && format !== 'Bono J' && format !== 'Warrant')">View
                    TS</button>
                <!--  Suvarna P || 19Jun23 || BBVAEPCLI-601 ||  Credit Linear Notes : Termsheet for Single Pricer || end -->


            </div>
        </div>

        <div>
            <div class="msgBox" style="border: 1px solid rgb(105, 105, 105); border-radius: 5px; " *ngIf="((this.sortedAllPrices.length > 0  && this.sortedAllPrices[0].Price!=='' ) && !saveFlag) || (orderID!==''  && this.viewOnly)">
                <div class="row_2" style="padding: 5px 0 !important;margin: 0;">
                    <div>
                        <span>
                            BBVA ID
                        </span>
                    </div>
                    <div>
                        <span>{{orderID}}</span>
                    </div>
                </div>
                <div class="row" style="padding: 5px 0 !important;margin: 0;">
                    <div>
                        <span>
                            Status
                        </span>
                    </div>
                    <div>
                        <!-- Added by riddhip || 15feb23 -->
                        <span style="padding-left:54px">{{orderStatus}}</span>
                    </div>
                </div>
                <!-- Suvarna P || 19Jun23 || BBVAEPCLI-601 ||  Credit Linear Notes : Termsheet for Single Pricer -->

                <div class="row" style="padding: 5px 0 !important;margin: 0;gap: 5px !important;" *ngIf="reqSuccessMsg">
                    <div class="col-3" style="color:var(--green-text);">
                        <span>
                            Termsheet
                        </span>
                    </div>

                    <div style="color:var(--green-text);">
                        {{reqSuccessMsg}}
                    </div>
                </div>
            </div>

            <div style="padding: 15px 0 0 15px;">
                <span class="successMsg" *ngIf="saveFlag">{{successMsg}}</span>
            </div>
        </div>
    </div>
        <!-- <div style="text-align: center;display:flex;justify-content:space-evenly;gap:20px" *ngIf="this.viewOnly">
                

               
                <button class="btnPrice" style="background-color: #da291d !important;min-width: 7em;pointer-events:all" 

                (click)="showdisclaimerPopup()"
                    *ngIf="((this.viewOnly && this.buttonList!=='' && this.buttonList.split(',')[2]!=='') || 
                (this.buttonList === '' && this.sortedAllPrices.length > 0 && 
                this.sortedAllPrices[0].Price !== '' && 
                this.sortedAllPrices[0].Price !== null && 
                this.sortedAllPrices[0].Price !== undefined && 
                this.sortedAllPrices[0].Price !== 'Rejected' && 
                this.timeoutMsg !== 'Timeout' ))  && !this.saveFlag && this.format === 'Note' && this.cpnType === 'Fixed' ">
                    <app-svg-icons class="info" [icon]="'play-icon'" class="info" [width]="'13'">
                    </app-svg-icons>
                </button>
            </div> -->
        <div>


            <div class="msgBox" style="border: 1px solid rgb(105, 105, 105); border-radius: 5px;" *ngIf="((this.sortedAllPrices.length > 0  && this.sortedAllPrices[0].Price!=='' ) && !saveFlag) || (orderID!==''  && this.viewOnly)">
                <div class="row" style="padding: 5px 0 !important;margin: 0">
                    <div>
                        <span>
                                BBVA ID
                            </span>
                    </div>
                    <div>
                        <span>{{orderID}}</span>
                    </div>
                </div>
                <div class="row" style="padding: 5px 0 !important;margin: 0; gap: 5px;flex-wrap: nowrap;">
                    <div>
                        <span>
                                Status
                            </span>
                    </div>
                    <div>
                        <span>{{orderStatus}}</span>
                    </div>
                </div>
                <!--  Suvarna P || BBVAEPCLI-507 || Credit Tranche: Termsheet for Single Pricer -->

                <div class="row" style="padding: 5px 0 !important;margin: 0;gap: 5px !important;" *ngIf="reqSuccessMsg">
                    <div class="col-3" style="color:var(--green-text);">
                        <span>
                                Termsheet
                            </span>
                    </div>
                    <!-- Added by Riddhi P || 20jan23 || Dual Products : Give space between Termsheet requested ||BBVACLI-763 -->
                    <!-- Added color | Anubhav Goyal | BBVACLI-764 | 27-01-2023 -->
                    <div style="color:var(--green-text);">
                        {{reqSuccessMsg}}
                    </div>
                </div>
            </div>

            <div *ngIf="saveFlag" style="padding: 15px 0 0 15px;">
                <span class="successMsg">{{successMsg}}</span>
            </div>
        </div>
    </div>


    <div id="schedule" *ngIf="showSchedulePopupFlag">
        <div class="schedulePopup">

            <div class="schedule-header">
                <!-- Added by RiddhiP || 10aug23 || BBVAEPCLI-672 || updated translations -->
                <span style="margin-left: 10px;font-size: var(--font-xl);font-weight: 500">{{this.commonfunctions.Pickdateandtime | translate}}</span>
                <app-svg-icons [icon]="'close-icon'" [width]="'14'" style="font-weight: 700;font-size:medium;float:right;" (click)="hideSchedulePopup()">
                </app-svg-icons>

            </div>
            <div class="scheduleDiv">
                <div class="calendar-wrapper">
                    <mat-calendar #calendar (monthSelected)="monthSelected($event)" [(selected)]="selectedDate" (selectedChange)="dateChanged()" [minDate]="todayDate"></mat-calendar>
                </div>
                <div class="scheduleFieldDiv">
                    <!-- Schedule Type  - new field added by priya l.- assigned by pranav d.  -->
                    <div class="scheduleFieldDiv">
                        <!-- BBVAEPCLI-672 || Translation changes || RadhaM || 8August23 -->
                        <label>{{this.commonfunctions.Type |translate}}</label>
                        <select class="scheduleSelect" [(ngModel)]="scheduleType" (change)="scheduleTypeChange()">
                                <!-- <option value="One-Off">One-Off</option>
                    <option value="Regular">Regular</option> -->
                                <option *ngFor="let st of scheduleTypeArr;let i = index" [value]="st.misc1">
                                    {{st.Data_Value }}</option>
                            </select>
                    </div>
                    <div class="scheduleFieldDiv">
                        <label>{{this.commonfunctions.Date | translate}}</label>
                        <input type="text" class="scheduleSelect" [(ngModel)]="inputDate" disabled>
                    </div>
                    <!-- <input type="text" class="scheduleInput" [(ngModel)]="inputTime" value="{{selectedDate | date:'hh:mm a'}}"> -->
                    <div class="scheduleFieldDiv">
                        <label>Time</label>
                        <input type="time" class="scheduleSelect" style="border: none;width: 100%; ;font-size: 14px !important;height: 35px !important;" [(ngModel)]="inputTime" value="{{inputTime}}">
                    </div>
                    <!-- Scheduled Frequency - new field added by priya l.- assigned by pranav d.  -->
                    <div class="scheduleFieldDiv">
                        <label>{{this.commonfunctions.Frequency | translate}}</label>
                        <select class="scheduleSelect" [(ngModel)]="scheduleFreq" [disabled]="scheduleType === 'One-Off'">
                                <!-- <option value="Weekly">Weekly</option>
                    <option value="Bi-Weekly">Bi-Weekly</option>
                    <option value="Monthly">Monthly</option> -->

                                <option *ngFor="let sf of scheduleFreqArr;let i = index" [value]="sf.misc1">
                                    {{sf.Data_Value }}</option>
                            </select>
                    </div>

                </div>
            </div>
            <div style="text-align:center;">
                <span class="validationErrorMsg" *ngIf="ErrorMsg!==''">{{ErrorMsg}}</span>
                <span class="successMsg" *ngIf="scheduleMsg!==''">{{scheduleMsg}}</span>
            </div>
            <div class="scheduleBtnGrid">

                <div>
                    <!-- BBVAEPCLI-672 || Translation changes || RadhaM || 8August23 -->
                    <button class="btnPrice" (click)="hideSchedulePopup()">{{this.commonfunctions.Cancel |translate}}</button>
                    <!-- Added by RiddhiP || 10aug23 || BBVAEPCLI-672 || updated translations -->
                    <button class="btnPrice" (click)="scheduleSend()" style="width: 11em;">{{this.commonfunctions.ScheduleSend | translate}}</button>

                </div>
            </div>
        </div>

    </div>

    <div id="saveShare" *ngIf="showsaveSharePopupFlag">
        <div class="savesharePopup">
            <div>
                <!-- BBVAEPCLI-672 || translation changes ||10August23 ||RadhaM -->
                <span style="font-size: var(--font-m);font-weight: 500">{{this.commonfunctions.SharewithColleaguesandGroups|translate}}</span>
            </div>
            <div>
                <!-- <input type="text" placeholder="Please enter user ID or client group" class="longText saveShareInput">  -->
                <!-- BBVAEPCLI-672 || translation changes ||10August23 ||RadhaM -->
                <input type="text" placeholder="{{this.commonfunctions.PleaseenteruserIDorclientgroup |translate}}" value="{{userName}}" class="saveShareInput" style="text-align: left;max-width: 100% !important;" [(ngModel)]="userName" maxlength="10" (keypress)="ChangeIndex_User($event); showSuggestions_User = true"
                    (keydown.enter)="selectUser($event); userflag=false;" (keydown.backspace)="backKeyPress_User($event)" (keydown.delete)="backKeyPress_User($event)" (keydown.tab)="userflag=false;" (keydown.ArrowUp)="selectedBIndex_User = commonfunctions.moveUpSelection1($event, selectedBIndex_User)"
                    (keydown.ArrowDown)="selectedBIndex_User = commonfunctions.moveDownSelection1($event, selectedBIndex_User)" tabindex="5" Id="txtUserGroup" />
                <div class="SelectorBox" style="width: 96% !important;" *ngIf="userflag && showSuggestions_User" (clickOutside)="userflag=false;">
                    <a *ngFor="let user of (users | searchUserGroup: userName); let i = index" (keypress)="ChangeIndex_User($event)" (keydown.enter)="selectUser($event)">
                        <div *ngIf="user" [attr.data-user]="user.Code" (click)="showUser($event,user)" [ngClass]="{HoverSuggestion: i === selectedBIndex_User}">
                            <span>{{ user.Name }}</span>
                        </div>
                    </a>
                </div>
            </div>
            <div *ngFor="let u of userBasket;let i = index">
                <div class="userListDiv">
                    <div (click)="deleteUserfromList(i)">
                        <img src="" width="30px" style="filter: invert(50%);cursor: pointer;" title="Delete">
                    </div>
                    <div>
                        <span style="font-size: var(--font-m);font-weight: 500;color: #02559fc2;">{{u.Name}}</span>
                    </div>
                    <div>
                        <select id="list{{i}}" style="width:max-content !important;" (change)="changeAccessofUserGroup($event,i)" [attr.selected]="u.Access">
                                <!-- <option *ngIf="(u.Type === 'USER' || u.Type === 'User') && !isPortfolioShared" [ngValue]='u.Access'
                  [attr.selected]="u.Access === 'EDIT' ? true : null">EDIT</option> -->
                                <option [ngValue]='u.Access' [attr.selected]="u.Access === 'VIEW' ? true : null">VIEW
                                </option>
                            </select>
                    </div>
                </div>
            </div>

            <div class="share-portfolio-popup">
                <!-- BBVAEPCLI-672 || translation changes ||10August23 ||RadhaM -->
                <span style="font-size: 12px;font-weight: 500">{{this.commonfunctions.Owner |translate}}:</span>
                <span style="font-size: 12px;font-weight: 500;color: #02559fc2;">{{currentowner}}</span>
            </div>
            <div class="share-portfolio-popup">
                <button class="btnPrice" (click)="hidesaveSharePopup()">Cancel</button>
                <!-- BBVAEPCLI-672 || translation changes ||10August23 ||RadhaM -->
                <button class="btnPrice" (click)="sharePortfolio()">{{this.commonfunctions.Share |translate}}</button>
            </div>
                <!-- BBVACLI-1252 Able to save and share without entering any user ID or client group || RadhaM || 31-08-23 -->
                <div class="validationErrorMsg">{{this.SaveandShareErrorMsg}}</div>
        </div>

    </div>

    <!-- START : Component shifted to new component as per UI changes required to be done to add CLN BBVACLI-165 -->
    <!-- START : show disclaimer popup Pranav D 17-Aug-2022 BBVACLI-357 -->

    <!-- Added style= pointer events | Anubhav Goyal | 03-May-2023 | BBVACLI-1071  -->
    <div id="saveShare" *ngIf="showdisclaimerPopupFlag" style="pointer-events:all">
        <div class="savesharePopup" style="width: 460px;">
            <div>
                <span style="font-size: var(--font-m);font-weight: 500">Please enter below details to
                        proceed
                        further:</span>
            </div>
            <div class="row disclaimerRowDiv">
                <div class="col-5">
                    <label>Language </label>
                </div>
                <div class="col-7">
                    <select [(ngModel)]="language" style="max-width: 100%;" (change)="ddllangChange()">

                            <option *ngFor="let languageData of formatbasedlanguageArr;let i = index"
                                [value]="languageData.misc1">
                                {{languageData.Data_Value }}</option>

                        </select>
                </div>
            </div>
            <div class="row disclaimerRowDiv">
                <div class="col-5">
                    <label>This video will be shown </label>
                </div>
                <div class="col-7">
                    <!-- <textarea id="largeTextBox" name="textarea" [(ngModel)]="disclaimer" style="width: 100%;"></textarea> -->
                    <select [(ngModel)]="disclaimer" style="max-width: 100%;">

                            <option *ngFor="let disclaimerData of filterdisclaimerArr;let i = index"
                                [value]="disclaimerData.misc1">
                                {{disclaimerData.Data_Value }}</option>

                        </select>
                </div>
            </div>

            <!-- Added by Riddhi P || 13FEB23 || BBVACLI-888 || Credit Tranche: Not able to play videos  -->
            <div style="text-align:center; pointer-events:all" class="disclaimerRowDiv1">
                <button class="btnPrice" (click)="hidedisclaimerPopup()" style="margin-right: 10px;">Cancel</button>
                <button class="btnPrice" (click)="FetchStruxlyVideo()">Continue</button>
            </div>
        </div>

    </div>
    <!-- END : show disclaimer popup Pranav D 17-Aug-2022 BBVACLI-357 -->
    <!-- START : BBVACLI-357 Pranav D 26-Aug-2022 Video player popup -->
    <!-- <div class="overlay" *ngIf="showVideoPopupFlag">
    <div class="stage2-popup-container">
        <div class="stage2-popup-title-bar">
            <div class="stage2-popup-headline-wrapper">
                <div class="stage2-popup-headline-text">
                    <span>BBVA ID: {{orderID}} </span><br />
                    <span>Credit Tranche on {{this.indexTranche}} </span>
                    <span *ngIf="this.Coupon !== ''"> Coupon (%) {{this.Coupon}}</span>
                    <span *ngIf="this.IBPrice !== ''"> Reoffer (%) {{this.reofferPrice}}</span>
                    <span> Attach {{this.AttachVal}}%</span>
                    <span> Dettach {{this.DetachVal}}%</span>

                </div>

            </div>
            <div class="stage2-popup-close">
                <a (click)="copyURL()" title="Copy URL" style="cursor: pointer;">
                    <img class="stage2-popup-close-img" style="margin-right: 10px;" src="{{asseturl}}copyLink.png" />
                </a>
                <div *ngIf="CopyURLFlag" class="infoNote" style="white-space: initial;right: 10px;width: fit-content;position: absolute;font-size: 10px !important;">
                    <span>
                            URL Copied.
                        </span>
                </div>
                <img class="stage2-popup-close-img" src="{{asseturl}}close.png" (click)="closeVideoPopup()" />
            </div>
        </div>
        <div style="margin-top:20px;">
            <iframe id="idm_player" frameborder="0" width="96%" height="84%" title="Idomoo Player" allow="autoplay" allowfullscreen="" scrolling="no" [src]="videoURL | safe" style="position: absolute; display: block; margin: 0px auto;"></iframe>
        </div>
    </div>
</div> -->
    <!-- END : BBVACLI-357 Pranav D 26-Aug-2022 Video player popup -->

    <!--Video Popup  -->
    <!-- Added by Riddhi P || 13FEB23 || BBVACLI-888 || Credit Tranche: Not able to play videos  -->
    <div class="overlay" *ngIf="showVideoPopupFlag" style="pointer-events:all">
        <!-- <app-video-player></app-video-player> -->
        <div class="popup">
            <div class="title">
                <div class="stage2-popup-headline-text" style="width: 795px;">
                    <span>BBVA ID:
                            <!--{{-->orderID
                            <!-- }} -->
                        </span><br />
                    <span>Credit Tranche on {{this.indexTranche}} </span>
                    <span *ngIf="this.Coupon !== ''"> Coupon (%) {{this.Coupon}}</span>
                    <span *ngIf="this.IBPrice !== ''"> Reoffer (%) {{this.reofferPrice}}</span>
                    <span> Attach {{this.AttachVal}}%</span>
                    <span> Detach {{this.DetachVal}}%</span>

                </div>
                <app-svg-icons [icon]="'copyLink'" [width]="'18'" [height]="'18'" (click)="copyVideoURL()">
                </app-svg-icons>
                <div *ngIf="this.CopyURLFlag">
                    <span>URL Copied.</span>
                </div>
                <app-svg-icons (click)="closeVideoPopup()" [icon]="'close'" [width]="'18'" [height]="'18'">
                </app-svg-icons>
            </div>
            <div class="popup-content">
                <!-- <video controls width="100%" height="auto">
                <source src="{{videoPath}}" type="video/mp4">
            </video> -->
                <iframe id="idm_player" frameborder="0" width="100%" height="500px" title="Idomoo Player" allow="autoplay" allowfullscreen="" scrolling="no" [src]="videoURL | safe" style=" margin: 0px auto;"></iframe>
            </div>
        </div>
    </div>
    <div class="row">
        <!-- *ngFor="let sortedPrice of this.lpArr" -->
        <div class="lpFlex" *ngIf="!viewOnly">
            <!-- <div class="bestlp" *ngIf="this.bestLPArray"> -->
                <div [ngClass]="this.bestLPArray?.length !== 0 ? 'bestlpHighlight' : 'bestlp'" *ngIf="this.bestLPArray">
                    <div class="divbestLP">
                        <!-- <h6>{{this.bestLPArray.lp}}</h6> -->
                        <!-- <div style="display: grid; grid-template-columns: 10% auto;"> -->
                        <!-- <input type="checkbox" /> -->
                        <!-- [(ngModel)]="chkDateRange" (change)="chngChkBox()" disabled -->
                        <div class="lp-box-name">
                        <h6 class="hdrBest">Best</h6>
                        </div>
                        <!-- </div> -->
                        <div class="LPheight">
                            <span class="rfqFont">{{this.bestLPArray.rfq}}</span>
                        </div>
                       
                        <div class="LPheight">
                            <span *ngIf="this.bestLPArray.timer" class="pricer-timer">{{this.bestLPArray.timer}}
                                </span>
                        </div>
                        <!-- <div style="width: 95%; display: flex; justify-content: space-between; align-items: center;">
                            <h5 ></h5>
                            <div class="infocarddiv">
                            <div class="infodiv"></div>
                            </div>
                        </div>
                        <h5></h5> -->

                        <!-- <br *ngIf="!this.bestLPArray.timer" /> -->

                        <div class="divBestPrice">
                            <!-- Changes done by Apurva K|| 25-Apr-2023|| FIN1EURINT-219|| inline css:;height: 3em; -->
                            <h5 class="priceColor hdrBestPrice" [ngClass]="(this.bestLPArray.price === 'Rejected') ? 'infocard' : ''">
                                {{(this.bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || this.bestLPArray?.length
                                < 1 || bestLPArray.price==='-' || this.bestLPArray.price==='Timeout' ) ? this.bestLPArray.price : this.bestLPArray.price | number: '1.2-2'}} </h5>
                                    <!-- <div class="infocarddiv" *ngIf="(this.bestLPArray.status === 'REJECTED' || this.bestLPArray.status === 'Rejected') && this.bestLPArray.remark !==''">
                                        <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                                {{ this.bestLPArray.remark}}
                                            </span>
                                    </div> -->
                                    <!-- <div class="infocarddiv" style="margin-bottom: 37px;" *ngIf="(this.bestLPArray.status === 'Active'  && this.bestLPArray.remark !=='' && this.bestLPArray.price !== '-')"> -->
                                    <div class="infocarddiv LPheight" *ngIf="(this.bestLPArray.status === 'Active'  && this.bestLPArray.remark !=='' && this.bestLPArray.price !== '-')">
                                        <!-- <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                                {{ p.remark}}
                                            </span> -->
                                            <!--Added by Varsha G || FIN1EURINT-188 || 21-Apr-2023-->
                                            <img src="{{asseturl}}information.png" class="info imgInfo" *ngIf="this.bestLPArray.remark !==''">
                                            <div class="infodiv" *ngIf="this.bestLPArray.remark !==''">
                                                <span class="infoNote spnRemark" *ngIf="this.bestLPArray.remark !==''">
                                                        {{this.bestLPArray.remark}}
                                                </span>
                                            </div>
                                    </div>
                        </div>
                        <!-- <h5>
                            <div style="text-align: center;">
                                <div class="row"></div>
                            </div>
                        </h5> -->
                                <!-- <br
                                    *ngIf="bestLPArray.price == '' || bestLPArray.price ==='Timeout' || bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || bestLPArray.price < 0" /> -->

                                <h6 class="hdrBestLpTsMsg">{{this.bestLPArray.TSMsg}}</h6> <!-- Changed by AdilP @09-05-2023 || FIN1EURINT-291  -->
                                <h6 class="hdrBestLPMsg">{{this.bestLPArray.Msg}}</h6>
                                <!-- <div style="height: 20px;">
                                    <a *ngIf="bestLPArray && bestLPArray.price && bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price !== 'Rejected' && this.bestLPArray.price !== 'Unsupported' && this.bestLPArray.price !== 'Expired'  && bestLPArray.price > 0"
                                        class="quoteMailLabel" (click)="emailQuote(bestLPArray.rfq)">Mail</a>
                                </div> -->

                                <!-- <br
                                    *ngIf="bestLPArray && bestLPArray.price && bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price !== 'Rejected' && bestLPArray.price !== 'Unsupported' && bestLPArray.price !== 'Expired' && bestLPArray.price !== 'Cancelled' && bestLPArray.price > 0">
                                <br
                                    *ngIf="bestLPArray === undefined || bestLPArray.length <=0 || bestLPArray.price == '' || bestLPArray.price ==='Timeout' || bestLPArray.price === 'Rejected' || this.bestLPArray.price === 'Unsupported' || this.bestLPArray.price === 'Expired' || this.bestLPArray.price === 'Cancelled' || bestLPArray.price < 0" /> -->
                                <!-- <div style="height: 20px;">     -->

                                <!-- Added by Apurva K|| 25-Apr-2023||FIN1EURINT-219 -->
                                    <button class="button bestLpBtnMail" [disabled]="(bestLPArray?.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq) || bestLPArray.timer === 0)" 
                                    (click)="emailQuote(bestLPArray.rfq)">Mail</button>
                                <!-- </div> -->
                                    <!-- Changed by Amogh K | 19apr2022 | request TS config check | assigned by pranav D -->
                                
                                <button class="button btnMinWidth" [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq) || bestLPArray.timer === 0 || bestLPArray.TSNotSupported||bestLPArray.TSFlag|| bestLPArray.TSDisableFlag)"
                                    *ngIf="(EQ_Show_Termsheet_Button === 'YES' || EQ_Show_Termsheet_Button === 'Y' || EQ_Show_Termsheet_Button === 'Yes')" (click)="RequestTS(bestLPArray.idx)">Request
                                        TS</button>
                                <button class="button btnViewTSandKID" *ngIf="bestLPArray.TSFlag" (click)="ViewTS(bestLPArray.idx)"> 
                                    <div class="price-with-loader divMarginLeft">
                                    View TS
                                        <div class="txtAlignCenter" *ngIf="bestLPArray.ViewTSFlag">
                                            <div class="row priceall-loader loaderbox" >
                                                <div class="col-12">
                                                    <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </button><!-- Changed by Jyoti S || 25-May-2023 -->
                                <!-- Changed by Amogh K | 21apr2022 | request KID config check | assigned by pranav D -->
                                <button class="button btnMinWidth" [disabled]="(bestLPArray?.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq) || priipsYN === 'No' || bestLPArray.timer === 0 || bestLPArray.KidDisableFlag || bestLPArray.KidNotSupported)"
                                    *ngIf="(EQ_Show_KID_Button === 'YES' || EQ_Show_KID_Button === 'Y' || EQ_Show_KID_Button === 'Yes')" (click)="RequestKID(bestLPArray.idx)">Request
                                        KID</button>
                                <button class="button btnViewTSandKID" *ngIf="bestLPArray.KIDFlag" (click)="ViewKID(bestLPArray.idx)">
                                    <div class="price-with-loader divMarginLeft">
                                        View KID
                                            <div class="txtAlignCenter" *ngIf="bestLPArray.ViewKIDFlag">
                                                <div class="row priceall-loader loaderbox" >
                                                    <div class="col-12">
                                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                </button>
                                <!-- <button class="bookBtn"
                            [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq))"
                            style="min-width: 8em;"
                            [routerLink]="['/PreviousQuotesNew',{RFQ_ID:bestLPArray.rfq,Template_Code:'EQC_Europe',RedirectedFrom:'Pricers',Mode:'Launch Product'}]"
                            routerLinkActive="active-link">Launch Product</button> -->
                                <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                                <button class="button btnMinWidth" *ngIf="isDealer && (EQ_Show_Launch_Button === 'YES' || EQ_Show_Launch_Button === 'Y' || EQ_Show_Launch_Button === 'Yes')" [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' || (viewOnly && viewRFQ !== bestLPArray.rfq) || bestLPArray.timer === 0)"
                                    (click)="lauchProduct(bestLPArray)">Launch
                                        Product</button>
                                <!-- <button class="bookBtn" style="min-width: 8em;" *ngIf="!viewOnly"
                                    (click)="PriceLP(bestLPArray.lp)"
                                    [disabled]="!bestLPArray.priceChkFlg">Price
                                </button> -->
                                <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                                <button class="button btnMinWidth" [disabled]="(bestLPArray.length < 1 || bestLPArray.price === '-' || bestLPArray.price === 'Rejected' || bestLPArray.price === 'Unsupported' || bestLPArray.price === 'Expired' || bestLPArray.price === 'Cancelled' || bestLPArray.price === 'Timeout' 
                            || bestLPArray.timer === '' || bestLPArray.timer === 0 || (viewOnly && viewRFQ !== bestLPArray.rfq)) || !bookOrderFlag" (click)="showOrderDetails(bestLPArray.lp,bestLPArray.rfq,bestLPArray);postBackMethod();"
                                    *ngIf="!viewOnly && (EQ_Show_Order_Button === 'YES' || EQ_Show_Order_Button === 'Y' || EQ_Show_Order_Button === 'Yes')">Book
                                        Order</button>




                    </div>
                    <div>
                        <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 start -->
                        <!-- <br /> -->
                        <span *ngIf="bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price > 0" class="minMaxLimitFont">
                                {{this.commonfunctions.nFormatter(bestLPArray.minLimit)}}</span>&nbsp;
                        <span *ngIf="bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price > 0">/</span>&nbsp;
                        <span *ngIf="bestLPArray.price !== '-' && bestLPArray.price !=='Timeout' && bestLPArray.price > 0" class="minMaxLimitFont">
                                {{this.commonfunctions.nFormatter(bestLPArray.maxLimit)}}</span>
                        <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 end -->

                    </div>
                </div>
            <!-- <div [ngClass]="this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].lp === p.lp ? 'selectedlp' : 'lpname'" -->
            <div [ngClass]="this.sortedAllPrices.length > 0 && this.sortedAllPrices[0].lp === p.lp ? 'selectedlp' : 'lpname'" *ngFor="let p of this.priceProvidersArr, let i = index;">
                <!-- <div style="display: flex; flex-direction: column; justify-content: flex-start;align-items: center;align-self: center; gap: 5px;" [ngClass]="{ 'lp-loading' : p.loadFlag == true}"> -->
                <div class="divbestLP">
                    <div class="lp-box-name">
                        <input type="checkbox" [checked]="p.priceChkFlg" (change)="chngPriceChkBox(i)" class="lpNameWidth" />
                        <h6>{{p.lp}}</h6>
                    </div>
                    <div class="LPheight">
                        <span class="rfqFont">{{p.rfq}}</span>
                    </div>
                    <div class="timer-icon LPheight">
                        <app-svg-icons *ngIf="p.price !== '-'" [icon]="'clock-icon'" [width]="'10'" [height]="'10'">
                        </app-svg-icons>
                        <span class="spntimerHeight" [ngClass]="p.timer <= 10 && p.timer > 0 ? 'timerTimeout':'timer-text'" >{{(p.timer
                            ===
                            this.defaultTimeout) || (p.price === '-' || p.price === '' || p.price === 0 || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout') ? '' : p.timer}}</span>
                    </div>
                    <!-- ngclass added to timer for blinking effect || Jyoti S || 25-Apr-2023 -->

                    <!-- <br *ngIf="p.timer===this.defaultTimeout" /> -->
                    <!-- <br
                            *ngIf="p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled'" /> -->
                    <div class="divRejectedPrice">
                        <h5 class="priceColor hdrRejectedPrice" *ngIf="p.price === 'Rejected'">
                            {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>
                        <div class="infocarddiv" *ngIf="(p.status === 'REJECTED' || p.status === 'Rejected') && (p.price === 'Rejected') && p.remark !==''">
                            <!-- <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                    {{ p.remark}}
                                </span> -->
                                <!--Added by Varsha G || FIN1EURINT-188 || 21-Apr-2023-->
                                <img src="{{asseturl}}information.png" class="info ReqLoader" *ngIf="p.remark !==''">
                                <div class="infodiv" *ngIf="p.remark !==''">
                                    <span class="infoNote spnRemarkInfo" *ngIf="p.remark !==''">
                                            {{p.remark}}
                                    </span>
                                </div>
                        </div>
                    </div>
                    <h5 class="priceColor hdrPriceFont" *ngIf="p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout'">
                        {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>
                    <!-- <h5 class="priceColor" style="font-size: 20px !important" *ngIf="p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price !== 'Timeout'"> -->
                    <div class="divActiveStatus">
                        <div></div>
                        <h5 class="priceColor hdrActiveStatus" *ngIf="p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price !== 'Timeout' && p.price !== '-'">
                            {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>
                            <div class="infocarddiv" *ngIf="(p.status === 'Active'  && p.remark !=='' && p.price !== '-')">
                                <!-- <span class="infocardNote" style="white-space: initial;width: 260px;margin-top:-4em;">
                                        {{ p.remark}}
                                    </span> -->
                                    <!--Added by Varsha G || FIN1EURINT-188 || 21-Apr-2023-->
                                    <img src="{{asseturl}}information.png" class="info imgInfo" *ngIf="p.remark !==''">
                                    <div class="infodiv" *ngIf="p.remark !==''">
                                        <span class="infoNote spnRemark" *ngIf="p.remark !==''">
                                                {{p.remark}}
                                        </span>
                                    </div>
                            </div>
                    </div>
                    <h5 class="priceColor hdrPriceFont" *ngIf="!p.loadFlag && p.price === '-'">
                        {{(p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === '-' || p.price === 'Timeout') ? p.price : p.price | number:'1.2-2'}}</h5>    
                    <div class="txtAlignCenter" *ngIf="p.loadFlag">
                        <div class="row loaderbox" >
                            <div class="col-12">
                                <img src="{{asseturl}}loading_dots.gif" alt="" width="50px" height="54px" class="imgMargin">
                            </div>
                        </div>
                    </div>
                    <!-- <br> -->
                    <!-- <br *ngIf="p.Msg===''">
    <br *ngIf="p.TSMsg===''"> -->
                    <h6 class="hdrTsMsg">{{p.TSMsg}}</h6>
                    <h6 class="hdrMsg">{{p.Msg}}</h6>
                    <!-- <h6  style="height: 2em;" *ngIf="p.TSMsg!==''">{{p.TSMsg}}</h6>
    <h6  style="height: 2em;" *ngIf="p.Msg!==''">{{p.Msg}}</h6> -->
                    <!-- <a *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price > 0"
        class="quoteMailLabel" (click)="emailQuoteLP(p.rfq)">Mail</a><br> -->
                    <div class="divMail">
                        <a *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price > 0 && p.timer !== 0" class="quoteMailLabel" (click)="emailQuote(p.rfq)">Mail</a>
                        <a *ngIf="p.price ==='Timeout' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled'" class="quoteMailLabel mailLabelHeight"></a>
                    </div>
                    <!-- <br
                            *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price !== 'Rejected' && p.price !== 'Unsupported' && p.price !== 'Expired'  && p.price !== 'Cancelled' && p.price > 0">
                        <br
                            *ngIf="p.price === '-' || p.price === '' || p.price ==='Timeout' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled'|| p.price < 0" /> -->
                    <!-- Changed by Amogh K | 19apr2022 | request TS config check | assigned by pranav D -->
                    
                     <!--Start - Changes done by Apurva K|| 26-Apr-2023||FIN1EURINT-246 -->
                    <button class="button btnMinWidth" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq) || (p.timer == 0))|| p.TSFlag|| p.TSDisableFlag || p.TSNotSupported" 
                    *ngIf="(EQ_Show_Termsheet_Button === 'YES' || EQ_Show_Termsheet_Button === 'Y' || EQ_Show_Termsheet_Button === 'Yes')"
                        (click)="RequestTS(i);postBackMethod();">
                            <div class="price-with-loader">
                               Request
                            TS
                                <div class="txtAlignCenter" *ngIf="p.TSLoadFlag">
                                    <div class="row priceall-loader loaderbox" >
                                        <div class="col-12">
                                            <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </button>
                        <!--End - Changes done by Apurva K|| 26-Apr-2023||FIN1EURINT-246 -->
                    <button class="button btnViewTSandKID" *ngIf="p.TSFlag" (click)="ViewTS(i)"> 
                        <div class="price-with-loader divMarginLeft">
                        View TS
                            <div class="txtAlignCenter" *ngIf="p.ViewTSFlag">
                                <div class="row priceall-loader loaderbox" >
                                    <div class="col-12">
                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                    </div>
                                </div>
                            </div>
                        </div></button><!-- Changed by Jyoti S || 25-May-2023 -->
                    <!--Start - Changes done by Apurva K|| 09-May-2023||As suggested by Nitish K  -->
                    <button class="button btnMinWidth" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq) || priipsYN === 'No' || p.timer === 0)|| p.KIDFlag || p.KidDisableFlag || p.KidNotSupported" 
                        *ngIf="(EQ_Show_KID_Button === 'YES' || EQ_Show_KID_Button === 'Y' || EQ_Show_KID_Button === 'Yes')"
                        (click)="RequestKID(i)">
                        <div class="price-with-loader">
                        Request
                            KID
                            <div class="txtAlignCenter" *ngIf="p.KIDLoadFlag">
                                <div class="row priceall-loader loaderbox" >
                                    <div class="col-12">
                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </button>
                    <!--End - Changes done by Apurva K||09-May-2023||As suggested by Nitish K -->

                    <button class="button btnViewTSandKID" *ngIf="p.KIDFlag" (click)="ViewKID(i)" [disabled]="p.ViewKIDFlag">
                        <div class="price-with-loader divMarginLeft">
                            View KID
                                <div class="txtAlignCenter" *ngIf="p.ViewKIDFlag">
                                    <div class="row priceall-loader loaderbox" >
                                        <div class="col-12">
                                            <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" class="loadergif">
                                        </div>
                                    </div>
                                </div>
                            </div></button>
                    <!-- <button class="button"
                    [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq))"
                    style="min-width: 8em;"
                    [routerLink]="['/PreviousQuotesNew',{RFQ_ID:p.rfq,Template_Code:'EQC_Europe',RedirectedFrom:'Pricers',Mode:'Launch Product'}]"
                    routerLinkActive="active-link">Launch Product</button> -->
                    <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                    <button class="button btnMinWidth" *ngIf="isDealer && (EQ_Show_Launch_Button === 'YES' || EQ_Show_Launch_Button === 'Y' || EQ_Show_Launch_Button === 'Yes')" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' || (viewOnly && viewRFQ !== p.rfq) || p.timer === 0)"
                        (click)="lauchProduct(p)">Launch Product</button>
                    <button class="button btnMinWidth" *ngIf="!viewOnly" (click)="PriceLP(p.lp)" [disabled]="!p.priceChkFlg || p.loadFlag">
                        <!-- <div class="price-with-loader"> -->
                            {{ "Price" | translate }}
                            <!-- <div style="text-align: center;" *ngIf="p.loadFlag">
                                <div class="row" style="padding: 0 auto !important;margin: 0;">
                                    <div class="col-12">
                                        <img src="{{asseturl}}Ajaxloader.gif" alt="" width="100px" style="margin-top: -40px; width: 15px; height: 15px;">
                                    </div>
                                </div>
                            </div>
                        </div> -->
                    </button>

                    <!-- Added by Apurva K||10-Aug-2023||HSBCECCLI-32 -->
                    <!-- <button tabindex="43" class="button btnMinWidth" *ngIf="this.matchBtnFlag && p.lp == this.EQ_PriceMatch_LPName" [disabled]="matchLoadflag" (click)="Match()">
                        
                            {{ "Match" | translate }}
                    </button> -->

                    <!-- Modified ngIf condition based on entity config || PriyaL || 05Apr2022 || Assigned by PranavD -->
                    <button class="button btnMinWidth" [disabled]="(p.price === '-' || p.price === 'Rejected' || p.price === 'Unsupported' || p.price === 'Expired' || p.price === 'Cancelled' || p.price === 'Timeout' 
                    || p.timer === '' || p.timer === 0  || (viewOnly && viewRFQ !== p.rfq) || !bookOrderFlag)" (click)="showOrderDetails(p.lp,p.rfq,p);postBackMethod();" *ngIf="!viewOnly && (EQ_Show_Order_Button === 'YES' || EQ_Show_Order_Button === 'Y' || EQ_Show_Order_Button === 'Yes')">Book
                            Order</button>


                </div>
                <div>
                    <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 start -->
                    <!-- <br /> -->
                    <span *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price > 0" class="minMaxLimitFont">
                            {{this.commonfunctions.nFormatter(p.minLimit)}}</span>&nbsp;
                    <span *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price > 0">/</span>&nbsp;
                    <span *ngIf="p.price !== '-' && p.price !=='Timeout' && p.price > 0" class="minMaxLimitFont">
                            {{this.commonfunctions.nFormatter(p.maxLimit)}}</span>
                    <!-- Min max LP section changes | by Amogh K | assigned by Pranav D | 18Apr2022 end -->

                </div>



            </div>
        </div>

    </div>
</div>
<div id="schedule" *ngIf="ProductWatchlist">
    <div class="schedulePopup" style="min-width: 300px !important;">

        <div class="schedule-header">
            <span style="margin-left: 0px;font-size:20px;font-weight: 500">  {{this.commonfunctions.AddtoWatchlist | translate}}</span>
            <app-svg-icons [icon]="'close-icon'" [width]="'14'" style="font-weight: 700;font-size:medium;float:right;" (click)="hideProductPopup()"></app-svg-icons>

        </div>
        <div class="AddToProductDiv">


            <div class="scheduleFieldDiv">

                <div class="AddToProductfieldDiv">
                    <!-- BBVAEPCLI-672 || Translation changes || RadhaM || 8August23 -->
                    <label>{{this.commonfunctions.Solvefor |translate}}</label>
                    <input type="text" class="scheduleSelect" [(ngModel)]="addWatchlistSolveFor" disabled style="text-align: left !important">
                </div>
                <!-- Schedule Type  - new field added by priya l.- assigned by pranav d.  -->
                <!-- Added by RiddhiP || 10aug23 || BBVAEPCLI-672 || updated translations -->
                <div class="AddToProductfieldDiv">
                    <label>{{this.commonfunctions.TargetValue | translate}}</label>
                    <input type="text" class="scheduleSelect" [(ngModel)]="targetValue" (blur)="this.targetValue = commonfunctions.setDecimal($event);">
                </div>
                <div class="AddToProductfieldDiv">
                    <label>{{this.commonfunctions.Direction | translate}}</label>
                    <select class="scheduleSelect" [(ngModel)]="direction" (change)="scheduleTypeChange()">
                        <option value="Up">Up</option>
                        <option value="Down">Down</option>
                    </select>
                </div>
                <div class="AddToProductfieldDiv">
                    <label>{{this.commonfunctions.ValidTill | translate}}</label>
                    <input type="date" class="scheduleSelect" max="{{MaxSelectDate}}" min="{{MinSelectDate}}" [(ngModel)]="expiryDate" style="max-width:none !important; text-align: left">
                </div>
                <div class="AddToProductfieldDiv">
                    <label>{{this.commonfunctions.ScheduledAt | translate}}</label>
                    <input type="time" class="scheduleSelect" [(ngModel)]="TimeValid" value="{{TimeValid}}" style="max-width:none !important; text-align: left">
                </div>
                <!-- 
                <div class="AddToProductfieldDiv">
                    <label>Frequency</label>
                    <select name="" id="">
                        <option value="">Every 2 days</option>
                        <option value="">Every 1 week</option>
                    </select>
                </div> -->



            </div>
            <div class="validationMsg">
                <span class="validationErrorMsg" style="color:var(--red)" *ngIf="ErrorMsg!==''">{{ErrorMsg}}</span>
                <span class="successMsg" *ngIf="scheduleMsg!==''" style="white-space:nowrap;">{{scheduleMsg}}</span>
                <!-- Remove WatchID | Anubhav Goyal | 21-Mar-23 -->
                <span style="text-align: center;" class="successMsg" *ngIf="scheduleMsg!=='' && this.WatchID">Watch ID:
                    <label>{{this.WatchID}}</label></span>
            </div>
            <div class="AddBtnGrid">
                <!-- BBVAEPCLI-672 || Translation changes || RadhaM || 8August23 -->
                <button class="btnPrice" (click)="hideProductPopup()">{{this.commonfunctions.Cancel |translate}}</button>
                <button class="btnPrice" (click)="AddToWatchlist()" style="width: 11em;">{{this.commonfunctions.Add |translate}}</button>

            </div>
        </div>


    </div>
</div>