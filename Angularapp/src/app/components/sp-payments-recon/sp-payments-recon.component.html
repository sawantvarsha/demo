<div>
    <div *ngIf="loader" class="pageOverlay">
        <div class="loader-center">
          <div class="multi-ripple">
            <div></div>
            <div></div>
          </div>
        </div>
    </div>
    <div id="PortfolioData" class="BlotterContainer">
        <div class="showTitle"> <!--class="showTitle"-->
        <div class="pageHeader">{{"SP Payments Recon" | translate}}</div>
            <!-- <hr width="100%" class="productHeaderhr"> -->
            <div  style="align-self: center;">
                <div class="serchbarDiv">
    
                    <!-- <div style="align-self: center;">
                        <label style="line-height: 17px; margin-right: 0.5em !important; font-size: 13px; font-family: var(--font-family) !important;align-self: center;">View</label>
                    </div> -->
                    <!-- <app-custom-dropdown-multi-select [options]="viewList" [displayText2]="'View'"  [pricerType] = "'dropdownSearchSingle'" [(ngModel)]="selectedView" (selectOptionsEmitter)="FilterForAll($event)" *ngIf="viewList?.length > 0 && viewList != undefined"  >
                    </app-custom-dropdown-multi-select> -->
    
                    <!-- <app-custom-dropdown-multi-select [options]="formatData" [displayText2]="'View1'"  [pricerType] = "'dropdownSearch'" [(ngModel)]="selectedFormat" (selectOptionsEmitter)="FilterForAll($event)" *ngIf="formatData?.length > 0 && formatData != undefined"  >
                    </app-custom-dropdown-multi-select> -->
                    <div style="line-height: 17px; margin-right: 0.5em !important; font-size: 13px; font-family: var(--font-family) !important;align-self: center;">
                        {{"View" | translate}} 
                    </div>
                    <div class="shares-search-box" (clickOutside)="showDropdown=false" >
                        <div class="input-field">
    
                            <input  type="text" placeholder="{{'View' | translate}}" [(ngModel)]="viewName" (focus)="selectView()"
                            (keyup)="showDropdown=true;filterViews()" (keyup.arrowup)="changeSearchIndex('UP')" (keyup.enter)="showDropdown=false;"
                            (keyup.arrowdown)="changeSearchIndex('DOWN')" (keyup.backspace)="onBackspaceKeyUp()"style="min-width:100px" >
                            <app-svg-icons class="drop-icon" [icon]="'arrow-drop-down'" style="justify-content: center;" [width]="'8'" [height]="'8'" (click)="showDropdown=!showDropdown;filterViews()">
                            </app-svg-icons>
                            
                        </div>
                            <div class="shares-list" *ngIf="showDropdown">
                                <ul >
                                    <li *ngFor="let view of backUpList"  style="display: flex; justify-content: space-between; align-items: center;" >
                                        <span (click)="viewName=view;GetPortfolio_View_Details();showDropdown=false;" style="width:-webkit-fill-available ;">{{view | translate}}</span>
                                        <span><app-svg-icons class="deleteIcon" [icon]="'delete'"  [width]="'13'" [height]="'13'"  (click)="DeletePortfolio_View_Details(view);showDropdown=false"></app-svg-icons>
                                        <!-- <span><app-svg-icons class="deleteIcon" [icon]="'delete'"  [width]="'13'" [height]="'13'"  ></app-svg-icons> -->
                                        </span>
                                        </li>
                                    
                                </ul>
                            </div>
                    </div>
                    <!-- <div>
                        <div>
                            <input type="text" placeholder="View">
                        </div>
                        <div class="ddl-item ddlSearch-item" *ngFor="let item of formatData;" (click)="setValue2(item,true)">
                            <input type="checkbox" [name]="item" [id]="item" [value]="item" [checked]="isSelected(item)" (click)="setValue2(item, true);postbackMethod();" [disabled]="disabled">
                            <label [for]="item  ">{{ item }}</label>
                        </div>
                    </div> -->
                    
                    <!-- <div>
                        <input style="min-width: 100px;" type="text" placeholder="View" [(ngModel)]="viewName" class="txtalignLeft">
                    </div> -->
    
                    <div class="btn-group btnSaveMargin dropdown" (clickOutside)="saveoptionflag = false"> <!--(clickOutside)="saveoptionflag = false"-->
                        <button type="button" class="btn btn_Save"  tabindex="50" (click)="SavePortfolio_View_Details()" >{{ "Save" | translate }}</button> <!-- (click)="Save()" [disabled]="priceBtnActive === 'N'"-->
                        <!-- (click)="Price()" -->
                        <button type="button"  class="sidebutton btnSaveNShare save-view-btn" (click)="saveoptionflag=!saveoptionflag"> <!-- (click)="saveOptions()" [disabled]="(priceBtnActive === 'N')"-->
                            <app-svg-icons class="arrow-drop-icon" [icon]="'arrow-drop-down'" style="justify-content: center; fill: var(--btn-txt);" [width]="'8'" [height]="'8'" >
                            </app-svg-icons>
                        </button>
                        <div *ngIf="(saveoptionflag)" class="dropdown-content" >
                            <button type="button" class="btn btn_Save update"  tabindex="50" (click)="UpdatePortfolio_View_Details() ;saveoptionflag = false" >
                                <span><app-svg-icons [icon]="'update-icon'" [width]="'15'" [height]="'15'" class="update-icon"></app-svg-icons></span>
                                <span>{{ "Update" | translate }}</span>
                            </button>
                        </div>
                        <!-- <div class="ddl SaveNShare" *ngIf="(saveoptionflag) ">
                            <div class="flexDisplay">
                                <div class="updateIcon" *ngIf="portfolio!=='' && accessRight !== 'VIEW'">
                                        <app-svg-icons [icon]="'update-icon'" [width]="'15'" [height]="'15'">
                                        </app-svg-icons>
                                </div>
                                <div class="ddlitem" role="menuitem" (click)="updateVariant();saveoptionflag=false" *ngIf="portfolio!=='' && accessRight !== 'VIEW'">Update Variant
                                </div>
                            </div>
                            <div class="flexDisplay">
    
                                <div class="SaveNShareIcon">
                                        <app-svg-icons [icon]="'share-icon'" [width]="'15'" [height]="'15'">
                                        </app-svg-icons>
                                </div>
                                <div class="ddlitem" role="menuitem" (click)="showsaveSharePopup()">Save and Share
                                </div>
                            </div>
                        </div> -->
                    </div>
    
                    
                    <div class="searchInnerDiv">
                        <!-- <img style="width:15px;height:15px;margin-left:5px; margin-top:10px;" src="{{asseturl}}search.png"> -->
                        <input type="text" placeholder="{{'External1, External2, ...' | translate}}" [(ngModel)]="selectedExternal" name="search" class="txtSearch" (keyup)="FilterForAll($event)"><!-- [(ngModel)]="search"-->
    
                        <app-svg-icons class="filterIcon" (click)="showFilterDropdown=!showFilterDropdown" [icon]="'filter-icon'" [width]="'18'" [height]="'20'"
                                    [fill]="'var(--input-icon)'" ></app-svg-icons>
                    </div>
                    <div class="forTitleRow">
                        <app-svg-icons [ngClass]="{ 'rotateCircle': loader }" [icon]="'refresh'" [width]="'30'" [height]="'30'" (click)="refresh()" ></app-svg-icons>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div *ngIf="loader" class="pageOverlay">
            <div class="loader-center">
              <div class="multi-ripple">
                <div></div>
                <div></div>
              </div>
            </div>
        </div> -->
    
        <div *ngIf="showFilterDropdown==true" class="filterDiv"> <!--tyle="border: 1px solid #696969 !important;align-self: center;"-->
            <div class="filterMainDiv">
                <div class="labelRowContainer" >
                    <div  class="filterTH alignLeft labelDivWidth labelFilerBlock">
                        <span>{{'Client Filters:' | translate}}</span>
                        <span class="link eachRowFilter " (click)="clearClient()" >{{'Clear Filters' | translate}}</span>
                    </div>
                    <div class="clientFilterDiv">
    
                        <!-- <div><input type="text" placeholder="Group" [(ngModel)]="selectedGroup" (keyup)="FilterForAll($event)" class="filterIputs"></div> -->
                        <app-custom-dropdown-multi-select [options]="groupArr" [backupOptions]="groupArr" [(ngModel)]="selectedGroup" [displayText2]=" groupArr?.length === 1 ? groupArr[0]['value'] : 'Group'" [pricerType]="'dropdownSearch'" [isRefreshed]="clearClientFilter" (selectOptionsEmitter)="clientFilterData($event)" [ngClass]="{ 'disabled': groupArr.length <= 1 }" >
                        </app-custom-dropdown-multi-select>
    
                        <!-- <div><input type="text" placeholder="Client" [(ngModel)]="selectedClient" (keyup)="FilterForAll($event)" class="filterIputs"></div> -->
                        <app-custom-dropdown-multi-select [options]="clientArr" [backupOptions]="clientArr" [(ngModel)]="selectedClient" [displayText2]="'Client'"  [pricerType]="'dropdownSearch'" [isRefreshed]="clearClientFilter" (selectOptionsEmitter)="clientFilterData($event)" >
                        </app-custom-dropdown-multi-select>
    
                        <!-- <div><input type="text" placeholder="Internal Ref./J" [(ngModel)]="selectedIntRef" (keyup)="FilterForAll($event)" class="filterIputs"></div> -->
                        <app-custom-dropdown-multi-select [options]="intRefArr" [backupOptions]="intRefArr" [(ngModel)]="selectedIntRef" [displayText2]="'Internal Ref./J'"  [pricerType]="'dropdownSearch'" [isRefreshed]="clearClientFilter" (selectOptionsEmitter)="clientFilterData($event)" >
                        </app-custom-dropdown-multi-select>
    
                        <!-- <div><input type="text" placeholder="Type" [(ngModel)]="selectedType" (keyup)="FilterForAll($event)" class="filterIputs"></div> -->
                        <app-custom-dropdown-multi-select [options]="typeArr" [backupOptions]="typeArr" [(ngModel)]="selectedType" [displayText2]="'Type'"  [pricerType]="'dropdownSearch'" [isRefreshed]="clearClientFilter" (selectOptionsEmitter)="clientFilterData($event)" >
                        </app-custom-dropdown-multi-select>
    
    
                        <!-- <div><input type="text" placeholder="Tutela" [(ngModel)]="selectedTutela" (keyup)="FilterForAll($event)"  class="filterIputs"></div> -->
                        <app-custom-dropdown-multi-select [options]="tutelaArr" [backupOptions]="tutelaArr" [(ngModel)]=" tutelaArr?.length === 1 ? tutelaArr[0]['value'] : selectedTutela" [displayText2]=" tutelaArr?.length === 1 ? tutelaArr[0]['value'] : 'Tutela'"  [pricerType]="'dropdownSearch'" [isRefreshed]="clearClientFilter" (selectOptionsEmitter)="clientFilterData($event)" [ngClass]="{ 'disabled': tutelaArr.length <= 1 }" >
                        </app-custom-dropdown-multi-select>
    
                        <!-- <div><input type="text" placeholder="Subtutela" [(ngModel)]="selectedSubtutela" (keyup)="FilterForAll($event)" class="filterIputs"></div> -->
                        <app-custom-dropdown-multi-select [options]="subtutelaArr" [backupOptions]="subtutelaArr" [(ngModel)]="selectedSubtutela" [displayText2]="'Subtutela'"  [pricerType]="'dropdownSearch'" [isRefreshed]="clearClientFilter" (selectOptionsEmitter)="clientFilterData($event)" >
                        </app-custom-dropdown-multi-select>
    
                        <!-- <div><input type="text" placeholder="Branch" [(ngModel)]="selectedBranch" (keyup)="FilterForAll($event)" class="filterIputs"></div> -->
                        <app-custom-dropdown-multi-select [options]="branchArr" [backupOptions]="branchArr" [(ngModel)]="selectedBranch" [displayText2]="'Branch'"  [pricerType]="'dropdownSearch'" [isRefreshed]="clearClientFilter" (selectOptionsEmitter)="clientFilterData($event)" >
                        </app-custom-dropdown-multi-select>
    
                        <!-- <div><input type="text" placeholder="Territory" [(ngModel)]="selectedTerritory" (keyup)="FilterForAll($event)" class="filterIputs"></div> -->
                        <app-custom-dropdown-multi-select [options]="territoryArr" [backupOptions]="territoryArr" [(ngModel)]="selectedTerritory" [displayText2]="'Territory'"  [pricerType]="'dropdownSearch'" [isRefreshed]="clearClientFilter" (selectOptionsEmitter)="clientFilterData($event)" >
                        </app-custom-dropdown-multi-select>
    
                        <!-- <div><input type="text" placeholder="Zone" [(ngModel)]="selectedZone" (keyup)="FilterForAll($event)" class="filterIputs"></div> -->
                        <app-custom-dropdown-multi-select [options]="zoneArr" [backupOptions]="zoneArr" [(ngModel)]="selectedZone" [displayText2]="'Zone'"  [pricerType]="'dropdownSearch'" [isRefreshed]="clearClientFilter" (selectOptionsEmitter)="clientFilterData($event)" >
                        </app-custom-dropdown-multi-select>
                        
                    </div>
                    <!-- <div class="clearFilter">
                        <span class="link " (click)="refresh()" >Clear All Filters</span>
                    </div> -->
                </div>
            
                <!-- Added by Apurva K||12-Mar-2024||To add new dropdown in Product Filters -->
                <div class="labelRowContainer">
                    <div style="" class="filterTH labelDivWidth labelFilerBlock">
                        <span>{{'Product Filters:' | translate}}</span> 
                        <span class="link eachRowFilter " (click)="clearProduct()" >{{'Clear Filters' | translate}}</span>    
                    </div>
                    <div class="productFilterDiv">
                    
                        <div class="columnContainer"> 
                            <!-- <input type="text" placeholder="Format" (keyup)="FilterForAll($event)"
                            [(ngModel)]="selectedFormat" name="Group" class="filterIputs"> -->
                            <!-- <select [(ngModel)]="selectedFormat"  placeholder="Format"  (change)="FilterForAll($event)"  class="filterSelect" >
                                <option value="" disabled hidden>Format</option>
                                <option [ngValue]="'all'">All</option>
                                <option *ngFor="let item of formatData;" [ngValue]="item" (click)="selectedMPG=item">{{item}}</option>
                            </select> -->
    
                            <!-- Added by MuditB || 27-Sep-23 || Start || MultiSelect Dropdown Filter -->
    
                            <app-custom-dropdown-multi-select [options]="formatData" 
                                [displayText2]="'Payment Type'" [pricerType] = "'dropdown'" [isRefreshed]="refreshed || clearProductFilter" 
                                [(ngModel)]="selectedFormat" 
                                *ngIf="formatData?.length <= 0 || formatData=='' || formatData==undefined" disabled
                                (selectOptionsEmitter)="FilterForAll($event)">
                            </app-custom-dropdown-multi-select>
                            
                            <app-custom-dropdown-multi-select [options]="formatData"  
                                [displayText2]="'Payment Type'"  [pricerType] = "'dropdown'" [isRefreshed]="refreshed || clearProductFilter"
                                [(ngModel)]="selectedFormat" *ngIf="formatData?.length > 0 && formatData!='' && formatData!=undefined" 
                                (selectOptionsEmitter)="FilterForAll($event)">
                            </app-custom-dropdown-multi-select>
    
                           <!-- Added by MuditB || 27-Sep-23 || End || MultiSelect Dropdown Filter -->
                        </div>
                       
                    </div>
                </div>
                
                <div class="labelRowContainer" >
                    <div style="    margin-top: 25px;" class="filterTH labelDivWidth labelFilerBlock">
                        <span> {{'Date Filters:' | translate}}</span> 
                        <span class="link eachRowFilter " (click)="clearDateFilters()" >{{'Clear Filters' | translate}}</span>
                    </div>
    
                    <div class="productSpecsDiv">
                    
                        <div class="columnContainer"> 
                            <div class="filterLabels">
                                {{'Fixing Date' | translate}} 
                            </div>
                            <div [ngClass]="{ 'showFilter': showSDate,'hideFilter': (!showSDate) }" style="position: relative;">
                                <input type="date" [ngClass]="{'highlight-border': FixingStartDate!=''}" class="input-dob filterIputs" [(ngModel)]="FixingStartDate" value="FixingStartDate"
                                    (change)="selectFixingDate(FixingStartDate); FilterForAll($event)" #SDateField id="SDate" >
                                <span *ngIf="FixingStartDate === '' || FixingStartDate === undefined" class="sDatePlaceHolder">{{'dd-mm-yyyy' | translate}}</span>
                                <span *ngIf="FixingStartDate !== '' && FixingStartDate !== undefined" class="sDate">{{FixingDateDisplay}}</span>
                            </div>
                            <!-- <div [ngClass]="{ 'showFilter': showSDate,'hideFilter': (!showSDate) }" style="position: relative;">
                                <input type="date" [ngClass]="{'highlight-border': EndDate!=''}" class="input-dob filterIputs" [(ngModel)]="EndDate" value="EndDate"
                                    (change)="selectEndDate(EndDate); FilterForAll($event)" #SDateField id="SDate" >
                                <span *ngIf="EndDate === '' || EndDate === undefined" class="sDatePlaceHolder">{{'To Date' | translate}}</span>
                                <span *ngIf="EndDate !== '' && EndDate !== undefined" class="sDate">{{EndDateDisplay}}</span>
                            </div> -->
                        </div>
                        <div class="columnContainer"> 
                            <div class="filterLabels">
                                {{'Payment Date' | translate}} 
                            </div>
                            <div [ngClass]="{ 'showFilter': showSDate,'hideFilter': (!showSDate) }" style="position: relative;">
                                <input type="date" [ngClass]="{'highlight-border': PaymentStartDate!=''}" class="input-dob filterIputs" [(ngModel)]="PaymentStartDate" value="PaymentStartDate"
                                    (change)="selectPaymentDate(PaymentStartDate); FilterForAll($event)" #SDateField id="SDate" >
                                <span *ngIf="PaymentStartDate === '' || PaymentStartDate === undefined" class="sDatePlaceHolder">{{'dd-mm-yyyy' | translate}}</span>
                                <span *ngIf="PaymentStartDate !== '' && PaymentStartDate !== undefined" class="sDate">{{PaymentDateDisplay}}</span>
                            </div>
                            <!-- <div [ngClass]="{ 'showFilter': showSDate,'hideFilter': (!showSDate) }" style="position: relative;">
                                <input type="date" [ngClass]="{'highlight-border': EndDate!=''}" class="input-dob filterIputs" [(ngModel)]="EndDate" value="EndDate"
                                    (change)="selectEndDate(EndDate); FilterForAll($event)" #SDateField id="SDate" >
                                <span *ngIf="EndDate === '' || EndDate === undefined" class="sDatePlaceHolder">{{'To Date' | translate}}</span>
                                <span *ngIf="EndDate !== '' && EndDate !== undefined" class="sDate">{{EndDateDisplay}}</span>
                            </div> -->
                        </div>
                       </div>
                </div>
                
               
                <div class="lastRowFilter" >
                    <div class="clearFilter">
                        <span class="link " (click)="clearAllFilters()" >{{'Clear All Filters' | translate}}</span>
                    </div>
    
                    <div class="columnContainer">
                            
                        <div class="pageRow" >
                            <div class="pagination-class">
    
                                <div class="pagination">
                                    <span class="common-font rows-per-page" style="align-self: center; color: var(--text);" >{{'Record(s) Per Page:' | translate}}</span>
                                    <input class="common-font rows-per-page-input" [(ngModel)]="pageSize" type="text"
                                    (keyup.enter)="onKeydownRowsPerPage(pageSize,this.filteredBackData,1)" (blur)="onKeydownRowsPerPage(pageSize,this.filteredBackData,1)"
                                    />
                                </div>
                    
                                <div class="pagination" >
                                    <!-- <button  class="button arrowButton"  (click)="prevBtnClicked(this.blotterData)" >
                                        <
                                    </button>
                                    <input class="common-font rows-per-page-input" [(ngModel)]="pageNo" type="text"
                                    (keyup.enter)="onKeydownPageNo(pageNo)" (blur)="onKeydownPageNo(pageNo)"
                                    />
                                    <button class="button arrowButton"  (click)="nextBtnClicked(this.blotterData)">
                                    >
                                    </button>  -->
                                    <app-svg-icons class="arrow-img left-arrow" style="rotate: 180deg;" (click)="prevBtnClicked(this.blotterData)"
                                    [icon]="'arrow'" [width]="'15'" [height]="'15'" [fill]="'var(--btn-border)'"></app-svg-icons>
    
                                    <input class="common-font rows-per-page-input" [(ngModel)]="pageNo" type="text"
                                    (keyup.enter)="onKeydownPageNo(pageNo)" (blur)="onKeydownPageNo(pageNo)"
                                    />
    
                                    <app-svg-icons class="arrow-img left-arrow"  (click)="nextBtnClicked(this.blotterData)"
                                    [icon]="'arrow'" [width]="'15'" [height]="'15'" [fill]="'var(--btn-border)'"></app-svg-icons>
                                </div>   
                            </div>
    
                            <div class="pageCount">
                        
                                <span class="paginationtext">Trade Count: {{totalCount}} </span>
    
                                <app-svg-icons style="margin-top: -2px;" [icon]="'xls-icon'" [width]="'25'" [height]="'25'" [fill]="'var(--active)'" (click)="exportAsXLSX_2()"></app-svg-icons>
                                <app-svg-icons style="margin-top: -2px;" [icon]="'pdf-export'" [width]="'10'" [height]="'10'"  [fill]="'var(--active)'" class="exportToPdf" (click)="SaveMainPDF()"></app-svg-icons>
                            </div>
                        </div>
    
                        <!-- <div class="pageCount">
                        
                            <span class="paginationtext">Trade Count: {{totalCount}} </span>
    
                            <app-svg-icons style="margin-top: -4px;" [icon]="'xls-icon'" [width]="'25'" [height]="'25'" [fill]="'var(--active)'" (click)="exportAsXLSX()"></app-svg-icons>
    
                        </div> -->
                    </div>
                </div>
                
            </div>
        </div>
        
        <div> <!--class="DataTable"-->
            <!-- <cdk-virtual-scroll-viewport itemSize="50" class="box"> -->
            <table id="DataTables">
                <thead class="thead1">
                    <tr class="headerFix">
     
                            
                        <th class="flex-center sortIcon" >
                            <span>{{'External' | translate}}</span>
                            <div class="sort-svg-icon">
                                <app-svg-icons class="back-button" [icon]="'sort'" id="External"  [width]="'15'" [height]="'15'"
                                    [fill]="'var(--table-header-text)'" (click)="sort('External',true)"></app-svg-icons> <!--[ngClass]="[ ToAutoCallAscend==true? 'rotate-toggle-menu-icon': 'rotate-toggle-menu-icon-reverse']"-->
                                    <!-- <img style="width: 13px; height: 10px; cursor: pointer; margin: auto;"
                                                src="{{asseturl}}filter-icon.png" (click)="focusOnISIN()"> -->
                            </div>
                            
                        </th>
                            <th class="flex-center">{{'Client' | translate}}</th>
                            <th class="flex-center">{{'Payment Type' | translate}}</th>
                            <th class="flex-center sortIcon" >
                                <span>{{'Trade Date' | translate}}</span>
                                <div class="sort-svg-icon">
                                    <app-svg-icons class="back-button" [icon]="'sort'" id="Trade_Date"  [width]="'15'" [height]="'15'"
                                        [fill]="'var(--table-header-text)'" (click)="sort('Trade_Date',true)"></app-svg-icons> <!--[ngClass]="[ ToAutoCallAscend==true? 'rotate-toggle-menu-icon': 'rotate-toggle-menu-icon-reverse']"-->
                                        <!-- <img style="width: 13px; height: 10px; cursor: pointer; margin: auto;"
                                                    src="{{asseturl}}filter-icon.png" (click)="focusOnISIN()"> -->
                                </div>
                                
                            </th>
                            <th class="flex-center">{{'Model Name' | translate}}</th>
                            <th class="flex-center">{{'Underlying' | translate}}</th>
                            <th class="flex-center sortIcon" >
                                <span>{{'Fixing Date' | translate}}</span>
                                <div class="sort-svg-icon">
                                    <app-svg-icons class="back-button" [icon]="'sort'" id="Fixing_Date"  [width]="'15'" [height]="'15'"
                                        [fill]="'var(--table-header-text)'" (click)="sort('Fixing_Date',true)"></app-svg-icons>
                                        <!-- <img style="width: 13px; height: 10px; cursor: pointer; margin: auto;"
                                                    src="{{asseturl}}filter-icon.png" (click)="focusOnISIN()"> -->
                                </div>
                               
                            </th>
                            <th class="flex-center sortIcon">
                                <span>{{'Payment Date' | translate}}</span>
                                <div class="sort-svg-icon">
                                    <app-svg-icons class="back-button" [icon]="'sort'" id="Payment_Date" [width]="'15'" [height]="'15'"
                                        [fill]="'var(--table-header-text)'" (click)="sort('Payment_Date',true)"></app-svg-icons>
                                        <!-- <img style="width: 13px; height: 10px; cursor: pointer; margin: auto;"
                                                    src="{{asseturl}}filter-icon.png" (click)="focusOnISIN()"> -->
                                </div>
                            </th>
                            <th class="flex-center sortIcon">
                                <span>{{'Maturity'| translate}}</span>
                                <div class="sort-svg-icon">
                                    <app-svg-icons class="back-button" [icon]="'sort'" id="Maturity_Date" [width]="'15'" [height]="'15'"
                                        [fill]="'var(--table-header-text)'" (click)="sort('Maturity_Date',true)"></app-svg-icons>
                                        <!-- <img style="width: 13px; height: 10px; cursor: pointer; margin: auto;"
                                                    src="{{asseturl}}filter-icon.png" (click)="focusOnISIN()"> -->
                                </div>
                            </th>
                            <th class="flex-center sortIcon" >
                                <span>{{'Flow' | translate}}</span>
                                <div class="sort-svg-icon">
                                    <app-svg-icons class="back-button" [icon]="'sort'" id="Flow" [width]="'15'" [height]="'15'"
                                        [fill]="'var(--table-header-text)'" (click)="sort('Flow',true)"></app-svg-icons>
                                        <!-- <img style="width: 13px; height: 10px; cursor: pointer; margin: auto;"
                                                    src="{{asseturl}}filter-icon.png" (click)="focusOnISIN()"> -->
                                </div>
                            </th><!--Mid MX price-->
                            <th class="flex-center">{{'Currency' | translate}}</th>
                            <th class="flex-center">{{'Contract' | translate}}</th>
                            <th class="flex-center">{{'Trade No.' | translate}}</th>
                            <!-- <th>Doc</th> -->
    
                    </tr> 
                </thead>
                <cdk-virtual-scroll-viewport [ngStyle]="{ 'height': showFilterDropdown ? 'calc(95vh - 471px)' : 'calc(100vh - 255px)' }" itemSize="50" class="box">
                <tbody class="overflow-tbody">
                    <!-- <cdk-virtual-scroll-viewport itemSize="50" class="box"> -->
                    <tr  class="row" *cdkVirtualFor="let item of blotterData; let entry = index;"> <!--*ngFor="let item of blotterData; let entry = index;"-->
                        <div class="tRows">
                            <!-- External -->
                            <td class="eachCell">
                                <div *ngIf="item.External!=null && item.External!='N.A.' && item.External!='-'" class="center">{{item.External}}</div>
                                <div *ngIf="item.External==null || item.External=='N.A.'|| item.External=='-'" class="center">-</div>
                            </td>
                            <!-- client -->
                            <td class="eachCell">
                                <div *ngIf="item.Client!=null && item.Client!='N.A.' && item.Client!='-'" class="center">{{item.Client}}</div>
                                <div *ngIf="item.Client==null || item.Client=='N.A.'|| item.Client=='-'" class="center">-</div>
                            </td>
                            <!-- type -->
                            <td class="eachCell">
                                <div *ngIf="item.Payment_Type!=null && item.Payment_Type!='N.A.' && item.Payment_Type!='-'" class="center">{{item.Payment_Type}}</div>
                                <div *ngIf="item.Payment_Type==null || item.Payment_Type=='N.A.'|| item.Payment_Type=='-'" class="center">-</div>
                            </td>
                            <!-- Trade Date -->
                            <td class="eachCell">
                                <div *ngIf="item.Trade_Date!=null && item.Trade_Date!='N.A.' && item.Trade_Date!='-'" class="center">{{item.Trade_Date}}</div>
                                <div *ngIf="item.Trade_Date==null || item.Trade_Date=='N.A.'|| item.Trade_Date=='-'" class="center">-</div>
                            </td>
                            <!-- Model Name -->
                            <td class="eachCell">
                                <div *ngIf="item.Model_Name!=null && item.Model_Name!='N.A.' && item.Model_Name!='-'" class="center">{{item.Model_Name}}</div>
                                <div *ngIf="item.Model_Name==null || item.Model_Name=='N.A.'|| item.Model_Name=='-'" class="center">-</div>
                            </td>
                            <!-- Underlying -->
                            <td class="eachCell">
                                <div *ngIf="item.Underlying!=null && item.Underlying!='N.A.' && item.Underlying!='-'" class="center">{{item.Underlying}}</div>
                                <div *ngIf="item.Underlying==null || item.Underlying=='N.A.'|| item.Underlying=='-'" class="center">-</div>
                            </td>
                            <!-- Fixing Date -->
                            <td class="eachCell">
                                <div *ngIf="item.Fixing_Date!=null && item.Fixing_Date!='N.A.' && item.Fixing_Date!='-'" class="center">{{item.Fixing_Date}}</div>
                                <div *ngIf="item.Fixing_Date==null || item.Fixing_Date=='N.A.'|| item.Fixing_Date=='-'" class="center">-</div>
                            </td>
                            <!-- Payment Date -->
                            <td class="eachCell">
                                <div *ngIf="item.Payment_Date!=null && item.Payment_Date!='N.A.' && item.Payment_Date!='-'" class="center">{{item.Payment_Date}}</div>
                                <div *ngIf="item.Payment_Date==null || item.Payment_Date=='N.A.'|| item.Payment_Date=='-'" class="center">-</div>
                            </td>
                            <!-- Maturity -->
                            <td class="eachCell">
                                <div *ngIf="item.Maturity_Date!=null && item.Maturity_Date!='N.A.' && item.Maturity_Date!='-'" class="center">{{item.Maturity_Date}}</div>
                                <div *ngIf="item.Maturity_Date==null || item.Maturity_Date=='N.A.'|| item.Maturity_Date=='-'" class="center">-</div>
                            </td>
                            <!-- Flow -->
                            <td class="eachCell">
                                <div *ngIf="item.Flow!=null && item.Flow!='N.A.' && item.Flow!='-'" class="right">{{item.Flow}}</div>
                                <div *ngIf="item.Flow==null || item.Flow=='N.A.'|| item.Flow=='-'" class="center">-</div>
                            </td>
                            <!-- Currency -->
                            <td class="eachCell">
                                <div *ngIf="item.Currency!=null && item.Currency!='N.A.' && item.Currency!='-'" class="center">{{item.Currency}}</div>
                                <div *ngIf="item.Currency==null || item.Currency=='N.A.'|| item.Currency=='-'" class="center">-</div>
                            </td>

                             <!-- Contract -->
                             <td class="eachCell">
                                <div *ngIf="item.Currency!=null && item.Currency!='N.A.' && item.Currency!='-'" class="center">{{item.Contract}}</div>
                                <div *ngIf="item.Currency==null || item.Currency=='N.A.'|| item.Currency=='-'" class="center">-</div>
                            </td>
                             <!-- TradeNumb -->
                             <td class="eachCell">
                                <div *ngIf="item.Currency!=null && item.Currency!='N.A.' && item.Currency!='-'" class="center">{{item.TradeNumb}}</div>
                                <div *ngIf="item.Currency==null || item.Currency=='N.A.'|| item.Currency=='-'" class="center">-</div>
                            </td>
                            
                            <!-- <td>Doc</td> -->
                        </div>
                        <div *ngIf="this.showWhatIFFlags[entry]" class="whatIfDiv">
    
                            <div class="box-container">
          
                                  <table *ngIf="this.whatIfData[entry]?.length>0">
                                    <thead class="thead1_sub">
                                          <tr class="whatIfHeader">
                                              <th class="whatIfHead">{{'Underlying' | translate}}</th>
                                              <th class="flex-center whatIfHead">{{'Currency' | translate}}</th>
                                              <th class="flex-center whatIfHead">{{'Closing Price' | translate}} </th>
                                              <th class="flex-center whatIfHead">{{'Delta' | translate}}</th>
                                              <th class="flex-center whatIfHead">{{'Gamma' | translate}}</th>
                                              <th class="flex-center whatIfHead">{{'Vega' | translate}}</th>
                                              <!-- <th>Doc</th> -->
                                          </tr>
                                        </thead>
                                        <tbody>
                                          <tr *ngFor="let item of this.whatIfData[entry]; let i = index;" class="whatIfHeader">
                                            <td class="eachCell">
                                              <div *ngIf="item.underlying==null || item.underlying=='N.A.' || item.underlying==''" class="alignCenter">-</div>
                                              <div *ngIf="item.underlying!=null && item.underlying!='N.A.'">{{item.underlying}}</div>
                                            </td><!---{{item.isin}}-->
                                            <td class="center eachCell">
                                                <div *ngIf="item.deltaCcy==null || item.deltaCcy=='N.A.' || item.deltaCcy==''" class="alignCenter">-</div>
                                                <div *ngIf="item.deltaCcy!=null && item.deltaCcy!='N.A.'">{{item.deltaCcy}}</div>
                                              </td>
                                            <td class="center eachCell">
                                                <div *ngIf="item.lastFixing==null || item.lastFixing=='N.A.' || item.lastFixing==''" class="alignCenter">-</div>
                                                <div *ngIf="item.lastFixing!=null && item.lastFixing!='N.A.'">{{item.lastFixing | number:'1.2-2'}}</div>
                                            </td>
                                            <td class="center eachCell">
                                                <div *ngIf="item.delta==null || item.delta=='N.A.' || item.delta==''" class="alignCenter">-</div>
                                                <div *ngIf="item.delta!=null && item.delta!='N.A.'">{{item.delta | number:'1.2-2'}} ({{item?.deltaPer | number:'1.2-2'}} %)</div>
                                            </td>
                                            <td class="center eachCell">
                                              <div *ngIf="item.gamma==null || item.gamma=='N.A.' || item.gamma==''" class="alignCenter">-</div>
                                                <div *ngIf="item.gamma!=null && item.gamma!='N.A.'">{{item.gamma| number:'1.2-2'}} ({{item?.gammaPer | number:'1.2-2'}} %)</div>
                                            </td>
                                            <td class="center eachCell">
                                              <div *ngIf="item.vega==null || item.vega=='N.A.' || item.vega==''" class="alignCenter">-</div>
                                                <div *ngIf="item.vega!=null && item.vega!='N.A.'">{{item.vega| number:'1.2-2'}} ({{item?.vegaPer | number:'1.2-2'}} %)</div>
                                            </td>
                                              <!-- <td>Doc</td> -->
                                            </tr>
                                      </tbody>
                                  </table>
                                  <div *ngIf="(this.whatIfData[entry]?.length === 0) || (this.whatIfData[entry] == null)">{{'No Records Found' | translate}}</div>
                            </div>
                        </div>
                    </tr>
                    <!-- </cdk-virtual-scroll-viewport> -->
                    <tr *ngIf="blotterData?.length == 0 && !loader" class="noRec">
                       {{' No Record Found' | translate}}
                      </tr>
                    <!-- <div *ngIf="loader" style="text-align: center; margin-top: 15%">
                        <div class="loader-center">
                          <div class="multi-ripple">
                            <div></div>
                            <div></div>
                          </div>
                        </div>
                    </div> -->
                </tbody>
                </cdk-virtual-scroll-viewport>
                <!-- <div class="pagination-class">
    
                    <div class="pagination">
                        <span class="common-font rows-per-page" style="align-self: center; color: var(--text);" >Record(s) Per Page:</span>
                        <input class="common-font rows-per-page-input" [(ngModel)]="pageSize" type="text"
                        (keyup.enter)="onKeydownRowsPerPage(pageSize)" (blur)="onKeydownRowsPerPage(pageSize)"
                        />
                    </div>
        
                    <div class="pagination" >
    
                        <app-svg-icons class="arrow-img left-arrow" style="rotate: 180deg;" (click)="prevBtnClicked(this.blotterData)"
                        [icon]="'arrow'" [width]="'15'" [height]="'15'" [fill]="'var(--btn-border)'"></app-svg-icons>
    
                        <input class="common-font rows-per-page-input" [(ngModel)]="pageNo" type="text"
                        (keyup.enter)="onKeydownPageNo(pageNo)" (blur)="onKeydownPageNo(pageNo)"
                        />
    
                        <app-svg-icons class="arrow-img left-arrow"  (click)="nextBtnClicked(this.blotterData)"
                        [icon]="'arrow'" [width]="'15'" [height]="'15'" [fill]="'var(--btn-border)'"></app-svg-icons>
                    </div>   
                </div> -->
            </table>
            <!-- </cdk-virtual-scroll-viewport> -->
        </div>
    
        <div class="pagination-class">
    
            <!-- <div class="pagination">
                <span class="common-font rows-per-page" style="align-self: center; color: var(--text);" >Record(s) Per Page:</span>
                <input class="common-font rows-per-page-input" [(ngModel)]="pageSize" type="text"
                (keyup.enter)="onKeydownRowsPerPage(pageSize)" (blur)="onKeydownRowsPerPage(pageSize)"
                />
            </div> -->
            <!-- <div> -->
                <span style="width: fit-content;" >{{pageStart}} - {{pageEnd}} of {{totalCount}}</span>
                <div class="pagination" >
    
                    <app-svg-icons class="arrow-img left-arrow" style="rotate: 180deg;" (click)="prevBtnClicked(this.blotterData)"
                    [icon]="'arrow'" [width]="'15'" [height]="'15'" [fill]="'var(--btn-border)'"></app-svg-icons>
    
                    <input class="common-font rows-per-page-input" [(ngModel)]="pageNo" type="text"
                    (keyup.enter)="onKeydownPageNo(pageNo)" (blur)="onKeydownPageNo(pageNo)"/>
        
                    <app-svg-icons class="arrow-img left-arrow" style="margin-top: -1px;"  (click)="nextBtnClicked(this.blotterData)"
                    [icon]="'arrow'" [width]="'15'" [height]="'15'" [fill]="'var(--btn-border)'"></app-svg-icons>
    
                    <!-- <app-svg-icons class="arrow-img left-arrow" style="rotate: 180deg;" (click)="handlePage({'pageNo':pageNo-1,'pageSize':pageSize, 'reload':false,'length':noOfRecords})"
                    [icon]="'arrow'" [width]="'15'" [height]="'15'" [fill]="'var(--btn-border)'"></app-svg-icons>
        
                    <app-svg-icons class="arrow-img left-arrow" style="margin-top: -1px;"  (click)="handlePage({'pageNo':pageNo+1,'pageSize':pageSize, 'reload':false,'length':noOfRecords})"
                    [icon]="'arrow'" [width]="'15'" [height]="'15'" [fill]="'var(--btn-border)'"  [disabled]="disableNext"></app-svg-icons>
                     -->
                </div>  
            <!-- </div> -->
    
            <!-- <div class="pagination" >
    
                <app-svg-icons class="arrow-img left-arrow" style="rotate: 180deg;" (click)="prevBtnClicked(this.blotterData)"
                [icon]="'arrow'" [width]="'15'" [height]="'15'" [fill]="'var(--btn-border)'"></app-svg-icons>
    
                <app-svg-icons class="arrow-img left-arrow" style="margin-top: -1px;"  (click)="nextBtnClicked(this.blotterData)"
                [icon]="'arrow'" [width]="'15'" [height]="'15'" [fill]="'var(--btn-border)'"></app-svg-icons>
            </div>    -->
        </div>
    </div>
    
    <!-- View Timeline / Underlying Prices pop-up || Kaustubh S || 29-Aug-2023 || START  -->
    
    <div *ngIf="showPopup" class="overlay">
    
        <div class="page-content-container-popup scroll">
    
            <div id="timelinePopupPDF">
    
                <div class="header-row d-flex j-c-space-betwn a-i-center">
                    <div class="logo opaque"><img src="{{asseturl}}FA_SANTANDER_PV_POS_RGB.png" alt=""></div>
                    <div class="title">{{popupTitle}}</div>
                    <div class="icons d-flex j-c-center a-i-center">
                        <div class="popupSticker">{{this.selectedItem['Format']}}</div>
                        <app-svg-icons [icon]="'xls'" [width]="'10'" [height]="'10'" class="exportToExcel" (click)="ExportTables()"></app-svg-icons>
                        <app-svg-icons [icon]="'pdf-export'" [width]="'10'" [height]="'10'" class="exportToPdf" (click)="SavePDF()"></app-svg-icons>
                        <app-svg-icons
                        class="refresh-btn"
                        [icon]="'refresh'"
                        [width]="'25'"
                        [height]="'25'"
                        [ngClass]="{ 'rotateCircle': popupLoader }"
                        (click)="ReloadTimeline()"
                        ></app-svg-icons>
                        <app-svg-icons class="closebtn" [icon]="'cancel-icon'" [width]="'20'" [height]="'20'" (click)="showPopup = false">
                        </app-svg-icons>
                        <div class="pdfOpaque opaque d-none">As of Date: {{histTableData?.[histTableData.length - 1]?.['date'] || ''}}</div>
                    </div>
                </div>
                <div class="productDetails">
                    <div><label class="txtBold">{{'Client:' | translate}}</label> {{selectedItem['Client']}}</div>
                    <div><label class="txtBold">{{'Capital Protection:' | translate}}</label> {{100 - selectedItem['CapAtRisk']}}%</div>
                    <div><label class="txtBold">{{'Notional:' | translate}}</label> {{selectedItem.Notional_Amt | number}}&nbsp;{{selectedItem.Currency}}</div>
                </div>
                <!-- <div class="Status pdfOpaque opaque d-none"><label class="txtBold">{{'Status:' | translate}}</label>&nbsp;{{selectedItem['AliveYN']}}</div> -->
    
                <div class="graph-div">
                    <ng-container *ngIf="isVisible | async">
                        <app-underlying-prices 
                            [NMID]="this.selectedItem['Product_Ref']" 
                            [underlying1]="this.selectedItem['UL1']" 
                            [underlying2]="this.selectedItem['UL2']" 
                            [underlying3]="this.selectedItem['UL3']" 
                            [underlying4]="this.selectedItem['UL4']" 
                            [koYN]="this.selectedItem['KOApplicable']"
                            [kiYN]="this.selectedItem['KIApplicable']"
                            [strikeYN]="this.selectedItem['StrikeYN']"
                            [couponBarrierYN]="this.selectedItem['CouponBarrierYN']"
                            [obsTableData]="this.obsTableData"
                            [payoff]="this.selectedItem['PayOff']"
                            [histTableData]="this.histTableData"
                            [cancellationData]="this.cancellationData"
                        ></app-underlying-prices>
                    </ng-container>
                </div>
    
                <div class="obs-table" *ngIf="obsTableData?.length > 0">
                    <div class="title">
                        <label for="">{{'Observation Table' | translate}}</label>
                        <ng-template [ngIf]="this.obsTableData[this.obsTableData.length - 1]['autocalledYN'] === 'Y'" [ngIfElse]="cancelledStatus">
                            <label class="productStatus">{{ '* Autocalled on ' +  this.obsTableData[this.obsTableData.length - 1]['observation_Date'] + ' | ' + this.selectedItem['TAE'] | translate }}</label>
                        </ng-template>
                        <ng-template #cancelledStatus>
                            <ng-template [ngIf]="this.obsTableData[0]['cancelledYN'] === 'Y'" [ngIfElse]="maturedStatus">
                                <label class="productStatus">{{ '* Cancelled on ' +  this.obsTableData[0]['cancelledOn'] + ' | ' + this.selectedItem['TAE'] | translate }}</label>
                            </ng-template>
                        </ng-template>
                        <ng-template #maturedStatus>
                            <ng-template [ngIf]="this.selectedItem['AliveYN'] === 'Dead'" [ngIfElse]="aliveStatus">
                                <span class="productStatus"> <!-- To show TAE if present || Kaustubh S || 22-Nov-2023 || START -->
                                    <label>{{ '* Matured' | translate }}</label>
                                    <label *ngIf="this.selectedItem['TAE']">{{ ' | ' + this.selectedItem['TAE'] | translate }}</label>
                                </span> <!-- To show TAE if present || Kaustubh S || 22-Nov-2023 || END -->
                            </ng-template>
                        </ng-template>
                        <ng-template #aliveStatus>
                            <ng-template [ngIf]="true">
                                <span class="productStatus"> <!-- To show TAE if present || Kaustubh S || 22-Nov-2023 || START -->
                                    <label>{{ '* Alive' | translate }}</label>
                                    <label *ngIf="this.selectedItem['TAE']">{{ ' | ' + this.selectedItem['TAE'] | translate }}</label>
                                </span> <!-- To show TAE if present || Kaustubh S || 22-Nov-2023 || END -->
                            </ng-template>
                        </ng-template>
                    </div>
                    <div class="">
                        <ng-container [ngSwitch]="this.selectedItem['PayOff']">
                            <table *ngSwitchCase="'Autocall'">
                                <thead>
                                    <tr>
                                        <th>{{'Observation Date' | translate}}</th>
                                        <th>{{'Payment Date' | translate}}</th>
                                        <th colspan="2">{{'Autocall trigger/coupon' | translate}}</th>
                                        <th colspan="3">{{'Coupon trigger/coupon' | translate}}</th>
                                        <th>{{'Guaranteed Coupon' | translate}}</th>
                                        <th>{{obsTableData?.[0]?.['optionType'] || 'Barrier (100%)'}}</th>
                                        <th>{{'Payout' | translate}}</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let row of obsTableData; let i = index">
                                        <td>
                                            <div>
                                                <span>{{row['observation_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Final Fixing'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div>
                                                <span>{{row['payment_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Maturity'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>{{ (row['autocall_Trigger'] === '-') ? row['autocall_Trigger'] : _str(row['autocall_Trigger']).concat(' %') }}</td>
                                        <td>{{ (row['autocall_Coupon'] === '-') ? row['autocall_Coupon'] : _str(_num(row['autocall_Coupon']).toFixed(2)).concat(' %') }}</td>
                                        <td>{{ (row['coupon_Trigger'] === '-') ? row['coupon_Trigger'] : _str(row['coupon_Trigger']).concat(' %') }}</td>
                                        <td>{{ (row['coupon'] === '-') ? row['coupon'] : _str(row['coupon']).concat(' %') }}</td>
                                        <td>{{row['memory']}}</td>
                                        <td>{{ (row['guaranteed'] === '-') ? row['guaranteed'] : _str(row['guaranteed']).concat(' %') }}</td>
                                        <td>{{ (row['barrier'] === '-') ? row['barrier'] : _str(row['barrier']).concat(' %') }}</td>
                                        <td [ngClass]="SetPayoutOpacity(row['status'])">{{ (row['payout'] === '-') ? row['payout'] : _str(row['payout']).concat(' %') }}</td>
                                        <td class="d-flex a-i-center j-c-center">
                                            <span [ngClass]="SetStatusCss(row['status'], row['payout'], _num(row['autocall_Coupon']).toFixed(2), row['coupon'], row['guaranteed'])"></span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table *ngSwitchCase="'Digital'">
                                <thead>
                                    <tr>
                                        <th>{{'Observation Date' | translate}}</th>
                                        <th>{{'Payment Date' | translate}}</th>
                                        <th colspan="3">{{'Coupon trigger/coupon' | translate}}</th>
                                        <th>{{'Guaranteed Coupon' | translate}}</th>
                                        <th>{{obsTableData?.[0]?.['optionType'] || 'Barrier (100%)'}}</th>
                                        <th>{{'Payout' | translate}}</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let row of obsTableData; let i = index">
                                        <td>
                                            <div>
                                                <span>{{row['observation_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Final Fixing'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div>
                                                <span>{{row['payment_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Maturity'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>{{ (row['coupon_Trigger'] === '-') ? row['coupon_Trigger'] : _str(row['coupon_Trigger']).concat(' %') }}</td>
                                        <td>{{ (row['coupon'] === '-') ? row['coupon'] : _str(row['coupon']).concat(' %') }}</td>
                                        <td>{{row['memory']}}</td>
                                        <td>{{ (row['guaranteed'] === '-') ? row['guaranteed'] : _str(row['guaranteed']).concat(' %') }}</td>
                                        <td>{{ (row['barrier'] === '-') ? row['barrier'] : _str(row['barrier']).concat(' %') }}</td>
                                        <td [ngClass]="SetPayoutOpacity(row['status'])">{{ (row['payout'] === '-') ? row['payout'] : _str(row['payout']).concat(' %') }}</td>
                                        <td class="d-flex a-i-center j-c-center">
                                            <span [ngClass]="SetStatusCss(row['status'], row['payout'], row['coupon'], row['guaranteed'])"></span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table *ngSwitchCase="'European Digital'">
                                <thead>
                                    <tr>
                                        <th>{{'Observation Date' | translate}}</th>
                                        <th>{{'Payment Date' | translate}}</th>
                                        <th colspan="2">{{'Coupon trigger/coupon' | translate}}</th>
                                        <th>{{'Guaranteed Coupon' | translate}}</th>
                                        <th>{{'Put' | translate}}</th>
                                        <th>{{'Payout' | translate}}</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let row of obsTableData; let i = index">
                                        <td>
                                            <div>
                                                <span>{{row['observation_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Final Fixing'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div>
                                                <span>{{row['payment_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Maturity'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>{{ (row['coupon_Trigger'] === '-') ? row['coupon_Trigger'] : _str(row['coupon_Trigger']).concat(' %') }}</td>
                                        <td>{{ (row['coupon'] === '-') ? row['coupon'] : _str(row['coupon']).concat(' %') }}</td>
                                        <td>{{ (row['guaranteed'] === '-') ? row['guaranteed'] : _str(row['guaranteed']).concat(' %') }}</td>
                                        <td>{{ (row['put'] === '-') ? row['put'] : _str(row['put']).concat(' %') }}</td>
                                        <td [ngClass]="SetPayoutOpacity(row['status'])">{{ (row['payout'] === '-') ? row['payout'] : _str(row['payout']).concat(' %') }}</td>
                                        <td class="d-flex a-i-center j-c-center">
                                            <span [ngClass]="SetStatusCss(row['status'], row['payout'], row['coupon'], row['guaranteed'])"></span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table *ngSwitchCase="'Issuer Callable'">
                                <thead>
                                    <tr>
                                        <th>{{'Observation Date' | translate}}</th>
                                        <th>{{'Payment Date'| translate}}</th>
                                        <th>{{'HasCall/coupon'  | translate}}</th>
                                        <th>{{'Coupon trigger/coupon' | translate}}</th>
                                        <th>{{'Guaranteed Coupon' | translate}}</th>
                                        <th>{{obsTableData?.[0]?.['optionType'] || 'Barrier (100%)'}}</th>
                                        <th>{{'Payout' | translate}}</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let row of obsTableData; let i = index">
                                        <td>
                                            <div>
                                                <span>{{row['observation_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Final Fixing'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div>
                                                <span>{{row['payment_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Maturity'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="d-flex a-i-center j-c-space-betwn">
                                                <label class="flex-basis-0 flex-grow-1 capitalize">{{row['hasCall']}}</label>
                                                <label class="flex-basis-0 flex-grow-1">{{ (row['call_Coupon'] === '-') ? row['call_Coupon'] : _str(_num(row['call_Coupon']).toFixed(2)).concat(' %') }}</label>
                                            </span>
                                        </td>
                                        <td>
                                            <span class="d-flex a-i-center j-c-space-betwn">
                                                <label class="flex-basis-0 flex-grow-1">{{ (row['coupon_Trigger'] === '-') ? row['coupon_Trigger'] : _str(row['coupon_Trigger']).concat(' %') }}</label>
                                                <label class="flex-basis-0 flex-grow-1">{{ (row['coupon'] === '-') ? row['coupon'] : _str(row['coupon']).concat(' %') }}</label>
                                                <label class="flex-basis-0 flex-grow-1">{{row['memory']}}</label>
                                            </span>
                                        </td>
                                        <td>{{ (row['guaranteed'] === '-') ? row['guaranteed'] : _str(row['guaranteed']).concat(' %') }}</td>
                                        <td>{{ (row['barrier'] === '-') ? row['barrier'] : _str(row['barrier']).concat(' %') }}</td>
                                        <td [ngClass]="SetPayoutOpacity(row['status'])">{{ (row['payout'] === '-') ? row['payout'] : _str(row['payout']).concat(' %') }}</td>
                                        <td class="d-flex a-i-center j-c-center">
                                            <span [ngClass]="SetStatusCss(row['status'], row['payout'], _num(row['call_Coupon']).toFixed(2), row['coupon'], row['guaranteed'])"></span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table *ngSwitchCase="'Reverse'">
                                <thead>
                                    <tr>
                                        <th>{{'Observation Date' | translate}}</th>
                                        <th>{{'Payment Date' | translate}}</th>
                                        <th>{{'Guaranteed Coupon' | translate}}</th>
                                        <th>{{obsTableData?.[0]?.['optionType'] || 'Barrier (100%)'}}</th>
                                        <th>{{'Payout' | translate}}</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let row of obsTableData; let i = index">
                                        <td>
                                            <div>
                                                <span>{{row['observation_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Final Fixing'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div>
                                                <span>{{row['payment_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Maturity'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>{{ (row['guaranteed'] === '-') ? row['guaranteed'] : _str(row['guaranteed']).concat(' %') }}</td>
                                        <td>{{ (row['barrier'] === '-') ? row['barrier'] : _str(row['barrier']).concat(' %') }}</td>
                                        <td [ngClass]="SetPayoutOpacity(row['status'])">{{ (row['payout'] === '-') ? row['payout'] : _str(row['payout']).concat(' %') }}</td>
                                        <td class="d-flex a-i-center j-c-center">
                                            <span [ngClass]="SetStatusCss(row['status'], row['payout'], row['guaranteed'])"></span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table *ngSwitchCase="'Vanilla'">
                                <thead>
                                    <tr>
                                        <th>{{'Observation Date' | translate}}</th>
                                        <th>{{'Payment Date' | translate}}</th>
                                        <th *ngIf="obsTableData?.[0]?.['participation'] !== ''">
                                            {{obsTableData?.[0]?.['participation']}}
                                        </th>
                                        <th *ngIf="obsTableData?.[0]?.['rebate'] !== ''">{{'Rebate'}}</th>
                                        <th *ngIf="obsTableData?.[0]?.['optionType'] !== ''">{{obsTableData?.[0]?.['optionType']}}</th>
                                        <th>{{'Payout' | translate}}</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let row of obsTableData; let i = index">
                                        <td>
                                            <div>
                                                <span>{{row['observation_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Final Fixing'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div>
                                                <span>{{row['payment_Date']}}</span>
                                                <div *ngIf="i === (obsTableData.length-1)" class="infoImgDiv">
                                                    <img src="{{asseturl}}information.png" class="info" >
                                                    <div class="infodiv" >
                                                    <span class="infoNote infoSpan">
                                                        <span class="low-fade">{{'Maturity'}}</span>
                                                    </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td *ngIf="row['participation'] !== ''">{{ (row['call'] === '-') ? row['call'] : _str(row['call']).concat(' %') }}</td>
                                        <td *ngIf="row['rebate'] !== ''">{{ (_str(row['rebate']).trim() === '-') ? row['rebate'] : _str(row['rebate']).concat(' %') }}</td>
                                        <td *ngIf="row['optionType'] !== ''">{{ (_str(row['barrier']).trim() === '-') ? row['barrier'] : _str(row['barrier']).concat(' %') }}</td>
                                        <td [ngClass]="SetPayoutOpacity(row['status'])">{{ checkNaN(row['payout']) ? row['payout'] : _str(row['payout']).concat(' %') }}</td>
                                        <td class="d-flex a-i-center j-c-center">
                                            <span [ngClass]="SetStatusCss(row['status'], row['payout'], row['guaranteed'])"></span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </ng-container>
                    </div>
                </div>
    
                <div class="obs-table cancel-status" *ngIf="obsTableData?.length <= 0 && cancellationData?.length > 0 && cancellationData[0]['cancelledYN'] === 'Y'">
                    <div class="title">
                        <label class="productStatus">{{ '* Cancelled on ' +  this.cancellationData[0]['cancelledOn'] + ' | ' + this.selectedItem['TAE'] | translate }}</label>
                    </div>
                </div>
    
                <div class="hist-table" *ngIf="histTableData?.length">
                    <div class="title">
                        <label for="">{{'Historical Performance' | translate}}</label>
                    </div>
                    <div class="">
                        <table>
                            <thead>
                                <tr>
                                    <th></th>
                                    <th colspan="2" class="shareRow" *ngIf="histTableData[0]['share1']">{{histTableData[0]['share1']}}</th>
                                    <th colspan="2" class="shareRow" *ngIf="histTableData[0]['share2']">{{histTableData[0]['share2']}}</th>
                                    <th colspan="2" class="shareRow" *ngIf="histTableData[0]['share3']">{{histTableData[0]['share3']}}</th>
                                    <th colspan="2" class="shareRow" *ngIf="histTableData[0]['share4']">{{histTableData[0]['share4']}}</th>
                                </tr>
                                <tr>
                                    <th>{{'Observation Date' | translate}}</th>
                                    <th *ngIf="histTableData[0]['share1']">{{'Level' | translate}}</th>
                                    <th *ngIf="histTableData[0]['share1']">{{'Performance' | translate}}</th>
                                    <th *ngIf="histTableData[0]['share2']">{{'Level' | translate}}</th>
                                    <th *ngIf="histTableData[0]['share2']">{{'Performance' | translate}}</th>
                                    <th *ngIf="histTableData[0]['share3']">{{'Level' | translate}}</th>
                                    <th *ngIf="histTableData[0]['share3']">{{'Performance' | translate}}</th>
                                    <th *ngIf="histTableData[0]['share4']">{{'Level' | translate}}</th>
                                    <th *ngIf="histTableData[0]['share4']">{{'Performance' | translate}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let row of histTableData; let i = index">
                                    <td>
                                        <div class="d-flex">
                                            <span>{{ i === (histTableData.length-1) ? 'Spot ref.' : row['date']}}</span>
                                            <div *ngIf="i === 0 && histTableData.length > 2" class="infoImgDiv">
                                                <img src="{{asseturl}}information.png" class="info" >
                                                <div class="infodiv" >
                                                <span class="infoNote infoSpan hover-span">
                                                    <span class="low-fade">{{'Strike'}}</span>
                                                </span>
                                                </div>
                                            </div>
                                            <div *ngIf="i === (histTableData.length-2)" class="infoImgDiv">
                                                <img src="{{asseturl}}information.png" class="info" >
                                                <div class="infodiv" >
                                                <span class="infoNote infoSpan">
                                                    <span class="low-fade">{{'Final Fixing'}}</span>
                                                </span>
                                                </div>
                                            </div>
                                        </div> 
                                    </td>
                                    <td *ngIf="histTableData[0]['share1']">{{row['fP1']}}</td>
                                    <td *ngIf="histTableData[0]['share1']">{{row['performance1'] === '-' || row['performance1'] === '' ? row['performance1'] : _str(row['performance1']).concat(' %')}}</td>
                                    <td *ngIf="histTableData[0]['share2']">{{row['fP2']}}</td>
                                    <td *ngIf="histTableData[0]['share2']">{{row['performance2'] === '-' || row['performance2'] === '' ? row['performance2'] : _str(row['performance2']).concat(' %')}}</td>
                                    <td *ngIf="histTableData[0]['share3']">{{row['fP3']}}</td>
                                    <td *ngIf="histTableData[0]['share3']">{{row['performance3'] === '-' || row['performance3'] === '' ? row['performance3'] : _str(row['performance3']).concat(' %')}}</td>
                                    <td *ngIf="histTableData[0]['share4']">{{row['fP4']}}</td>
                                    <td *ngIf="histTableData[0]['share4']">{{row['performance4'] === '-' || row['performance4'] === '' ? row['performance4'] : _str(row['performance4']).concat(' %')}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="liquidation opaque d-none">{{'Liquidation' | translate}}&nbsp;: &nbsp;&nbsp;<label *ngIf="selectedItem['SettlementType'] == 'Cash'">{{'By Differences'}}</label><label *ngIf="selectedItem['SettlementType'] == 'Delivery'">{{'By Delivery'}}</label></div>
    
            </div>
    
        </div>
    
    </div>
    </div>
    
    <!-- View Timeline / Underlying Prices pop-up || Kaustubh S || 29-Aug-2023 || END  -->
    
    <!-- Saving View pop-up || Mudit B || 17-Oct-2023 || START  -->
    <div *ngIf="showViewStatusPopUp" class="view-status-overlay">
        <div class="view-status-content-container-popup">
            <div>
    
                <div>
        
                    <app-svg-icons *ngIf="!ViewFlag" [icon]="'checked-icon'" style="justify-content: center;margin-top: 30px; " [width]="'40'" [height]="'40'" [fill]="'var(--green-bg-lg)'"></app-svg-icons>
                    <app-svg-icons *ngIf="ViewFlag && ViewStatusMsg.includes('delete')" [icon]="'delete'" style="justify-content: center;margin-top: 30px;" [width]="'35'" [height]="'35'" [fill]="'var(--red)'"></app-svg-icons>
                    <app-svg-icons *ngIf="ViewStatusMsg.includes('Please')" [icon]="'warning'" style="justify-content: center;margin-top: 30px;" [width]="'35'" [height]="'35'" [fill]="'#ff6262'"></app-svg-icons>
                    
                </div>
                <div class="view-status-msg">
                    <!-- <span [style.color]="!ViewFlag? 'var(--green-bg-lg)' : 'var(--red)'" style="font-size: 1.6rem;">{{ViewStatusMsg | translate}}</span> -->
                    <span style="font-size: 1.6rem;">{{ViewStatusMsg | translate}}</span>
                </div>
            </div>
            <div>
    
                <button type="button" class="btn btn_Save update"  tabindex="50" (click)="showViewStatusPopUp=false" >
                    <span>{{ "OK" | translate }}</span>
                </button>
            </div>
        </div>
    </div>
    <!-- Saving View pop-up || Mudit B || 17-Oct-2023 || END  -->
    
    <!-- <svg style="margin-top:3px"  focusable="false" height="24px" viewBox="0 0 24 24" width="24px">
        <path d="M7 10l5 5 5-5z" fill="var(--text)"></path>
        <path d="M0 0h24v24H0z" fill="none"></path>
    </svg> -->
    