<div class="container-fluid contentdiv">
    <div class="row" style="padding-top:1em !important;">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-md-12" style="padding:0;">
            <label class="title" style="font-size: 20px; ">Client Onboarding
                {{selectedEntityName.length ? '(' + selectedEntityName + ')' : ''}}</label>
            <hr class="product-underline" width="100%"
                style="border: 0; height:1px; margin-left: 0px; margin-top: 0px;">
        </div>
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-md-12">
            <div class="row" style="margin-bottom: 10px; padding: 0.2em 1em 0em 0em !important;">
                <div class="col-xl-5 col-md-12 col-sm-12 col-md-12 textworkflow">Pending as of Today</div>
                <div class="col-xl-5 col-md-12 col-sm-12 col-md-12 textworkflow">
                    <input type="checkbox" name="closure" tabindex="3" accesskey="I"
                        (change)="includeClosureCheck($event)">&nbsp; Include Closures
                </div>
                <div class="col-xl-2 no-padding col-md-12 col-sm-12 col-md-12">
                    <input type="button" value="New Record" class="btn" (click)="gotoNewRecordPage()">
                </div>
            </div>
            <div class="row" style="margin-bottom: 10px; padding: 0.2em 1em 0em 0em !important;">
                <div class="search-wrapper col-10">
                    <form>
                        <label class="textworkflow" for="search">Search: </label>
                        <input type="text" class="search-box" [(ngModel)]="searchKey" tabindex="4" accesskey="S"
                            name="search" id="search" placeholder="FinIQ Ref No. / Customer Name"
                            (change)="searchCriteriaChanged()" (keydown.enter)="searchCriteriaChanged()" />
                        <button class="close-icon" type="reset" *ngIf="searchKey" (click)="clearSearchKey()"></button>
                    </form>
                </div>
                <div *ngIf="toggleFlag === 'light'" class="col-2 no-padding" style="margin-top: 18px" accesskey="R">
                    <img style="cursor: pointer;"
                        src="http://finiqfaio.southindia.cloudapp.azure.com/FinIQAngular_ClientOnboarding/assets/refresh_light.png"
                        width="20px" (click)="this.afs.clearObservers(); OnLoadEvents(entityId)">
                </div>
                <div *ngIf="toggleFlag === 'silver'" class="col-2 no-padding" style="margin-top: 18px" accesskey="R">
                    <img style="cursor: pointer;"
                        src="http://finiqfaio.southindia.cloudapp.azure.com/FinIQAngular_ClientOnboarding/assets/refresh_silver.png"
                        width="20px" (click)="this.afs.clearObservers(); OnLoadEvents(entityId)">
                </div>
            </div>
        </div>
    </div>

    <div class="row" *ngIf="toggleFlag === 'light'" style=" padding-top: 0px !important; margin-left: -4em !important">
        <div class="col-xl-6 col-lg-6 col-sm-12 col-md-12 col-xs-12 rowMargin borderright">
            <h4 class="orderlabel" style="font-size: 15px;">Client Onboarding ({{clientOnboardingCount}})</h4>
            <google-chart  id="ClientOnboardingLight" #chart [title]="ClientOnboardingChartTitle" [type]="ClientOnboardingChartType"
                [data]="ClientOnboardingChartData" 
                [options]="ClientOnboardingChartOptionslight" (ready)="graphReady('ClientOnboardingLight')"
                (select)="SelectPieChartSlice($event, 'ClientOnboarding'); ClearProcessTokenMessage();">
            </google-chart>
        </div>
        <div class="col-xl-6 col-lg-6 col-sm-12 col-md-12 col-xs-12 rowMargin">
            <h4 class="orderlabel">Supporting Documents ({{supportingDocumentCount}})</h4>
            <google-chart id="SupportingDocumentsSliver" #chart [title]="SupportingDocumentsChartTitle" [type]="SupportingDocumentsChartType"
                [data]="SupportingDocumentsChartData" 
                [options]="SupportingDocumentsChartOptionslight" (ready)="graphReady('SupportingDocumentsSliver')"
                (select)="SelectPieChartSlice($event, 'SupportingDocuments'); ClearProcessTokenMessage();">
            </google-chart>
        </div>
    </div>

    <div class="row" *ngIf="toggleFlag === 'silver'" style=" padding-top: 0px !important; margin-left: -4em !important">
        <div class="col-xl-6 col-lg-6 col-sm-12 col-md-12 col-xs-12 rowMargin borderright">
            <h4 class="orderlabel" style="font-size: 15px;">Client Onboarding ({{clientOnboardingCount}})</h4>
            <google-chart id="ClientOnboardingLight" #chart [title]="ClientOnboardingChartTitle" [type]="ClientOnboardingChartType"
                [data]="ClientOnboardingChartData" 
                [options]="ClientOnboardingChartOptionssilver" (ready)="graphReady('ClientOnboardingLight')"
                (select)="SelectPieChartSlice($event, 'ClientOnboarding'); ClearProcessTokenMessage();">
            </google-chart>
        </div>
        <div class="col-xl-6 col-lg-6 col-sm-12 col-md-12 col-xs-12 rowMargin">
            <h4 class="orderlabel">Supporting Documents ({{supportingDocumentCount}})</h4>
            <google-chart id="SupportingDocumentsSilver" #chart [title]="SupportingDocumentsChartTitle" [type]="SupportingDocumentsChartType"
                [data]="SupportingDocumentsChartData" 
                [options]="SupportingDocumentsChartOptionssilver" (ready)="graphReady('SupportingDocumentsSilver')"
                (select)="SelectPieChartSlice($event, 'SupportingDocuments'); ClearProcessTokenMessage();">
            </google-chart>
        </div>
    </div>


    <div class="row" *ngIf="loader">
        <div class="col-10 offset-1 center loader"></div>
    </div>
    <div class="row" *ngIf="tokens.length">
        <div class="col-12">
            <h3 style="color: grey">{{selectedQueueName}}</h3>
        </div>
    </div>
    <div class="row" *ngIf="processTokenMessage">
        <!-- <div class="row"> -->
        <div class="col-12">
            <span class="processTokenMessage">
                {{processTokenMessage}}
            </span>
            <div class="externalLinkIcon" (click)="gotoProcessTokenQueue()"></div>
        </div>
    </div>
    <div class="row" *ngIf="tokens.length" style="padding-top: 0.5em !important">
        <div class="col-xl-12 col-lg-12 col-sm-12 col-md-12 col-xs-12 rowMargin">
            <table class="dealDetails" style="overflow-x: auto;">
                <thead>
                    <tr>
                        <th>Actions</th>
                        <th *ngFor="let tag of tokenColumnNames">{{tag}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let qs of tokens; let i = index;">
                        <td>
                            <app-dynamic-control *ngFor="let ctrl of buttons" [controlDetails]="ctrl" [tabindex]="i + 5"
                                [token]="qs[cfs.convertTagNames('TI_ID', 'data')]"
                                (action)="processDynamicControlEvent($event)"></app-dynamic-control>
                        </td>
                        <td *ngFor="let tag of tokenColumnNames">
                            <span *ngIf="(tag + '').includes('FinIQ') && (tag + '').includes('Ref')" class="link"
                                (click)="openFinIQWebApp(qs)">{{qs[cfs.convertTagNames(tag, 'data')]}}</span>
                            <span
                                *ngIf="!(tag + '').includes('FinIQ') && !(tag + '').includes('Ref')">{{qs[cfs.convertTagNames(tag, 'data')]}}</span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>